function lineStyleFn(a){return"object"==typeof chartJSLineStyle[a]?chartJSLineStyle[a]:chartJSLineStyle.solid}function roundToWithThousands(a,b,c){var d=1*unFormat(a,b);if("number"==typeof d&&"none"!=c){var e;if(c<=0)e=-c,d=+(Math.round(d+"e+"+e)+"e-"+e);else{e=c;var f="1e+"+e;d=+Math.round(d/f)*f}}return d=fmtChartJS(a,d,"none")}function unFormat(a,b){if("."==a.decimalSeparator&&""==a.thousandSeparator||"string"!=typeof b)return b;var c=""+b;if(""!=a.thousandSeparator)for(;c.indexOf(a.thousandSeparator)>=0;)c=""+c.replace(a.thousandSeparator,"");return"."!=a.decimalSeparator&&(c=""+c.replace(a.decimalSeparator,".")),1*c}function fmtChartJSPerso(a,b,c){switch(c){case"SampleJS_Format":"number"==typeof b?return_value="My Format : "+b.toString()+" $":return_value=b+"XX";break;case"Change_Month":"string"==typeof b?return_value=b.toString()+" 2014":return_value=b.toString()+"YY";break;default:return_value=b}return return_value}function fmtChartJS(a,b,c){var d;if("notformatted"==c)d=b;else if("none"!=c&&"money"!=c||"number"!=typeof b)d="none"!=c&&"notformatted"!=c?fmtChartJSPerso(a,b,c):b;else{if("none"!=a.roundNumber){var e;if(a.roundNumber<=0)e=-a.roundNumber,b=+(Math.round(b+"e+"+e)+"e-"+e);else{e=a.roundNumber;var f="1e+"+e;b=+Math.round(b/f)*f}}if("."!=a.decimalSeparator||""!=a.thousandSeparator){if(d=b.toString().replace(/\./g,a.decimalSeparator),""!=a.thousandSeparator){var g=d,h="",i=g.indexOf(a.decimalSeparator);i>=0&&(h=g.substring(i+1,g.length),h=h.split("").reverse().join(""),g=g.substring(0,i)),g=g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a.thousandSeparator),h=h.split("").reverse().join(""),d=g,""!=h&&(d=d+a.decimalSeparator+h)}}else d=b;"money"==c&&("before"==a.currencyPosition?d=a.currency+d:d+=a.currency)}return d}function addParameters2Function(data,fctName,fctList){var mathFunctions={mean:{data:data.data,datasetNr:data.v11},varianz:{data:data.data,datasetNr:data.v11},stddev:{data:data.data,datasetNr:data.v11},cv:{data:data.data,datasetNr:data.v11},median:{data:data.data,datasetNr:data.v11}};if(dif=!1,"Dif"==fctName.substr(-3)&&(fctName=fctName.substr(0,fctName.length-3),dif=!0),"function"==typeof eval(fctName)){var parameter=eval(fctList+"."+fctName);return dif?data.v3-window[fctName](parameter):window[fctName](parameter)}return null}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}function tmplbis(a,b,c){return newstr=a,newstr.substr(0,c.templatesOpenTag.length)==c.templatesOpenTag&&(newstr="<%="+newstr.substr(c.templatesOpenTag.length,newstr.length-c.templatesOpenTag.length)),newstr.substr(newstr.length-c.templatesCloseTag.length,c.templatesCloseTag.length)==c.templatesCloseTag&&(newstr=newstr.substr(0,newstr.length-c.templatesCloseTag.length)+"%>"),tmplter(newstr,b)}function tmplter(a,b){for(var c=["mean","varianz","stddev","cv","median"],d=new RegExp("<%=((?:(?:.*?)\\W)??)((?:"+c.join("|")+")(?:Dif)?)\\(([0-9]*?)\\)(.*?)%>","g");d.test(a);)a=a.replace(d,function(a,c,d,e,f){var g;g=e?e:2;var h=addParameters2Function(b,d,"mathFunctions");return isNumber(h)?"<%="+c+Math.round(Math.pow(10,g)*h)/Math.pow(10,g)+f+"%>":"<%= %>"});var e=/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(a)?cachebis[a]=cachebis[a]||tmplter(document.getElementById(a).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\n]/g,"\\n").replace(/[\t]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return b?e(b):e}function createCursorDiv(){if(0==cursorDivCreated){var a=document.createElement("divCursor");a.id="divCursor",a.style.position="absolute",document.body.appendChild(a),cursorDivCreated=!0}}function addResponsiveChart(a,b,c,d){0==initChartJsResize&&(window.addEventListener?window.addEventListener("resize",chartJsResize):window.attachEvent("resize",chartJsResize)),jsGraphResize[jsGraphResize.length]=[a,b.tpchart,b,c,d]}function getMaximumWidth(a){return null!=a.parentNode&&void 0!=a.parentNode&&(container=a.parentNode),container.clientWidth}function getMaximumHeight(a){return null!=a.parentNode&&void 0!=a.parentNode&&(container=a.parentNode),container.clientHeight}function resizeCtx(a,b){if(isIE()<9&&0!=isIE())return!0;if(b.responsive){"undefined"==typeof b.maintainAspectRatio&&(b.maintainAspectRatio=!0),"undefined"==typeof b.responsiveMinWidth&&(b.responsiveMinWidth=0),"undefined"==typeof b.responsiveMinHeight&&(b.responsiveMinHeight=0),"undefined"==typeof b.responsiveMaxWidth&&(b.responsiveMaxWidth=9999999),"undefined"==typeof b.responsiveMaxHeight&&(b.responsiveMaxHeight=9999999);var c=a.canvas;"undefined"==typeof a.aspectRatio&&(a.aspectRatio=c.width/c.height);var d=getMaximumWidth(c),e=b.maintainAspectRatio?d/a.aspectRatio:getMaximumHeight(c);d=Math.min(b.responsiveMaxWidth,Math.max(b.responsiveMinWidth,d)),e=Math.min(b.responsiveMaxHeight,Math.max(b.responsiveMinHeight,e)),"undefined"==typeof a.DefaultchartTextScale&&(a.DefaultchartTextScale=b.chartTextScale),"undefined"==typeof a.DefaultchartLineScale&&(a.DefaultchartLineScale=b.chartLineScale),"undefined"==typeof a.DefaultchartSpaceScale&&(a.DefaultchartSpaceScale=b.chartSpaceScale),"undefined"!=typeof a.chartTextScale&&b.responsiveScaleContent&&(a.chartTextScale=a.DefaultchartTextScale*(d/a.initialWidth),a.chartLineScale=a.DefaultchartLineScale*(d/a.initialWidth),a.chartSpaceScale=a.DefaultchartSpaceScale*(d/a.initialWidth)),window.devicePixelRatio>1&&(a.canvas.style.width=d+"px",a.canvas.style.height=e+"px"),a.canvas.height=e*Math.max(1,window.devicePixelRatio),a.canvas.width=d*Math.max(1,window.devicePixelRatio),a.scale(Math.max(1,window.devicePixelRatio),Math.max(1,window.devicePixelRatio))}else window.devicePixelRatio>1&&("undefined"==typeof a.original_width&&(a.original_width=a.canvas.width,a.original_height=a.canvas.height),a.canvas.style.width=a.original_width+"px",a.canvas.style.height=a.original_height+"px",a.canvas.height=a.original_height*window.devicePixelRatio,a.canvas.width=a.original_width*window.devicePixelRatio,a.scale(window.devicePixelRatio,window.devicePixelRatio))}function chartJsResize(){for(var a=0;a<jsGraphResize.length;a++)0==jsGraphResize[a][2].firstPass||(9==jsGraphResize[a][2].firstPass?(jsGraphResize[a][2].firstPass=2,redrawGraph(jsGraphResize[a][2],jsGraphResize[a][3],jsGraphResize[a][4])):jsGraphResize[a][2].firstPass<10&&(jsGraphResize[a][2].firstPass+=10))}function testRedraw(a,b,c){return a.firstPass>10&&(a.firstPass=2,redrawGraph(a,b,c),!0)}function updateChart(a,b,c,d,e){if(9==a.firstPass){if(a.runanimationcompletefunction=e,d?a.firstPass=1:a.firstPass=2,c.responsive)for(var f=0;f<jsGraphResize.length;f++)jsGraphResize[f][2].ChartNewId==a.ChartNewId&&(jsGraphResize[f][3]=b,jsGraphResize[f][4]=c);redrawGraph(a,b,c)}}function redrawGraph(ctx,data,config){var myGraph=new Chart(ctx);eval("myGraph."+ctx.tpchart+"(data,config);")}function checkBrowser(){return this.ver=navigator.appVersion,this.dom=document.getElementById?1:0,this.ie5=this.ver.indexOf("MSIE 5")>-1&&this.dom?1:0,this.ie4=document.all&&!this.dom?1:0,this.ns5=this.dom&&parseInt(this.ver)>=5?1:0,this.ns4=document.layers&&!this.dom?1:0,this.bw=this.ie5||this.ie4||this.ns4||this.ns5,this}function cursorInit(){scrolled=bw.ns4||bw.ns5?"window.pageYOffset":"document.body.scrollTop",bw.ns4&&document.captureEvents(Event.MOUSEMOVE)}function makeCursorObj(obj,nest){return createCursorDiv(),nest=nest?"document."+nest+".":"",this.css=bw.dom?document.getElementById(obj).style:bw.ie4?document.all[obj].style:bw.ns4?eval(nest+"document.layers."+obj):0,this.moveIt=b_moveIt,cursorInit(),this}function b_moveIt(a,b){this.x=a,this.y=b,this.css.left=this.x+"px",this.css.top=this.y+"px"}function isIE(){var a=navigator.userAgent.toLowerCase();return a.indexOf("msie")!=-1&&parseInt(a.split("msie")[1])}function mergeChartConfig(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c}function sleep(a){var b=new Date;for(b.setTime(b.getTime()+a);(new Date).getTime()<b.getTime(););}function saveCanvas(a,b,c){cvSave=a.getImageData(0,0,a.canvas.width,a.canvas.height);var d={savePng:!1,annotateDisplay:!1,animation:!1,dynamicDisplay:!1};savePngConfig1=mergeChartConfig(c,d),savePngConfig1.clearRect=!1,redrawGraph(a,b,savePngConfig1);var e;if("NewWindow"==c.savePngOutput&&(e=a.canvas.toDataURL(),a.putImageData(cvSave,0,0),window.open(e,"_blank")),"CurrentWindow"==c.savePngOutput&&(e=a.canvas.toDataURL(),a.putImageData(cvSave,0,0),window.location.href=e),"Save"==c.savePngOutput){e=a.canvas.toDataURL();var f=document.createElement("a");f.href=e,f.download=c.savePngName+".png",document.body.appendChild(f),f.click(),document.body.removeChild(f)}}function dynamicFunction(a,b,c){if(isIE()<9&&0!=isIE())return!0;if(b.dynamicDisplay&&0==c.firstPass){if(""==c.canvas.id){var d=new Date,e=d.getTime();c.canvas.id="Canvas_"+e}if("undefined"==typeof dynamicDisplay[c.canvas.id]&&(dynamicDisplayList[dynamicDisplayList.length]=c.canvas.id,dynamicDisplay[c.canvas.id]=[c,a,b],window.onscroll=scrollFunction),!isScrolledIntoView(c.canvas,b))return!1}return!0}function isScrolledIntoView(a,b){var e,f,c=0,d=0;for("undefined"==typeof a.recomputedHeight&&(window.devicePixelRatio?(a.recomputedHeight=a.height/window.devicePixelRatio,a.recomputedWidth=a.width/window.devicePixelRatio):(a.recomputedHeight=a.height,a.recomputedWidth=a.width)),e=a.recomputedWidth,f=a.recomputedHeight,elem=a;elem;)c+=elem.offsetLeft+elem.clientLeft,d+=elem.offsetTop+elem.clientTop,elem=elem.offsetParent;return c+e*b.dynamicDisplayXPartOfChart>=window.pageXOffset&&c+e*b.dynamicDisplayXPartOfChart<=window.pageXOffset+window.innerWidth&&d+f*b.dynamicDisplayYPartOfChart>=window.pageYOffset&&d+f*b.dynamicDisplayYPartOfChart<=window.pageYOffset+window.innerHeight}function scrollFunction(){for(var a=0;a<dynamicDisplayList.length;a++)0==dynamicDisplay[dynamicDisplayList[a]][0].firstPass&&redrawGraph(dynamicDisplay[dynamicDisplayList[a]][0],dynamicDisplay[dynamicDisplayList[a]][1],dynamicDisplay[dynamicDisplayList[a]][2])}function clearAnnotate(a){jsGraphAnnotate[a]=[],jsTextMousePos[a]=[]}function getMousePos(a,b){var c=a.getBoundingClientRect();return{x:b.clientX-c.left,y:b.clientY-c.top}}function isHighLighted(a,b,c,d,e,f,g){var h;if("object"==typeof c.special)for(h=c.special.length-1;h>=0;h--)if("highLight"==c.special[h].typespecial&&c.special[h].posi==e&&c.special[h].posj==f)return!0;return!1}function isNotHighLighted(a,b,c,d,e,f,g){return!isHighLighted(a,b,c,d,e,f,g)}function deleteHighLight(a,b){var c;if("object"==typeof b.special)for(c=b.special.length-1;c>=0;c--)"highLight"==b.special[c].typespecial&&b.special.splice(c,1)}function highLightAction(action,ctx,data,config,v1,v2){if(9==ctx.firstPass){var currentlyDisplayed=[-1,-1],redisplay=!1,i,j;if("object"==typeof data.special)for(i=0;i<data.special.length&&currentlyDisplayed[0]==-1;i++)"highLight"==data.special[i].typespecial&&(currentlyDisplayed=[data.special[i].posi,data.special[i].posj]);var deleteOld=!1,addNew=!1,property,output;if("HIDE"==action&&currentlyDisplayed[0]!=-1?deleteOld=!0:"HIDE"!=action&&"group"==config.highLightFullLine&&currentlyDisplayed[1]!=v2?(currentlyDisplayed[0]!=-1&&(deleteOld=!0),addNew=!0):"HIDE"==action||0!=config.highLightFullLine||currentlyDisplayed[0]==v1&&currentlyDisplayed[1]==v2?"HIDE"!=action&&1==config.highLightFullLine&&currentlyDisplayed[0]!=v1&&(currentlyDisplayed[0]!=-1&&(deleteOld=!0),addNew=!0):(currentlyDisplayed[0]!=-1&&(deleteOld=!0),addNew=!0),deleteOld)for(redisplay=!0,i=data.special.length-1;i>=0;i--)"highLight"==data.special[i].typespecial&&data.special.splice(i,1);if(addNew)if(redisplay=!0,"undefined"==typeof data.special&&(data.special=[]),"group"==config.highLightFullLine){for(j=0;j<data.datasets.length;j++)if(0!=data.datasets[j].mouseDetection){output="";for(property in config.highLightSet)""!=output&&(output+=","),output+="string"==typeof config.highLightSet[property]?property+': "'+config.highLightSet[property]+'"':property+": "+config.highLightSet[property];eval("data.special[data.special.length]={"+output+"};"),data.special[data.special.length-1].posi=j,data.special[data.special.length-1].posj=v2,data.special[data.special.length-1].typespecial="highLight"}}else if(1==config.highLightFullLine){if(0!=data.datasets[v1].mouseDetection)for(j=0;j<data.datasets[v1].data.length;j++){output="";for(property in config.highLightSet)""!=output&&(output+=","),output+="string"==typeof config.highLightSet[property]?property+': "'+config.highLightSet[property]+'"':property+": "+config.highLightSet[property];eval("data.special[data.special.length]={"+output+"};"),data.special[data.special.length-1].posi=v1,data.special[data.special.length-1].posj=j,data.special[data.special.length-1].typespecial="highLight"}}else if(0!=data.datasets[v1].mouseDetection){output="";for(property in config.highLightSet)""!=output&&(output+=","),output+="string"==typeof config.highLightSet[property]?property+': "'+config.highLightSet[property]+'"':property+": "+config.highLightSet[property];eval("data.special[data.special.length]={"+output+"};"),data.special[data.special.length-1].posi=v1,data.special[data.special.length-1].posj=v2,data.special[data.special.length-1].typespecial="highLight"}1==redisplay&&updateChart(ctx,data,config,!1,config.highLightRerunEndFunction)}}function doMouseAction(event,ctx,action){function isAction(a,b){return a==b||"mousemove"==a&&("mousewheel"==b||"mouseout"==b)}function runFunction(a){var b;for(b=0;b<pieceOfChartFound.length;b++)a(event,ctx,config,data,pieceOfChartFound[b].myStatData);for(b=0;b<textOnChartFound.length;b++)a(event,ctx,config,data,{type:"CLICKONTEXT",values:jsTextMousePos[ctx.ChartNewId][textOnChartFound[b]]});0==pieceOfChartFound.length&&0==textOnChartFound.length&&a(event,ctx,config,data,null)}if(9==ctx.firstPass&&("mousedown"==action&&(action=action+" "+event.which),!(ctx.mouseAction.indexOf(action)<0))){var config=mouseActionData[ctx.ChartNewId].config,data=mouseActionData[ctx.ChartNewId].data,i,prevShown,prevShowSaved,inRect,P12,D12,D34,P13,D13,D24,y1,y2,y3,y4,pieceOfChartFound=[],textOnChartFound=[],distance,angle,topY,bottomY,leftX,rightX,mousewheelevt=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",canvas_pos=getMousePos(ctx.canvas,event),realAction,annotateDIV,showDiv;for(realAction="mousedown 1"==action?"mousedown left":"mousedown 2"==action?"mousedown middle":"mousedown 3"==action?"mousedown right":action==mousewheelevt?"mousewheel":action,i=0;i<jsGraphAnnotate[ctx.ChartNewId].length;i++)if("ARC"==jsGraphAnnotate[ctx.ChartNewId][i][0])myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]],distance=Math.sqrt((canvas_pos.x-myStatData.midPosX)*(canvas_pos.x-myStatData.midPosX)+(canvas_pos.y-myStatData.midPosY)*(canvas_pos.y-myStatData.midPosY)),distance>myStatData.int_radius&&distance<myStatData.radiusOffset&&(angle=(Math.acos((canvas_pos.x-myStatData.midPosX)/distance)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),canvas_pos.y<myStatData.midPosY&&(angle=-angle),angle=((angle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.startAngle=((myStatData.startAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle=((myStatData.endAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle<myStatData.startAngle&&(myStatData.endAngle+=2*Math.PI),(angle>myStatData.startAngle&&angle<myStatData.endAngle||angle>myStatData.startAngle-2*Math.PI&&angle<myStatData.endAngle-2*Math.PI||angle>myStatData.startAngle+2*Math.PI&&angle<myStatData.endAngle+2*Math.PI)&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,pieceOfChartFound[pieceOfChartFound.length]={piece:i,myStatData:myStatData}));else if("MARC"==jsGraphAnnotate[ctx.ChartNewId][i][0])myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]][jsGraphAnnotate[ctx.ChartNewId][i][2]],distance=Math.sqrt((canvas_pos.x-myStatData.midPosX)*(canvas_pos.x-myStatData.midPosX)+(canvas_pos.y-myStatData.midPosY)*(canvas_pos.y-myStatData.midPosY)),distance>myStatData.int_radius&&distance<myStatData.radiusOffset&&(angle=(Math.acos((canvas_pos.x-myStatData.midPosX)/distance)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),canvas_pos.y<myStatData.midPosY&&(angle=-angle),angle=((angle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.startAngle=((myStatData.startAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle=((myStatData.endAngle+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),myStatData.endAngle<myStatData.startAngle&&(myStatData.endAngle+=2*Math.PI),(angle>myStatData.startAngle&&angle<myStatData.endAngle||angle>myStatData.startAngle-2*Math.PI&&angle<myStatData.endAngle-2*Math.PI||angle>myStatData.startAngle+2*Math.PI&&angle<myStatData.endAngle+2*Math.PI)&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,pieceOfChartFound[pieceOfChartFound.length]={piece:i,myStatData:myStatData}));else if("RECT"==jsGraphAnnotate[ctx.ChartNewId][i][0])myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]][jsGraphAnnotate[ctx.ChartNewId][i][2]],topY=Math.max(myStatData.yPosBottom,myStatData.yPosTop),bottomY=Math.min(myStatData.yPosBottom,myStatData.yPosTop),topY-bottomY<config.annotateBarMinimumDetectionHeight&&(topY=(topY+bottomY+config.annotateBarMinimumDetectionHeight)/2,bottomY=topY-config.annotateBarMinimumDetectionHeight),leftX=Math.min(myStatData.xPosLeft,myStatData.xPosRight),rightX=Math.max(myStatData.xPosLeft,myStatData.xPosRight),rightX-leftX<config.annotateBarMinimumDetectionHeight&&(rightX=(rightX+leftX+config.annotateBarMinimumDetectionHeight)/2,leftX=rightX-config.annotateBarMinimumDetectionHeight),canvas_pos.x>leftX&&canvas_pos.x<rightX&&canvas_pos.y<topY&&canvas_pos.y>bottomY&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,pieceOfChartFound[pieceOfChartFound.length]={piece:i,myStatData:myStatData});else if("POINT"==jsGraphAnnotate[ctx.ChartNewId][i][0]){if(myStatData=jsGraphAnnotate[ctx.ChartNewId][i][3][jsGraphAnnotate[ctx.ChartNewId][i][1]][jsGraphAnnotate[ctx.ChartNewId][i][2]],config.detectAnnotateOnFullLine)if(canvas_pos.x<Math.min(myStatData.annotateStartPosX,myStatData.annotateEndPosX)-Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)||canvas_pos.x>Math.max(myStatData.annotateStartPosX,myStatData.annotateEndPosX)+Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)||canvas_pos.y<Math.min(myStatData.annotateStartPosY,myStatData.annotateEndPosY)-Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)||canvas_pos.y>Math.max(myStatData.annotateStartPosY,myStatData.annotateEndPosY)+Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius))distance=Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)+1;else if("undefined"==typeof myStatData.D1A)distance=Math.abs(canvas_pos.x-myStatData.posX);else if("undefined"==typeof myStatData.D2A)distance=Math.abs(canvas_pos.y-myStatData.posY);else{var D2B=-myStatData.D2A*canvas_pos.x+canvas_pos.y,g=-(myStatData.D1B-D2B)/(myStatData.D1A-myStatData.D2A),h=myStatData.D2A*g+D2B;distance=Math.sqrt((canvas_pos.x-g)*(canvas_pos.x-g)+(canvas_pos.y-h)*(canvas_pos.y-h))}else distance=Math.sqrt((canvas_pos.x-myStatData.posX)*(canvas_pos.x-myStatData.posX)+(canvas_pos.y-myStatData.posY)*(canvas_pos.y-myStatData.posY));distance<Math.ceil(ctx.chartSpaceScale*config.pointHitDetectionRadius)&&(myStatData.graphPosX=canvas_pos.x,myStatData.graphPosY=canvas_pos.y,pieceOfChartFound[pieceOfChartFound.length]={piece:i,myStatData:myStatData})}if(config.detectMouseOnText)for(i=0;i<jsTextMousePos[ctx.ChartNewId].length;i++)inRect=!0,Math.abs(jsTextMousePos[ctx.ChartNewId][i][3].p1-jsTextMousePos[ctx.ChartNewId][i][3].p2)<config.zeroValue?(canvas_pos.x<Math.min(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p2)&&(inRect=!1),canvas_pos.x>Math.max(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p2)&&(inRect=!1),canvas_pos.y<Math.min(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p3)&&(inRect=!1),canvas_pos.y>Math.max(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p3)&&(inRect=!1)):Math.abs(jsTextMousePos[ctx.ChartNewId][i][2].p1-jsTextMousePos[ctx.ChartNewId][i][2].p2)<config.zeroValue?(canvas_pos.x<Math.min(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p3)&&(inRect=!1),canvas_pos.x>Math.max(jsTextMousePos[ctx.ChartNewId][i][2].p1,jsTextMousePos[ctx.ChartNewId][i][2].p3)&&(inRect=!1),canvas_pos.y<Math.min(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p2)&&(inRect=!1),canvas_pos.y>Math.max(jsTextMousePos[ctx.ChartNewId][i][3].p1,jsTextMousePos[ctx.ChartNewId][i][3].p2)&&(inRect=!1)):(P12=Math.tan(jsTextMousePos[ctx.ChartNewId][i][4]),D12=jsTextMousePos[ctx.ChartNewId][i][3].p1-P12*jsTextMousePos[ctx.ChartNewId][i][2].p1,D34=jsTextMousePos[ctx.ChartNewId][i][3].p3-P12*jsTextMousePos[ctx.ChartNewId][i][2].p3,P13=-1/P12,D13=jsTextMousePos[ctx.ChartNewId][i][3].p1-P13*jsTextMousePos[ctx.ChartNewId][i][2].p1,D24=jsTextMousePos[ctx.ChartNewId][i][3].p4-P13*jsTextMousePos[ctx.ChartNewId][i][2].p4,y1=P12*canvas_pos.x+D12,y2=P12*canvas_pos.x+D34,y3=P13*canvas_pos.x+D13,y4=P13*canvas_pos.x+D24,canvas_pos.y<Math.min(y1,y2)&&(inRect=!1),canvas_pos.y>Math.max(y1,y2)&&(inRect=!1),canvas_pos.y<Math.min(y3,y4)&&(inRect=!1),canvas_pos.y>Math.max(y3,y4)&&(inRect=!1)),inRect&&(textOnChartFound[textOnChartFound.length]=i);config.savePng&&isAction(config.savePngFunction,realAction)&&saveCanvas(ctx,data,config);var whoToReferAnnotate=-1,whoToReferHighLight=-1,referAnnotateIsPoint=!1,referHighLightIsPoint=!1;for(i=pieceOfChartFound.length-1;i>=0;i--)jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[i].piece][4]&&0==referAnnotateIsPoint&&(whoToReferAnnotate==-1&&(whoToReferAnnotate=i),"POINT"==jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[i].piece][0]&&(whoToReferAnnotate=i,referAnnotateIsPoint=!0)),0==referHighLightIsPoint&&(whoToReferHighLight==-1&&(whoToReferHighLight=i),"POINT"==jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[i].piece][0]&&(whoToReferHighLight=i,referHighLightIsPoint=!0));if(config.annotateDisplay&&isAction(config.annotateFunction,realAction)&&(annotateDIV=document.getElementById("divCursor"),annotateDIV.style.display="none",pieceOfChartFound.length>0)){annotateDIV.className=config.annotateClassName?config.annotateClassName:"",annotateDIV.style.border=config.annotateClassName?"":config.annotateBorder,annotateDIV.style.padding=config.annotateClassName?"":config.annotatePadding,annotateDIV.style.borderRadius=config.annotateClassName?"":config.annotateBorderRadius,annotateDIV.style.backgroundColor=config.annotateClassName?"":config.annotateBackgroundColor,annotateDIV.style.color=config.annotateClassName?"":config.annotateFontColor,annotateDIV.style.fontFamily=config.annotateClassName?"":config.annotateFontFamily,annotateDIV.style.fontSize=config.annotateClassName?"":Math.ceil(ctx.chartTextScale*config.annotateFontSize).toString()+"pt",annotateDIV.style.fontStyle=config.annotateClassName?"":config.annotateFontStyle,annotateDIV.style.zIndex=999,ctx.save(),ctx.font=annotateDIV.style.fontStyle+" "+annotateDIV.style.fontSize+" "+annotateDIV.style.fontFamily;var rect=ctx.canvas.getBoundingClientRect();if(showDiv=!1,whoToReferAnnotate!=-1&&jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferAnnotate].piece][4]){if("ARC"==jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferAnnotate].piece][0]?dispString=tmplbis(setOptionValue(!0,!0,1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferAnnotate].piece][3],void 0,config.annotateLabel,"annotateLabel",jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferAnnotate].piece][1],-1,{otherVal:!0}),pieceOfChartFound[whoToReferAnnotate].myStatData,config):dispString=tmplbis(setOptionValue(!0,!0,1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferAnnotate].piece][3],void 0,config.annotateLabel,"annotateLabel",jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferAnnotate].piece][1],jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferAnnotate].piece][2],{otherVal:!0}),pieceOfChartFound[whoToReferAnnotate].myStatData,config),textMsr=ctx.measureTextMultiLine(dispString,1*annotateDIV.style.fontSize.replace("pt","")),ctx.restore(),annotateDIV.innerHTML=dispString,x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),config.annotateRelocate===!0){var relocateX,relocateY;relocateX=0,relocateY=0,x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-fromLeft&&(relocateX=-textMsr.textWidth),y+fromTop+textMsr.textHeight>1*window.innerHeight-1*rect.top+fromTop&&(relocateY-=textMsr.textHeight+2*fromTop),oCursor.moveIt(Math.max(8-rect.left,x+fromLeft+relocateX),Math.max(8-rect.top,y+fromTop+relocateY))}else oCursor.moveIt(x+fromLeft,y+fromTop);annotateDIV.style.display="",showDiv=!0}}0==inMouseAction[ctx.ChartNewId]&&mouseActionData[ctx.ChartNewId].prevShow>=0&&isAction("mousemove",realAction)&&(0==pieceOfChartFound.length||mouseActionData[ctx.ChartNewId].prevShow!=pieceOfChartFound[pieceOfChartFound.length-1].piece)&&(inMouseAction[ctx.ChartNewId]=!0,prevShow=mouseActionData[ctx.ChartNewId].prevShow,mouseActionData[ctx.ChartNewId].prevShow=-1,config.highLight&&isAction(config.highLightMouseFunction,realAction)&&0==pieceOfChartFound.length&&highLightAction("HIDE",ctx,data,config,null,null),"function"==typeof config.annotateFunctionOut&&("ARC"==jsGraphAnnotate[ctx.ChartNewId][prevShow][0]?config.annotateFunctionOut("OUTANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][prevShow][3],jsGraphAnnotate[ctx.ChartNewId][prevShow][1],-1,null):config.annotateFunctionOut("OUTANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][prevShow][3],jsGraphAnnotate[ctx.ChartNewId][prevShow][1],jsGraphAnnotate[ctx.ChartNewId][prevShow][2],null)),inMouseAction[ctx.ChartNewId]=!1),pieceOfChartFound.length>0&&0==inMouseAction[ctx.ChartNewId]&&mouseActionData[ctx.ChartNewId].prevShow!=pieceOfChartFound[whoToReferHighLight].piece&&isAction("mousemove",realAction)&&(inMouseAction[ctx.ChartNewId]=!0,prevShow=mouseActionData[ctx.ChartNewId].prevShow,config.highLight&&isAction(config.highLightMouseFunction,realAction)&&whoToReferHighLight!=-1&&("ARC"==jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferHighLight].piece][0]?highLightAction("ARC",ctx,data,config,jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferHighLight].piece][1],-1):highLightAction(jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferHighLight].piece][0],ctx,data,config,jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferHighLight].piece][1],jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferHighLight].piece][2])),"function"==typeof config.annotateFunctionIn&&("ARC"==jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[pieceOfChartFound.length-1].piece][0]?config.annotateFunctionIn("INANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[pieceOfChartFound.length-1].piece][3],jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[pieceOfChartFound.length-1].piece][1],-1,null):config.annotateFunctionIn("INANNOTATE",ctx,data,jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[pieceOfChartFound.length-1].piece][3],jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[pieceOfChartFound.length-1].piece][1],jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[pieceOfChartFound.length-1].piece][2],null)),inMouseAction[ctx.ChartNewId]=!1,mouseActionData[ctx.ChartNewId].prevShow=pieceOfChartFound[whoToReferHighLight].piece),config.highLight&&isAction(config.highLightMouseFunction,realAction)&&0==isAction("mousemove",realAction)&&(0==pieceOfChartFound.length?highLightAction("HIDE",ctx,data,config,null,null):whoToReferHighLight!=-1&&("ARC"==jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferHighLight].piece][0]?highLightAction("ARC",ctx,data,config,jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferHighLight].piece][1],-1):highLightAction(jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferHighLight].piece][0],ctx,data,config,jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferHighLight].piece][1],jsGraphAnnotate[ctx.ChartNewId][pieceOfChartFound[whoToReferHighLight].piece][2]))),"function"==typeof config.mouseMove&&isAction("mousemove",realAction)&&runFunction(config.mouseMove),"function"==typeof config.mouseDownLeft&&isAction("mousedown left",realAction)&&runFunction(config.mouseDownLeft),"function"==typeof config.mouseDownRight&&isAction("mousedown right",realAction)&&runFunction(config.mouseDownRight),"function"==typeof config.mouseDownMiddle&&isAction("mousedown middle",realAction)&&runFunction(config.mouseDownMiddle),"function"==typeof config.mouseWheel&&isAction("mousewheel",realAction)&&runFunction(config.mouseWheel),"function"==typeof config.mouseOut&&isAction("mouseout",realAction)&&runFunction(config.mouseOut),"function"==typeof config.mouseDblClick&&isAction("dblclick",realAction)&&runFunction(config.mouseDblClick)}}function animationCorrection(a,b,c,d,e,f){var g=a,h=0;if(e<0)if(d<1*c.animationStartWithData-1)g=1;else switch(c.animationByDataset){case"ByArc":g=a;break;case!0:g=a;break;case!1:default:g=a}else{var i=Math.max(1,c.animationStartWithDataset),j=Math.max(1,c.animationStartWithData);if(d<1*c.animationStartWithDataset-1)g=1;else if(e<1*c.animationStartWithData-1)g=1;else{var k=0;if(c.animationLeftToRight)for(var l=0;l<b.datasets.length;l++)k=Math.max(k,b.datasets[l].data.length);switch(c.animationByDataset){case!0:switch(c.animationLeftToRight){case!0:var m=(d-(i-1))*(k-(j-1))+(e-(j-1));k=(k-(j-1))*(b.datasets.length-(i-1)),a<m/k?(g=0,f&&e+1==j&&(g=1)):a<(m+1)/k?(g=(a-m/k)*k,f&&(h=g,g=1)):g=1;break;case!1:default:g=a<(d-(i-1))/(b.datasets.length-(i-1))?.001:a<(d-(i-1)+1)/(b.datasets.length-(i-1))?(b.datasets.length-(i-1))*(a-(d-(i-1))/(b.datasets.length-(i-1))):1}break;case!1:default:switch(c.animationLeftToRight){case!0:var m=e-(j-1);k-=j-1,a<m/k?g=0:a<(m+1)/k?(g=(a-m/k)*k,f&&(h=g,g=1)):g=1;break;case!1:default:g=a}}}}return{mainVal:g,subVal:h,animVal:g+h}}function showLabels(a,b,c,d){var e=setOptionValue(!0,!0,1,"SHOWLABEL",a,b,void 0,void 0,c.showXLabels,"showXLabels",d,-1,void 0,{labelValue:fmtChartJS(c,b.labels[d],c.fmtXLabel),unformatedLabelValue:b.labels[d]});return"number"==typeof e&&(e=d>=c.firstLabelToShow-1&&(d+c.firstLabelToShow-1)%parseInt(e)==0),e}function showYLabels(a,b,c,d,e){var f=setOptionValue(!0,!0,1,"SHOWYLABEL",a,b,void 0,void 0,c.showYLabels,"showYLabels",-1,d,void 0,{labelValue:e});return"number"==typeof f&&(f=d>=c.firstYLabelToShow-1&&(d+c.firstYLabelToShow-1)%parseInt(f)==0),f}function drawLegend(a,b,c,d,e,f){if(0==c.legendPosY||4==c.legendPosY||0==c.legendPosX||4==c.legendPosX){if(f!=-1)return}else{if(f==-1)return;if(1==c.animation)if("number"==typeof c.legendWhenToDraw){if(f!=c.legendWhenToDraw)return}else{if(1!=f&&"first"==c.legendWhenToDraw)return;if(f!=c.animationSteps&&"last"==c.legendWhenToDraw)return}}d.save(),"rgba(0,0,0,0)"!=c.legendFillColor&&(d.setLineDash([]),d.lineWidth=0,d.fillStyle=c.legendFillColor,d.drawRectangle({x:a.xLegendPos+a.legendBackgroundColorXPos,y:a.yLegendPos+a.legendBackgroundColorYPos,width:a.legendBackgroundColorWidth,height:a.legendBackgroundColorHeight,borders:c.legendBorders,bordersWidth:Math.ceil(d.chartLineScale*c.legendBordersWidth),borderSelection:c.legendBordersSelection,borderRadius:c.legendBordersRadius,fill:!0,stroke:!1})),c.legendBorders&&(d.fillStyle=c.legendFillColor,d.setLineDash(lineStyleFn(c.legendBordersStyle)),d.lineWidth=Math.ceil(d.chartLineScale*c.legendBordersWidth),d.strokeStyle=c.legendBordersColors,d.drawRectangle({x:a.xLegendPos+a.legendBorderXPos,y:a.yLegendPos+a.legendBorderYPos,width:a.legendBorderWidth,height:a.legendBorderHeight,
borders:!0,bordersWidth:Math.ceil(d.chartLineScale*c.legendBordersWidth),borderSelection:c.legendBordersSelection,borderRadius:c.legendBordersRadius,fill:!1,stroke:!0})),d.setLineDash([]),d.restore();var g,h,i,j,k,l,m,n,o=a.legendBox;n=a.nbLegendCols-1;var p=a.yLegendPos+a.legendFirstTextYPos+a.highestLegend,q=a.xLegendPos+a.legendFirstTextXPos;for(h=p-(Math.ceil(d.chartTextScale*c.legendFontSize)+Math.ceil(d.chartSpaceScale*c.legendSpaceBetweenTextVertical)),g=0,i=b.datasets.length,k=i-1;k>=0;k--)if(j=k,a.reverseLegend&&(j=b.datasets.length-k-1),l=typeof b.datasets[j].title,"string"==l&&(m=fmtChartJS(c,b.datasets[j].title,c.fmtLegend).trim(),""!=m)){if(n++,n==a.nbLegendCols?(n=0,g=q,h+=Math.ceil(d.chartTextScale*c.legendFontSize)+Math.ceil(d.chartSpaceScale*c.legendSpaceBetweenTextVertical)):g+=a.widestLegend+Math.ceil(d.chartSpaceScale*c.legendSpaceBetweenTextHorizontal),d.save(),d.beginPath(),"Bar"!=d.tpchart&&"StackedBar"!=d.tpchart||"Line"!=b.datasets[j].type||c.datasetFill&&1!=setOptionValue(!0,!1,1,"LINKTYPE",d,b,void 0,b.datasets[j].linkType,c.linkType,"linkType",j,-1,{nullvalue:null})||(o=!1),o)d.lineWidth=Math.ceil(d.chartLineScale*setOptionValue(!0,!1,1,"LINEWIDTH",d,b,void 0,b.datasets[j].datasetStrokeWidth,c.datasetStrokeWidth,"datasetStrokeWidth",j,-1,{nullvalue:null})),d.beginPath(),d.strokeStyle=setOptionValue(!0,!1,1,"LEGENDSTROKECOLOR",d,b,void 0,b.datasets[j].strokeColor,c.defaultFillColor,"strokeColor",j,-1,{animationValue:1,xPosLeft:g,yPosBottom:h,xPosRight:g+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:h-Math.ceil(d.chartTextScale*c.legendFontSize)}),d.setLineDash(lineStyleFn(setOptionValue(!0,!1,1,"LEGENDLINEDASH",d,b,void 0,b.datasets[j].datasetStrokeStyle,c.datasetStrokeStyle,"datasetStrokeStyle",j,-1,{animationValue:1,xPosLeft:g,yPosBottom:h,xPosRight:g+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:h-Math.ceil(d.chartTextScale*c.legendFontSize)}))),d.moveTo(g,h),d.lineTo(g+Math.ceil(d.chartTextScale*c.legendBlockSize),h),d.lineTo(g+Math.ceil(d.chartTextScale*c.legendBlockSize),h-Math.ceil(d.chartTextScale*c.legendFontSize)),d.lineTo(g,h-Math.ceil(d.chartTextScale*c.legendFontSize)),d.lineTo(g,h),d.stroke(),d.closePath(),d.fillStyle=setOptionValue(!0,!1,1,"LEGENDFILLCOLOR",d,b,void 0,b.datasets[j].fillColor,c.defaultFillColor,"fillColor",j,-1,{animationValue:1,xPosLeft:g,yPosBottom:h,xPosRight:g+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:h-Math.ceil(d.chartTextScale*c.legendFontSize)}),d.fill();else{if(d.lineWidth=c.legendColorIndicatorStrokeWidth?c.legendColorIndicatorStrokeWidth:Math.ceil(d.chartLineScale*setOptionValue(!0,!1,1,"LINEWIDTH",d,b,void 0,b.datasets[j].datasetStrokeWidth,c.datasetStrokeWidth,"datasetStrokeWidth",j,-1,{nullvalue:null})),c.legendColorIndicatorStrokeWidth&&c.legendColorIndicatorStrokeWidth>Math.ceil(d.chartTextScale*c.legendFontSize)&&(d.lineWidth=Math.ceil(d.chartTextScale*c.legendFontSize)),d.strokeStyle=setOptionValue(!0,!1,1,"LEGENDSTROKECOLOR",d,b,void 0,b.datasets[j].strokeColor,c.defaultFillColor,"strokeColor",j,-1,{animationValue:1,xPosLeft:g,yPosBottom:h,xPosRight:g+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:h-Math.ceil(d.chartTextScale*c.legendFontSize)}),d.setLineDash(lineStyleFn(setOptionValue(!0,!1,1,"LEGENDLINEDASH",d,b,void 0,b.datasets[j].datasetStrokeStyle,c.datasetStrokeStyle,"datasetStrokeStyle",j,-1,{animationValue:1,xPosLeft:g,yPosBottom:h,xPosRight:g+Math.ceil(d.chartTextScale*c.legendBlockSize),yPosTop:h-Math.ceil(d.chartTextScale*c.legendFontSize)}))),d.moveTo(g+2,h-Math.ceil(d.chartTextScale*c.legendFontSize)/2),d.lineTo(g+2+Math.ceil(d.chartTextScale*c.legendBlockSize),h-Math.ceil(d.chartTextScale*c.legendFontSize)/2),d.stroke(),d.fill(),c.pointDot){d.beginPath(),d.fillStyle=setOptionValue(!0,!1,1,"LEGENDMARKERFILLCOLOR",d,b,void 0,b.datasets[j].pointColor,c.defaultStrokeColor,"pointColor",j,-1,{nullvalue:!0}),d.strokeStyle=setOptionValue(!0,!1,1,"LEGENDMARKERSTROKESTYLE",d,b,void 0,b.datasets[j].pointStrokeColor,c.defaultStrokeColor,"pointStrokeColor",j,-1,{nullvalue:!0}),d.lineWidth=setOptionValue(!0,!1,d.chartLineScale,"LEGENDMARKERLINEWIDTH",d,b,void 0,b.datasets[j].pointDotStrokeWidth,c.pointDotStrokeWidth,"pointDotStrokeWidth",j,-1,{nullvalue:!0});var r=setOptionValue(!0,!1,1,"LEGENDMARKERSHAPE",d,b,void 0,b.datasets[j].markerShape,c.markerShape,"markerShape",j,-1,{nullvalue:!0}),s=setOptionValue(!0,!1,d.chartSpaceScale,"LEGENDMARKERRADIUS",d,b,void 0,b.datasets[j].pointDotRadius,c.pointDotRadius,"pointDotRadius",j,-1,{nullvalue:!0}),t=setOptionValue(!0,!1,1,"LEGENDMARKERSTROKESTYLE",d,b,void 0,b.datasets[j].pointDotStrokeStyle,c.pointDotStrokeStyle,"pointDotStrokeStyle",j,-1,{nullvalue:!0});drawMarker(d,g+2+Math.ceil(d.chartTextScale*c.legendBlockSize)/2,h-Math.ceil(d.chartTextScale*c.legendFontSize)/2,r,s,t)}d.fill()}d.restore(),d.save(),d.beginPath(),d.font=c.legendFontStyle+" "+Math.ceil(d.chartTextScale*c.legendFontSize).toString()+"px "+c.legendFontFamily,d.fillStyle=setOptionValue(!0,!1,1,"LEGENDFONTCOLOR",d,b,void 0,void 0,c.legendFontColor,"legendFontColor",j,-1,{nullvalue:!0}),d.textAlign="left",d.textBaseline="bottom",d.translate(g+Math.ceil(d.chartTextScale*c.legendBlockSize)+Math.ceil(d.chartSpaceScale*c.legendSpaceBetweenBoxAndText),h),d.fillTextMultiLine(m,0,0,d.textBaseline,Math.ceil(d.chartTextScale*c.legendFontSize),!0,c.detectMouseOnText,d,"LEGEND_TEXTMOUSE",0,g+Math.ceil(d.chartTextScale*c.legendBlockSize)+Math.ceil(d.chartSpaceScale*c.legendSpaceBetweenBoxAndText),h,j,-1),d.restore()}}function measureLegend(a,b,c,d,e,f,g,h){var i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0;return l=f*(e+Math.ceil(b.chartSpaceScale*c.legendSpaceBetweenTextVertical))-Math.ceil(b.chartSpaceScale*c.legendSpaceBetweenTextVertical)+Math.ceil(b.chartSpaceScale*c.legendSpaceBeforeText)+Math.ceil(b.chartSpaceScale*c.legendSpaceAfterText),k=g*(d+Math.ceil(b.chartSpaceScale*c.legendSpaceBetweenTextHorizontal))-Math.ceil(b.chartSpaceScale*c.legendSpaceBetweenTextHorizontal)+Math.ceil(b.chartSpaceScale*c.legendSpaceLeftText)+Math.ceil(b.chartSpaceScale*c.legendSpaceRightText),j=l,i=k,o=Math.ceil(b.chartSpaceScale*c.legendSpaceLeftText),p=Math.ceil(b.chartSpaceScale*c.legendSpaceBeforeText),1==c.legendBorders?(m=i,n=j,isBorder(c.legendBordersSelection,"LEFT")?(m+=Math.ceil(b.chartLineScale*c.legendBordersWidth)/2,i+=Math.ceil(b.chartLineScale*c.legendBordersWidth)+Math.ceil(b.chartSpaceScale*c.legendBordersSpaceLeft),o+=Math.ceil(b.chartLineScale*c.legendBordersWidth)+Math.ceil(b.chartSpaceScale*c.legendBordersSpaceLeft),s+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceLeft)+Math.ceil(b.chartLineScale*c.legendBordersWidth)/2,q+=Math.ceil(b.chartLineScale*c.legendBordersWidth)+Math.ceil(b.chartSpaceScale*c.legendBordersSpaceLeft)):"rgba(0,0,0,0)"!=c.legendFillColor&&(i+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceLeft),o+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceLeft),q+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceLeft),s+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceLeft)),isBorder(c.legendBordersSelection,"RIGHT")?(m+=Math.ceil(b.chartLineScale*c.legendBordersWidth)/2,i+=Math.ceil(b.chartLineScale*c.legendBordersWidth)+Math.ceil(b.chartSpaceScale*c.legendBordersSpaceRight)):"rgba(0,0,0,0)"!=c.legendFillColor&&(i+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceRight)),isBorder(c.legendBordersSelection,"TOP")?(n+=Math.ceil(b.chartLineScale*c.legendBordersWidth)/2,j+=Math.ceil(b.chartLineScale*c.legendBordersWidth)+Math.ceil(b.chartSpaceScale*c.legendBordersSpaceBefore),p+=Math.ceil(b.chartLineScale*c.legendBordersWidth)+Math.ceil(b.chartSpaceScale*c.legendBordersSpaceBefore),r+=Math.ceil(b.chartLineScale*c.legendBordersWidth)+Math.ceil(b.chartSpaceScale*c.legendBordersSpaceBefore),t+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceBefore)+Math.ceil(b.chartLineScale*c.legendBordersWidth)/2):"rgba(0,0,0,0)"!=c.legendFillColor&&(j+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceBefore),p+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceBefore),r+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceBefore),t+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceBefore)),isBorder(c.legendBordersSelection,"BOTTOM")?(n+=Math.ceil(b.chartLineScale*c.legendBordersWidth)/2,j+=Math.ceil(b.chartLineScale*c.legendBordersWidth)+Math.ceil(b.chartSpaceScale*c.legendBordersSpaceAfter)):"rgba(0,0,0,0)"!=c.legendFillColor&&(j+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceAfter))):"rgba(0,0,0,0)"!=c.legendFillColor&&(i+=Math.ceil(b.chartSpaceScale*(c.legendBordersSpaceRight+c.legendBordersSpaceLeft)),j+=Math.ceil(b.chartSpaceScale*(c.legendBordersSpaceBefore+c.legendBordersSpaceAfter)),q+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceLeft),r+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceBefore),o+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceLeft),p+=Math.ceil(b.chartSpaceScale*c.legendBordersSpaceBefore)),{legendWidth:i,legendHeight:j,legendBackgroundColorWidth:k,legendBackgroundColorHeight:l,legendBorderWidth:m,legendBorderHeight:n,legendFirstTextXPos:o,legendFirstTextYPos:p,legendBackgroundColorXPos:q,legendBackgroundColorYPos:r,legendBorderXPos:s,legendBorderYPos:t,elementMsr:null}}function drawMarker(a,b,c,d,e,f){switch(a.setLineDash(lineStyleFn(f)),d){case"square":a.rect(b-e,c-e,2*e,2*e),a.stroke(),a.fill(),a.setLineDash([]);break;case"triangle":pointA_x=0,pointA_y=2/3*e,a.moveTo(b,c-pointA_y),a.lineTo(b+pointA_y*Math.sin(4/3),c+pointA_y*Math.cos(4/3)),a.lineTo(b-pointA_y*Math.sin(4/3),c+pointA_y*Math.cos(4/3)),a.lineTo(b,c-pointA_y),a.stroke(),a.fill(),a.setLineDash([]);break;case"diamond":a.moveTo(b,c+e),a.lineTo(b+e,c),a.lineTo(b,c-e),a.lineTo(b-e,c),a.lineTo(b,c+e),a.stroke(),a.fill(),a.setLineDash([]);break;case"plus":a.moveTo(b,c-e),a.lineTo(b,c+e),a.moveTo(b-e,c),a.lineTo(b+e,c),a.stroke(),a.setLineDash([]);break;case"cross":a.moveTo(b-e,c-e),a.lineTo(b+e,c+e),a.moveTo(b-e,c+e),a.lineTo(b+e,c-e),a.stroke(),a.setLineDash([]);break;case"circle":default:a.arc(b,c,e,0,2*Math.PI*1,!0),a.stroke(),a.fill(),a.setLineDash([])}}function initPassVariableData_part1(a,b,c){var d,e,f,g,h,i,j,l,m,n,o,q,r,s,t,u,v,x,A,B,C,D,E,F;switch(f=[],g=[],g[0]=[],g[1]=[],h=[],h[0]=[],h[1]=[],i=[],i[0]=[],i[1]=[],j=[],j[0]=[],j[1]=[],l=[],l[0]=[],l[1]=[],m=[],m[0]=[],m[1]=[],q=[],r=[],s=[],t=[],u=[],q[0]=[],q[1]=[],v=0,A=[],B=[],C=[],D=[],E=[],c.tpchart){case"PolarArea":var G,H;for(G=[],H=[],d=0;d<a.datasets.length;d++)for(e=0;e<a.labels.length;e++)0==d&&(G[e]=0),"undefined"!=typeof a.datasets[d].data[e]&&G[e]++;var I=0,J=0;for(e=0;e<a.labels.length;e++)H[e]=J,I=Math.max(G[e],I),G[e]>0&&J++,D[e]=0,E[e]=1;var K=1;break;case"Doughnut":case"Pie":var M,N,K=0,L=0;for(e=0;e<a.labels.length;e++)M=setOptionValue(!0,!0,1,"RADIUSSPACEWEIGHT",c,a,null,a.radiusSpaceWeight,b.radiusSpaceWeight,"radiusSpaceWeight",e,-1,{nullvalue:null}),N=setOptionValue(!0,!0,1,"RADIUSDATAWEIGHT",c,a,null,a.radiusDataWeight,b.radiusDataWeight,"radiusDataWeight",e,-1,{nullvalue:null}),0!=e&&(L+=M,K+=M),D[e]=L,K+=N,E[e]=K,L+=N}for(d=0;d<a.datasets.length;d++){if("undefined"!=typeof a.datasets[d].xPos&&"Line"==tpdraw(c,a.datasets[d]))for(e=a.datasets[d].data.length;e<a.datasets[d].xPos.length;e++)a.datasets[d].data.push(void 0);else for(e=a.datasets[d].data.length;e<a.labels.length;e++)a.datasets[d].data.push(void 0);for(F=2==a.datasets[d].axis?0:1,f[d]=[],l[0][d]=-Number.MAX_VALUE,l[1][d]=-Number.MAX_VALUE,m[0][d]=Number.MAX_VALUE,m[1][d]=Number.MAX_VALUE,r[d]=-1,s[d]=-1,e=0;e<a.datasets[d].data.length;e++){"undefined"==typeof t[e]&&(t[e]=-1,u[e]=-1,j[0][e]=0,g[0][e]=-Number.MAX_VALUE,h[0][e]=Number.MAX_VALUE,j[1][e]=0,g[1][e]=-Number.MAX_VALUE,h[1][e]=Number.MAX_VALUE);var O=!0;"Doughnut"==c.tpchart?(0==setOptionValue(!1,!0,1,"DISPLAYDATA",c,a,null,a.datasets[d].displayData,b.displayData,"displayData",d,e,{nullvalue:null})&&(O=!1),0==setOptionValue(!1,!0,1,"DISPLAYDATA",c,a,null,a.displayData,b.displayData,"displayData",-1,e,{nullvalue:null})&&(O=!1)):(0==setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,null,a.datasets[d].displayData,b.displayData,"displayData",d,e,{nullvalue:null})&&(O=!1),0==setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,null,a.displayData,b.displayData,"displayData",e,-1,{nullvalue:null})&&(O=!1)),"undefined"==typeof a.datasets[d].data[e]&&(O=!1),1==O&&(v+=1*a.datasets[d].data[e],r[d]==-1&&(r[d]=e),s[d]=e,t[e]==-1&&(t[e]=d),u[e]=d,j[F][e]+=1*a.datasets[d].data[e],g[F][e]=Math.max(g[F][e],1*a.datasets[d].data[e]),h[F][e]=Math.min(h[F][e],1*a.datasets[d].data[e]),l[F][d]=Math.max(l[F][d],1*a.datasets[d].data[e]),m[F][d]=Math.min(m[F][d],1*a.datasets[d].data[e]))}}for(d=0;d<a.datasets.length;d++){F=2==a.datasets[d].axis?0:1,n="string"==typeof a.datasets[d].title?a.datasets[d].title.trim():"";var P=-1,Q=-1;for(e=0;e<a.datasets[d].data.length;e++){"undefined"==typeof i[0][e]&&(i[0][e]=0,q[0][e]=-1,i[1][e]=0,q[1][e]=-1),o="","undefined"!=typeof a.datasets[d].xPos&&"undefined"!=typeof a.datasets[d].xPos[e]&&(o=a.datasets[d].xPos[e]),""==o&&"undefined"!=typeof a.labels[e]&&(o=a.labels[e]),"string"==typeof o&&(o=o.trim());var O=!0;if("Line"==tpdraw(c,a.datasets[d])&&(0==setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,null,a.datasets[d].displayData,b.displayData,"displayData",d,e,{nullvalue:null})&&(O=!1),0==setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,null,a.displayData,b.displayData,"displayData",e,-1,{nullvalue:null})&&(O=!1)),"undefined"==typeof a.datasets[d].data[e]&&(O=!1),O){switch(i[F][e]+=1*a.datasets[d].data[e],tpdraw(c,a.datasets[d])){case"PolarArea":case"Doughnut":case"Pie":if(0==d){if(0==e){var R=((b.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);R<=b.zeroValue&&(R=2*Math.PI)}B[e]=((-b.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),C[e]=((b.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),"PolarArea"==c.tpchart&&(B[e]+=H[e]*(R/J),C[e]-=H[e]*(R/J)),A[e]=B[e]}x="PolarArea"==c.tpchart?G[e]>0?R/J/G[e]:0:1*a.datasets[d].data[e]/j[F][e]*R,x>=2*Math.PI&&(x=2*Math.PI-.001),f[d][e]={config:b,v1:fmtChartJS(b,n,b.fmtV1),v2:fmtChartJS(b,o,b.fmtV2),v3:fmtChartJS(b,1*a.datasets[d].data[e],b.fmtV3),v4:fmtChartJS(b,i[F][e],b.fmtV4),v5:fmtChartJS(b,j[F][e],b.fmtV5),v6:roundToWithThousands(b,fmtChartJS(b,100*a.datasets[d].data[e]/j[F][e],b.fmtV6),b.roundPct),v6T:roundToWithThousands(b,fmtChartJS(b,100*a.datasets[d].data[e]/v,b.fmtV6T),b.roundPct),v7:0,v8:0,v9:0,v10:0,v11:fmtChartJS(b,d,b.fmtV11),v12:fmtChartJS(b,e,b.fmtV12),v13:fmtChartJS(b,x,b.fmtV13),v14:fmtChartJS(b,B[e],b.fmtV14),v15:fmtChartJS(b,B[e]+x,b.fmtV15),lgtxt:n,lgtxt2:o,datavalue:1*a.datasets[d].data[e],cumvalue:i[F][e],totvalue:j[F][e],pctvalue:100*a.datasets[d].data[e]/j[F][e],pctvalueT:100*a.datasets[d].data[e]/v,maxvalue:g[F][e],minvalue:h[F][e],lmaxvalue:l[F][d],lminvalue:m[F][d],grandtotal:v,firstNotMissing:t[e],lastNotMissing:u[e],prevNotMissing:P,prevMissing:Q,nextNotMissing:-1,segmentAngle:x,firstAngle:A[e],startAngle:B[e],realStartAngle:C[e],endAngle:B[e]+x,radiusOffset:0,midPosX:0,midPosY:0,int_radius:0,ext_radius:0,startRadius:D[e]/K,stopRadius:E[e]/K,totRadiusWeight:K,j:e,i:d,data:a},B[e]=B[e]+x,C[e]=C[e]-x;break;case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":f[d][e]={config:b,v1:fmtChartJS(b,n,b.fmtV1),v2:fmtChartJS(b,o,b.fmtV2),v3:fmtChartJS(b,1*a.datasets[d].data[e],b.fmtV3),v4:fmtChartJS(b,i[F][e],b.fmtV4),v5:fmtChartJS(b,j[F][e],b.fmtV5),v6:roundToWithThousands(b,fmtChartJS(b,100*a.datasets[d].data[e]/j[F][e],b.fmtV6),b.roundPct),v6T:roundToWithThousands(b,fmtChartJS(b,100*a.datasets[d].data[e]/v,b.fmtV6T),b.roundPct),v11:fmtChartJS(b,d,b.fmtV11),v12:fmtChartJS(b,e,b.fmtV12),lgtxt:n,lgtxt2:o,datavalue:1*a.datasets[d].data[e],cumvalue:i[F][e],totvalue:j[F][e],pctvalue:100*a.datasets[d].data[e]/j[F][e],pctvalueT:100*a.datasets[d].data[e]/v,maxvalue:g[F][e],minvalue:h[F][e],lmaxvalue:l[F][d],lminvalue:m[F][d],grandtotal:v,firstNotMissing:t[e],lastNotMissing:u[e],prevNotMissing:P,prevMissing:Q,nextNotMissing:-1,j:e,i:d,data:a},1*a.datasets[d].data[e]!=0||"HorizontalStackedBar"!=tpdraw(c,a.datasets[d])&&"StackedBar"!=tpdraw(c,a.datasets[d])||(f[d][e].v3="");break;case"Line":case"Radar":f[d][e]={config:b,v1:fmtChartJS(b,n,b.fmtV1),v2:fmtChartJS(b,o,b.fmtV2),v3:fmtChartJS(b,1*a.datasets[d].data[e],b.fmtV3),v5:fmtChartJS(b,1*a.datasets[d].data[e],b.fmtV5),v6:fmtChartJS(b,g[F][e],b.fmtV6),v7:fmtChartJS(b,j[F][e],b.fmtV7),v8:roundToWithThousands(b,fmtChartJS(b,100*a.datasets[d].data[e]/j[F][e],b.fmtV8),b.roundPct),v8T:roundToWithThousands(b,fmtChartJS(b,100*a.datasets[d].data[e]/v,b.fmtV8T),b.roundPct),v11:fmtChartJS(b,d,b.fmtV11),v12:fmtChartJS(b,e,b.fmtV12),lgtxt:n,lgtxt2:o,datavalue:1*a.datasets[d].data[e],diffnext:1*a.datasets[d].data[e],pctvalue:100*a.datasets[d].data[e]/j[F][e],pctvalueT:100*a.datasets[d].data[e]/v,totvalue:j[F][e],cumvalue:i[F][e],maxvalue:g[F][e],minvalue:h[F][e],lmaxvalue:l[F][d],lminvalue:m[F][d],grandtotal:v,firstNotMissing:r[d],lastNotMissing:s[d],prevNotMissing:P,prevMissing:Q,nextNotMissing:-1,j:e,i:d,data:a},q[F][e]>=0?(f[d][e].v4=fmtChartJS(b,q[F][e]!=-1?1*a.datasets[d].data[e]-f[q[F][e]][e].datavalue:1*a.datasets[d].data[e],b.fmtV4),f[d][e].diffprev=q[F][e]!=-1?1*a.datasets[d].data[e]-f[q[F][e]][e].datavalue:1*a.datasets[d].data[e],f[q[F][e]][e].diffnext=a.datasets[q[F][e]].data[e]-a.datasets[d].data[e],f[q[F][e]][e].v5=f[q[F][e]][e].diffnext):f[d][e].v4=1*a.datasets[d].data[e],q[F][e]=d}if(P!=-1)for(k=P;k<e;k++)f[d][k].nextNotMissing=e;P=e}else switch(Q=e,tpdraw(c,a.datasets[d])){case"PolarArea":case"Doughnut":case"Pie":if(0==d){if(0==e){var R=((b.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);R<=b.zeroValue&&(R=2*Math.PI)}B[e]=((-b.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),C[e]=((b.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),"PolarArea"==c.tpchart&&(B[e]+=H[e]*(R/J),C[e]-=H[e]*(R/J)),A[e]=B[e]}case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":f[d][e]={v1:n,lmaxvalue:l[F][d],lminvalue:m[F][d],firstNotMissing:t[e],lastNotMissing:u[e],prevNotMissing:P,prevMissing:Q,grandtotal:v};break;case"Line":case"Radar":f[d][e]={v1:n,lmaxvalue:l[F][d],lminvalue:m[F][d],firstNotMissing:r[d],lastNotMissing:s[d],prevNotMissing:P,prevMissing:Q,grandtotal:v}}}}return f}function initPassVariableData_part2(a,b,c,d,e){function l(a,b,d,e,f,g){if("object"==typeof d.datasets[a].xPos&&"undefined"!=typeof d.datasets[a].xPos[Math.floor(b+c.zeroValue)]){var h=f*g,i="undefined"!=typeof d.xBegin?d.xBegin:1*d.labels[0],j="undefined"!=typeof d.xEnd?d.xEnd:1*d.labels[d.labels.length-1];if(j<=i&&(j=i+100),1*d.datasets[a].xPos[Math.floor(b+c.zeroValue)]>=i&&d.datasets[a].xPos[Math.floor(b+c.zeroValue)]<=j){var k=e+h*((1*d.datasets[a].xPos[Math.floor(b+c.zeroValue)]-i)/(j-i)),m=k;return Math.abs(b-Math.floor(b+c.zeroValue))>c.zeroValue&&(m=l(a,Math.ceil(b-c.zeroValue),d)),k+(b-Math.floor(b+c.zeroValue))*(m-k)}}return e+f*b}function n(a,b,c,d){if(a)return p(q(b)*d-q(c.graphMin)*d,void 0,0);var e=c.steps*c.stepValue,f=b-c.graphMin,g=p(f/e,1,0);return d*c.steps*g}function o(a,b,c){var d=b.steps*b.stepValue,e=a-b.graphMin,f=p(e/d,1,0);return c*b.steps*f}function p(a,b,c){return isNumber(b)&&a>b?b:isNumber(c)&&a<c?c:a}function q(a){return Math.log(a)/Math.LN10}var g,h,f=0,i=new Array(b.datasets.length),j=new Array(b.datasets.length);for(g=0;g<b.datasets.length;g++)switch(tpdraw(d,b.datasets[g])){case"PolarArea":case"Pie":case"Doughnut":for(h=0;h<b.datasets[g].data.length;h++)a[g][h].v7=fmtChartJS(c,e.midPosX,c.fmtV7),a[g][h].v8=fmtChartJS(c,e.midPosY,c.fmtV8),a[g][h].v9=fmtChartJS(c,e.int_radius+(e.ext_radius-e.int_radius)*a[g][h].startRadius,c.fmtV9),a[g][h].v10=fmtChartJS(c,e.int_radius+(e.ext_radius-e.int_radius)*a[g][h].stopRadius,c.fmtV10),"PolarArea"==d.tpchart?(a[g][h].radiusOffset=n(c.logarithmic,1*b.datasets[g].data[h],e.calculatedScale,e.scaleHop),a[g][h].v10=fmtChartJS(c,a[g].radiusOffset,c.fmtV10)):(a[g][h].v10=fmtChartJS(c,e.ext_radius,c.fmtV10),a[g][h].radiusOffset=e.int_radius+(e.ext_radius-e.int_radius)*a[g][h].stopRadius),a[g][h].outerVal=e.outerVal,a[g][h].midPosX=e.midPosX,a[g][h].midPosY=e.midPosY,a[g][h].calculatedScale=e.calculatedScale,a[g][h].scaleHop=e.scaleHop,a[g][h].int_radius=e.int_radius+(e.ext_radius-e.int_radius)*a[g][h].startRadius,a[g][h].ext_radius=e.int_radius+(e.ext_radius-e.int_radius)*a[g][h].stopRadius;break;case"Line":for(h=0;h<b.datasets[g].data.length;h++)a[g][h].xAxisPosY=e.xAxisPosY,a[g][h].yAxisPosX=e.yAxisPosX,a[g][h].valueHop=e.valueHop,a[g][h].nbValueHop=e.nbValueHop,2==b.datasets[g].axis?(a[g][h].scaleHop=e.scaleHop2,a[g][h].zeroY=e.zeroY2,a[g][h].calculatedScale=e.calculatedScale2,a[g][h].logarithmic=e.logarithmic2):(a[g][h].scaleHop=e.scaleHop,a[g][h].zeroY=e.zeroY,a[g][h].calculatedScale=e.calculatedScale,a[g][h].logarithmic=e.logarithmic),a[g][h].xPos=l(g,h,b,e.yAxisPosX,e.valueHop,e.nbValueHop),a[g][h].yAxisPos=e.xAxisPosY-a[g][h].zeroY,"Bar"!=d.tpchart&&"StackedBar"!=d.tpchart||(a[g][h].xPos+=e.valueHop/2,a[g][h].yAxisPosX+=e.valueHop/2),0==h?(a[g][h].lmaxvalue_offset=n(a[g][h].logarithmic,a[g][h].lmaxvalue,a[g][h].calculatedScale,a[g][h].scaleHop)-a[g][h].zeroY,a[g][h].lminvalue_offset=n(a[g][h].logarithmic,a[g][h].lminvalue,a[g][h].calculatedScale,a[g][h].scaleHop)-a[g][h].zeroY):(a[g][h].lmaxvalue_offset=a[g][0].lmaxvalue_offset,a[g][h].lminvalue_offset=a[g][0].lminvalue_offset),"undefined"!=typeof b.datasets[g].data[h]&&(a[g][h].yPosOffset=n(a[g][h].logarithmic,b.datasets[g].data[h],a[g][h].calculatedScale,a[g][h].scaleHop)-a[g][h].zeroY,a[g][h].posY=a[g][h].yAxisPos-a[g][h].yPosOffset),"object"==typeof b.datasets[g].origin&&"undefined"!=typeof b.datasets[g].origin[h]&&(a[g][h].yPosOffsetOrigin=n(a[g][h].logarithmic,b.datasets[g].origin[h],a[g][h].calculatedScale,a[g][h].scaleHop)-a[g][h].zeroY,a[g][h].posYOrigin=a[g][h].yAxisPos-a[g][h].yPosOffsetOrigin),a[g][h].posX=a[g][h].xPos,a[g][h].v9=a[g][h].xPos,a[g][h].v10=a[g][h].posY,a[g][h].annotateStartPosX=a[g][h].xPos,a[g][h].annotateEndPosX=a[g][h].xPos,a[g][h].annotateStartPosY=e.xAxisPosY,a[g][h].annotateEndPosY=e.xAxisPosY-e.msr.availableHeight,a[g][h].D1A=void 0,a[g][h].D1B=void 0;break;case"Radar":var k=2*Math.PI/b.datasets[0].data.length;for(h=0;h<b.datasets[g].data.length;h++)a[g][h].midPosX=e.midPosX,a[g][h].midPosY=e.midPosY,a[g][h].int_radius=0,a[g][h].ext_radius=e.maxSize,a[g][h].radiusOffset=e.maxSize,a[g][h].calculatedScale=e.calculatedScale,a[g][h].scaleHop=e.scaleHop,a[g][h].calculated_offset=n(c.logarithmic,b.datasets[g].data[h],e.calculatedScale,e.scaleHop),a[g][h].offsetX=Math.cos(c.startAngle*Math.PI/180-h*k)*a[g][h].calculated_offset,a[g][h].offsetY=Math.sin(c.startAngle*Math.PI/180-h*k)*a[g][h].calculated_offset,a[g][h].v9=a[g][h].midPosX+a[g][h].offsetX,a[g][h].v10=a[g][h].midPosY-a[g][h].offsetY,a[g][h].posX=a[g][h].midPosX+a[g][h].offsetX,a[g][h].posY=a[g][h].midPosY-a[g][h].offsetY,0==h?a[g][h].calculated_offset_max=n(c.logarithmic,a[g][h].lmaxvalue,e.calculatedScale,e.scaleHop):a[g][h].calculated_offset_max=a[0][h].calculated_offset_max,a[g][h].annotateStartPosX=e.midPosX,a[g][h].annotateEndPosX=e.midPosX+Math.cos(c.startAngle*Math.PI/180-h*k)*e.maxSize,a[g][h].annotateStartPosY=e.midPosY,a[g][h].annotateEndPosY=e.midPosY-Math.sin(c.startAngle*Math.PI/180-h*k)*e.maxSize,Math.abs(a[g][h].annotateStartPosX-a[g][h].annotateEndPosX)<c.zeroValue?(a[g][h].D1A=void 0,a[g][h].D1B=void 0,a[g][h].D2A=0):(a[g][h].D1A=(a[g][h].annotateStartPosY-a[g][h].annotateEndPosY)/(a[g][h].annotateStartPosX-a[g][h].annotateEndPosX),a[g][h].D1B=-a[g][h].D1A*a[g][h].annotateStartPosX+a[g][h].annotateStartPosY,Math.abs(a[g][h].D1A)>=c.zeroValue?a[g][h].D2A=-(1/a[g][h].D1A):a[g][h].D2A=void 0);break;case"Bar":for(h=0;h<b.datasets[g].data.length;h++)a[g][h].xAxisPosY=e.xAxisPosY,a[g][h].yAxisPosX=e.yAxisPosX,a[g][h].valueHop=e.valueHop,a[g][h].barWidth=e.barWidth,a[g][h].additionalSpaceBetweenBars=e.additionalSpaceBetweenBars,a[g][h].nbValueHop=e.nbValueHop,a[g][h].calculatedScale=e.calculatedScale,a[g][h].scaleHop=e.scaleHop,a[g][h].xPosLeft=e.yAxisPosX+Math.ceil(d.chartSpaceScale*c.barValueSpacing)+e.valueHop*h+e.additionalSpaceBetweenBars+e.barWidth*f+Math.ceil(d.chartSpaceScale*c.barDatasetSpacing)*f+Math.ceil(d.chartLineScale*c.barStrokeWidth)*f,a[g][h].xPosRight=a[g][h].xPosLeft+e.barWidth,2==b.datasets[g].axis?(a[g][h].yPosBottom=e.xAxisPosY-e.zeroY2,a[g][h].barHeight=n(c.logarithmic2,1*b.datasets[g].data[h],e.calculatedScale2,e.scaleHop2)-e.zeroY2):(a[g][h].yPosBottom=e.xAxisPosY-e.zeroY,a[g][h].barHeight=n(c.logarithmic,1*b.datasets[g].data[h],e.calculatedScale,e.scaleHop)-e.zeroY),a[g][h].yPosTop=a[g][h].yPosBottom-a[g][h].barHeight+Math.ceil(d.chartLineScale*c.barStrokeWidth)/2,a[g][h].v7=a[g][h].xPosLeft,a[g][h].v8=a[g][h].yPosBottom,a[g][h].v9=a[g][h].xPosRight,a[g][h].v10=a[g][h].yPosTop;f++;break;case"StackedBar":for(h=0;h<b.datasets[g].data.length;h++)a[g][h].xAxisPosY=e.xAxisPosY,a[g][h].yAxisPosX=e.yAxisPosX,a[g][h].valueHop=e.valueHop,a[g][h].barWidth=e.barWidth,a[g][h].additionalSpaceBetweenBars=e.additionalSpaceBetweenBars,a[g][h].nbValueHop=e.nbValueHop,a[g][h].calculatedScale=e.calculatedScale,a[g][h].scaleHop=e.scaleHop,"undefined"==typeof i[h]&&(i[h]=0,j[h]=0,zeroY=n(c.logarithmic,0,e.calculatedScale,e.scaleHop)),"undefined"!=typeof b.datasets[g].data[h]&&(a[g][h].xPosLeft=e.yAxisPosX+Math.ceil(d.chartSpaceScale*c.barValueSpacing)+e.valueHop*h+e.additionalSpaceBetweenBars,1*b.datasets[g].data[h]<0?(a[g][h].botval=j[h],a[g][h].topval=j[h]+1*b.datasets[g].data[h],j[h]=j[h]+1*b.datasets[g].data[h]):(a[g][h].botval=i[h],a[g][h].topval=i[h]+1*b.datasets[g].data[h],i[h]=i[h]+1*b.datasets[g].data[h]),a[g][h].xPosRight=a[g][h].xPosLeft+e.barWidth,a[g][h].botOffset=n(c.logarithmic,a[g][h].botval,e.calculatedScale,e.scaleHop),a[g][h].topOffset=n(c.logarithmic,a[g][h].topval,e.calculatedScale,e.scaleHop),a[g][h].yPosBottom=e.xAxisPosY-a[g][h].botOffset,a[g][h].yPosTop=e.xAxisPosY-a[g][h].topOffset,Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)>0&&(1*b.datasets[g].data[h]<0?(a[g][h].yPosBottom+=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar),j[h]==1*b.datasets[g].data[h]&&(a[g][h].yPosBottom-=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)/2),a[g][h].yPosTop<a[g][h].yPosBottom&&(a[g][h].yPosBottom=a[g][h].yPosTop)):1*b.datasets[g].data[h]>0&&(a[g][h].yPosBottom-=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar),i[h]==1*b.datasets[g].data[h]&&(a[g][h].yPosBottom+=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)/2),a[g][h].yPosTop>a[g][h].yPosBottom&&(a[g][h].yPosBottom=a[g][h].yPosTop))),a[g][h].v7=a[g][h].xPosLeft,a[g][h].v8=a[g][h].yPosBottom,a[g][h].v9=a[g][h].xPosRight,a[g][h].v10=a[g][h].yPosTop);break;case"HorizontalBar":for(h=0;h<b.datasets[g].data.length;h++)a[g][h].xAxisPosY=e.xAxisPosY,a[g][h].yAxisPosX=e.yAxisPosX,a[g][h].valueHop=e.valueHop,a[g][h].barWidth=e.barWidth,a[g][h].additionalSpaceBetweenBars=e.additionalSpaceBetweenBars,a[g][h].nbValueHop=e.nbValueHop,a[g][h].calculatedScale=e.calculatedScale,a[g][h].scaleHop=e.scaleHop,a[g][h].xPosLeft=e.yAxisPosX+e.zeroY,a[g][h].yPosTop=e.xAxisPosY+Math.ceil(d.chartSpaceScale*c.barValueSpacing)-e.scaleHop*(h+1)+e.additionalSpaceBetweenBars+e.barWidth*g+Math.ceil(d.chartSpaceScale*c.barDatasetSpacing)*g+Math.ceil(d.chartLineScale*c.barStrokeWidth)*g,a[g][h].yPosBottom=a[g][h].yPosTop+e.barWidth,a[g][h].barWidth=n(c.logarithmic,1*b.datasets[g].data[h],e.calculatedScale,e.valueHop)-e.zeroY,a[g][h].xPosRight=a[g][h].xPosLeft+a[g][h].barWidth,a[g][h].v7=a[g][h].xPosLeft,a[g][h].v8=a[g][h].yPosBottom,a[g][h].v9=a[g][h].xPosRight,a[g][h].v10=a[g][h].yPosTop;break;case"HorizontalStackedBar":for(h=0;h<b.datasets[g].data.length;h++)a[g][h].xAxisPosY=e.xAxisPosY,a[g][h].yAxisPosX=e.yAxisPosX,a[g][h].valueHop=e.valueHop,a[g][h].barWidth=e.barWidth,a[g][h].additionalSpaceBetweenBars=e.additionalSpaceBetweenBars,a[g][h].nbValueHop=e.nbValueHop,a[g][h].calculatedScale=e.calculatedScale,a[g][h].scaleHop=e.scaleHop,0==g&&(i[h]=0,j[h]=0),"undefined"!=typeof b.datasets[g].data[h]&&(a[g][h].xPosLeft=e.yAxisPosX+Math.ceil(d.chartSpaceScale*c.barValueSpacing)+e.valueHop*h,1*b.datasets[g].data[h]<0?(a[g][h].leftval=j[h],a[g][h].rightval=j[h]+1*b.datasets[g].data[h],j[h]=j[h]+1*b.datasets[g].data[h]):(a[g][h].leftval=i[h],a[g][h].rightval=i[h]+1*b.datasets[g].data[h],i[h]=i[h]+1*b.datasets[g].data[h]),a[g][h].rightOffset=o(a[g][h].rightval,e.calculatedScale,e.valueHop),a[g][h].leftOffset=o(a[g][h].leftval,e.calculatedScale,e.valueHop),a[g][h].xPosRight=e.yAxisPosX+a[g][h].rightOffset,a[g][h].xPosLeft=e.yAxisPosX+a[g][h].leftOffset,a[g][h].yPosTop=e.xAxisPosY+Math.ceil(d.chartSpaceScale*c.barValueSpacing)-e.scaleHop*(h+1)+e.additionalSpaceBetweenBars,a[g][h].yPosBottom=a[g][h].yPosTop+e.barWidth,Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)>0&&(1*b.datasets[g].data[h]<0?(a[g][h].xPosLeft-=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar),j[h]==1*b.datasets[g].data[h]&&(a[g][h].xPosLeft+=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)/2),a[g][h].xPosLeft<a[g][h].xPosRight&&(a[g][h].xPosLeft=a[g][h].xPosRight)):1*b.datasets[g].data[h]>0&&(a[g][h].xPosLeft+=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar),i[h]==1*b.datasets[g].data[h]&&(a[g][h].xPosLeft-=Math.ceil(d.chartSpaceScale*c.spaceBetweenBar)/2),a[g][h].xPosLeft>a[g][h].xPosRight&&(a[g][h].xPosLeft=a[g][h].xPosRight))),a[g][h].v7=a[g][h].xPosLeft,a[g][h].v8=a[g][h].yPosBottom,a[g][h].v9=a[g][h].xPosRight,a[g][h].v10=a[g][h].yPosTop)}}function isBooleanOptionTrue(a,b){var c;if("undefined"==typeof optionvar){if("function"==typeof b)return!0;if("object"==typeof b){for(c=0;c<b.length;c++)if(b[c])return!0;return!1}return b}if("function"==typeof optionvar)return!0;if("object"==typeof optionvar){for(c=0;c<optionvar.length;c++)if(optionvar[c])return!0;return!1}return optionvar}function setOptionValue(a,b,c,d,e,f,g,h,i,j,k,l,m){var n;if(1==b&&"object"==typeof f.special)for(var o=f.special.length-1;o>=0;o--)if("undefined"!=typeof f.special[o].posi&&"undefined"!=typeof f.special[o].posj&&f.special[o].posi==k&&f.special[o].posj==l&&k!=-1&&l!=-1&&"undefined"!=typeof f.special[o][j])return f.special[o][j];return"undefined"==typeof h?"function"==typeof i?i(d,e,f,g,k,l,m):(n="object"==typeof i?a?i[Math.min(i.length-1,Math.max(0,k))]:i[Math.min(i.length-1,Math.max(0,l))]:i,1!=c&&(n=Math.ceil(n*c)),n):(n="function"==typeof h?h(d,e,f,g,k,l,m):"object"==typeof h?l==-1?h[Math.min(h.length-1,Math.max(0,k))]:h[Math.min(h.length-1,Math.max(0,l))]:h,1!=c&&(n=Math.ceil(n*c)),n)}function tpdraw(a,b){switch(a.tpchart){case"Bar":case"StackedBar":"Line"==b.type?tp="Line":tp=a.tpchart;break;default:tp=a.tpchart}return tp}function setTextBordersAndBackground(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q;if("string"!=typeof b){var r=b.toString();p=c*(r.split("\n").length||1),q=a.measureText(r).width}else p=c*(b.split("\n").length||1),q=a.measureText(b).width;var s,t,u;"center"==a.textAlign?(s=-q/2,t=q/2):"left"==a.textAlign?(s=0,t=q):"right"==a.textAlign&&(s=-q,t=0),"top"==a.textBaseline?(u=0,ybottom=p):"center"==a.textBaseline||"middle"==a.textBaseline?(u=-p/2,ybottom=p/2):"bottom"==a.textBaseline&&(u=-p,ybottom=0),a.save(),a.beginPath(),a.translate(d,e),"none"!=m&&(this.lineWidth=0,a.strokeStyle="rgba(0,0,0,0)",a.fillStyle=m,a.drawRectangle({x:s-j,y:ybottom+k,width:t-s+2*j,height:u-ybottom-2*k,borders:f,bordersWidth:i,borderSelection:g,borderRadius:o,fill:!0,stroke:!1})),f&&(a.lineWidth=i,a.strokeStyle=h,"none"!=m?a.fillStyle=m:a.fillStyle="rgba(0,0,0,0)",a.setLineDash(lineStyleFn(l)),a.drawRectangle({x:s-j-isBorder(g,"LEFT")*i/2,y:ybottom+k+isBorder(g,"BOTTOM")*i/2,width:t-s+2*j+(isBorder(g,"LEFT")+isBorder(g,"RIGHT"))*i/2,height:-p-2*k-(isBorder(g,"BOTTOM")+isBorder(g,"TOP"))*i/2,borders:f,bordersWidth:i,borderSelection:g,borderRadius:o,fill:!1,stroke:!0}),a.setLineDash([])),a.beginPath(),a.restore()}function calculatePieDrawingSize(a,b,c,d,e){var f=((c.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),g=((c.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);
g<=c.zeroValue&&(g=2*Math.PI);var h=(f-g+4*Math.PI)%(2*Math.PI),i=h+g,j=Math.floor((h+c.zeroValue)/(Math.PI/2)%4),k=Math.floor((i-c.zeroValue)/(Math.PI/2)%4),l=[0,0,0,0];if(j<=k)for(var m=j;m<=k;m++)l[m]=1;else{for(var m=j;m<4;m++)l[m]=1;for(var m=0;m<=k;m++)l[m]=1}0==l[0]&&0==l[1]?(midPieY=b.topNotUsableHeight+5,doughnutRadius=b.availableHeight-5):0==l[2]&&0==l[3]?(midPieY=b.topNotUsableHeight+b.availableHeight,doughnutRadius=b.availableHeight-5):(midPieY=b.topNotUsableHeight+b.availableHeight/2,doughnutRadius=b.availableHeight/2-5);var n;0==l[0]&&0==l[3]?(midPieX=b.leftNotUsableWidth+b.availableWidth-5,doughnutRadius=Math.min(doughnutRadius,b.availableWidth-5),n=b.availableWidth-5):0==l[1]&&0==l[2]?(midPieX=b.leftNotUsableWidth+5,doughnutRadius=Math.min(doughnutRadius,b.availableWidth-5),n=b.availableWidth-5):(midPieX=b.leftNotUsableWidth+b.availableWidth/2,doughnutRadius=Math.min(doughnutRadius,b.availableWidth/2-5),n=b.availableWidth/2-5);var o=d.labels.length-1;if(isBooleanOptionTrue(void 0,c.inGraphDataShow)&&3==setOptionValue(!1,!0,1,"INGRAPHDATARADIUSPOSITION",a,d,e,void 0,c.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",0,o,{nullValue:!0})&&"off-center"==setOptionValue(!1,!0,1,"INGRAPHDATAALIGN",a,d,e,void 0,c.inGraphDataAlign,"inGraphDataAlign",0,o,{nullValue:!0})&&0==setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",a,d,e,void 0,c.inGraphDataRotate,"inGraphDataRotate",0,o,{nullValue:!0})){doughnutRadius=doughnutRadius-setOptionValue(!1,!0,a.chartTextScale,"INGRAPHDATAFONTSIZE",a,d,e,void 0,c.inGraphDataFontSize,"inGraphDataFontSize",0,o,{nullValue:!0})-setOptionValue(!1,!0,1,"INGRAPHDATAPADDINGRADIUS",a,d,e,void 0,c.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",0,o,{nullValue:!0})-5;for(var p,m=0;m<d.datasets.length;m++)if("undefined"!=typeof d.datasets[m].data[o]&&1*d.datasets[m].data[o]>=0){a.font=setOptionValue(!1,!0,1,"INGRAPHDATAFONTSTYLE",a,d,e,void 0,c.inGraphDataFontStyle,"inGraphDataFontStyle",m,o,{nullValue:!0})+" "+setOptionValue(!1,!0,a.chartTextScale,"INGRAPHDATAFONTSIZE",a,d,e,void 0,c.inGraphDataFontSize,"inGraphDataFontSize",m,o,{nullValue:!0})+"px "+setOptionValue(!1,!0,1,"INGRAPHDATAFONTFAMILY",a,d,e,void 0,c.inGraphDataFontFamily,"inGraphDataFontFamily",m,o,{nullValue:!0}),1==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",a,d,e,void 0,c.inGraphDataAnglePosition,"inGraphDataAnglePosition",m,o,{nullValue:!0})?p=f+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",a,d,e,void 0,c.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",m,o,{nullValue:!0})*(Math.PI/180):2==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",a,d,e,void 0,c.inGraphDataAnglePosition,"inGraphDataAnglePosition",m,o,{nullValue:!0})?p=f-e[m][o].segmentAngle/2+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",a,d,e,void 0,c.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",m,o,{nullValue:!0})*(Math.PI/180):3==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",a,d,e,void 0,c.inGraphDataAnglePosition,"inGraphDataAnglePosition",m,o,{nullValue:!0})&&(p=f-e[m][o].segmentAngle+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",a,d,e,void 0,c.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",m,o,{nullValue:!0})*(Math.PI/180)),f-=e[m][o].segmentAngle;var q=tmplbis(setOptionValue(!1,!0,1,"INGRAPHDATATMPL",a,d,e,void 0,c.inGraphDataTmpl,"inGraphDataTmpl",m,o,{nullValue:!0}),e[m][o],c),r=a.measureTextMultiLine(q).textWidth,s=Math.abs((n-r)/Math.cos(p))-setOptionValue(!1,!0,1,"INGRAPHDATAPADDINGRADIUS",a,d,e,void 0,c.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",m,o,{nullValue:!0})-5;s<doughnutRadius&&(doughnutRadius=s)}}return doughnutRadius*=c.radiusScale,{radius:doughnutRadius,midPieX:midPieX,midPieY:midPieY}}function drawGridScale(a,b,c,d,e,f,g,h,i,j,k){var l,m,n,o,p,q=!1,r=!1;if(c.drawXScaleLine!==!1)for(var s=0;s<c.drawXScaleLine.length;s++){var t;switch(c.drawXScaleLine[s].position){case"bottom":t=f,q=!0;break;case"top":t=f-j*i,r=!0;break;case"0":case 0:t=f,0!=g?t=f-g:q=!0,Math.abs(t-(f-j*i))<c.zeroValue&&(r=!0)}drawScaleLine(a,e-Math.ceil(a.chartLineScale*c.scaleTickSizeLeft),t,e+d.availableWidth+Math.ceil(a.chartLineScale*c.scaleTickSizeRight),t,c.drawXScaleLine[s].lineWidth?c.drawXScaleLine[s].lineWidth:Math.ceil(a.chartLineScale*c.scaleLineWidth),c.drawXScaleLine[s].lineColor?c.drawXScaleLine[s].lineColor:c.scaleLineColor,c.scaleGridLineStyle)}for(l=-1+(1==q);l<j;l++)if(l<j-(1==r)&&(l==-1&&c.xAxisBottom||l==j-1&&c.xAxisTop||c.scaleShowGridLines&&(l+1)%c.scaleYGridLinesStep==0?(drawFirst=!1,c.scaleTickSizeLeft>0&&drawScaleLine(a,e-Math.ceil(a.chartLineScale*c.scaleTickSizeLeft),f-(l+1)*i,e,f-(l+1)*i,Math.ceil(a.chartLineScale*c.scaleGridLineWidth),"gridLine"!=c.tickColor&&c.yAxisLeft?c.scaleLineColor:c.scaleGridLineColor,c.scaleGridLineStyle),drawScaleLine(a,e,f-(l+1)*i,e+d.availableWidth,f-(l+1)*i,Math.ceil(a.chartLineScale*c.scaleGridLineWidth),c.scaleGridLineColor,c.scaleGridLineStyle),c.scaleTickSizeRight>0&&drawScaleLine(a,e+d.availableWidth,f-(l+1)*i,e+d.availableWidth+Math.ceil(a.chartLineScale*c.scaleTickSizeRight),f-(l+1)*i,Math.ceil(a.chartLineScale*c.scaleGridLineWidth),"gridLine"!=c.tickColor&&c.yAxisRight?c.scaleLineColor:c.scaleGridLineColor,c.scaleGridLineStyle)):(c.scaleTickSizeLeft>0&&drawScaleLine(a,e-Math.ceil(a.chartLineScale*c.scaleTickSizeLeft),f-(l+1)*i,e,f-(l+1)*i,Math.ceil(a.chartLineScale*c.scaleGridLineWidth),"gridLine"!=c.tickColor&&c.yAxisLeft?c.scaleLineColor:c.scaleGridLineColor,c.scaleGridLineStyle),c.scaleTickSizeRight>0&&drawScaleLine(a,e+d.availableWidth,f-(l+1)*i,e+d.availableWidth+Math.ceil(a.chartLineScale*c.scaleTickSizeRight),f-(l+1)*i,Math.ceil(a.chartLineScale*c.scaleGridLineWidth),"gridLine"!=c.tickColor&&c.yAxisRight?c.scaleLineColor:c.scaleGridLineColor,c.scaleGridLineStyle))),c.scaleMinorTickVerticalCount>0&&l!=-1)for(n=i/(c.scaleMinorTickVerticalCount+1),m=1;m<c.scaleMinorTickVerticalCount+1;m++)c.scaleMinorTickHorizontalLines?(c.scaleMinorTickSizeLeft>0&&drawScaleLine(a,e-Math.ceil(a.chartLineScale*c.scaleMinorTickSizeLeft),f-(l+1)*i+m*n,e,f-(l+1)*i+m*n,Math.ceil(a.chartLineScale*c.scaleMinorTickWidth),"gridLine"!=c.minorTickColor&&c.yAxisLeft?c.scaleLineColor:c.scaleMinorTickColor,c.scaleMinorTickStyle),drawScaleLine(a,e,f-(l+1)*i+m*n,e+d.availableWidth,f-(l+1)*i+m*n,Math.ceil(a.chartLineScale*c.scaleMinorTickWidth),c.scaleMinorTickColor,c.scaleMinorTickStyle),c.scaleMinorTickSizeRight>0&&drawScaleLine(a,e+d.availableWidth,f-(l+1)*i+m*n,e+d.availableWidth+Math.ceil(a.chartLineScale*c.scaleMinorTickSizeRight),f-(l+1)*i+m*n,Math.ceil(a.chartLineScale*c.scaleMinorTickWidth),"gridLine"!=c.minorTickColor&&c.yAxisRight?c.scaleLineColor:c.scaleMinorTickColor,c.scaleMinorTickStyle)):(c.scaleMinorTickSizeLeft>0&&drawScaleLine(a,e-Math.ceil(a.chartLineScale*c.scaleMinorTickSizeLeft),f-(l+1)*i+m*n,e,f-(l+1)*i+m*n,Math.ceil(a.chartLineScale*c.scaleMinorTickWidth),"gridLine"!=c.minorTickColor&&c.yAxisLeft?c.scaleLineColor:c.scaleMinorTickColor,c.scaleMinorTickStyle),c.scaleMinorTickSizeRight>0&&drawScaleLine(a,e+d.availableWidth,f-(l+1)*i+m*n,e+d.availableWidth+Math.ceil(a.chartLineScale*c.scaleMinorTickSizeRight),f-(l+1)*i+m*n,Math.ceil(a.chartLineScale*c.scaleMinorTickWidth),"gridLine"!=c.minorTickColor&&c.yAxisRight?c.scaleLineColor:c.scaleMinorTickColor,c.scaleMinorTickStyle));var o,p;for(l=0;l<k;l++)if(a.beginPath(),0==l&&c.yAxisLeft||l==k-1&&c.yAxisRight?(o=c.scaleLineColor,p=c.scaleLineWidth):(o=c.scaleGridLineColor,p=c.scaleGridLineWidth),0==l&&c.yAxisLeft||l==k-1&&c.yAxisRight||l==k-1&&c.scaleTickSizeRight>0||c.scaleShowGridLines&&l%c.scaleXGridLinesStep==0?(c.scaleTickSizeBottom>0&&drawScaleLine(a,e+l*h,f+Math.ceil(a.chartLineScale*c.scaleTickSizeBottom),e+l*h,f,Math.ceil(a.chartLineScale*p),"gridLine"!=c.tickColor&&q?c.scaleLineColor:o,c.scaleGridLineStyle),drawScaleLine(a,e+l*h,f,e+l*h,f-d.availableHeight,Math.ceil(a.chartLineScale*p),o,c.scaleGridLineStyle),c.scaleTickSizeTop>0&&drawScaleLine(a,e+l*h,f-d.availableHeight,e+l*h,f-d.availableHeight-Math.ceil(a.chartLineScale*c.scaleTickSizeTop),Math.ceil(a.chartLineScale*p),"gridLine"!=c.tickColor&&r?c.scaleLineColor:o,c.scaleGridLineStyle)):(c.scaleTickSizeBottom>0&&drawScaleLine(a,e+l*h,f,e+l*h,f+Math.ceil(a.chartLineScale*c.scaleTickSizeBottom),Math.ceil(a.chartLineScale*c.scaleGridLineWidth),"gridLine"!=c.tickColor&&q?c.scaleLineColor:c.scaleGridLineColor,c.scaleGridLineStyle),c.scaleTickSizeTop>0&&drawScaleLine(a,e+l*h,f-d.availableHeight,e+l*h,f-d.availableHeight-Math.ceil(a.chartLineScale*c.scaleTickSizeTop),Math.ceil(a.chartLineScale*c.scaleGridLineWidth),"gridLine"!=c.tickColor&&r?c.scaleLineColor:c.scaleGridLineColor,c.scaleGridLineStyle)),l<k-1&&c.scaleMinorTickHorizontalCount>0)for(n=h/(c.scaleMinorTickHorizontalCount+1),m=1;m<c.scaleMinorTickHorizontalCount+1;m++)c.scaleMinorTickVerticalLines?(c.scaleMinorTickSizeTop>0&&drawScaleLine(a,e+l*h+m*n,f-d.availableHeight-Math.ceil(a.chartLineScale*c.scaleMinorTickSizeTop),e+l*h+m*n,f-d.availableHeight,Math.ceil(a.chartLineScale*c.scaleMinorTickWidth),"gridLine"!=c.minorTickColor&&q?c.scaleLineColor:c.scaleMinorTickColor,c.scaleMinorTickStyle),drawScaleLine(a,e+l*h+m*n,f-d.availableHeight,e+l*h+m*n,f,Math.ceil(a.chartLineScale*c.scaleMinorTickWidth),c.scaleMinorTickColor,c.scaleMinorTickStyle),c.scaleMinorTickSizeBottom>0&&drawScaleLine(a,e+l*h+m*n,f,e+l*h+m*n,f+Math.ceil(a.chartLineScale*c.scaleMinorTickSizeBottom),Math.ceil(a.chartLineScale*c.scaleMinorTickWidth),"gridLine"!=c.minorTickColor&&q?c.scaleLineColor:c.scaleMinorTickColor,c.scaleMinorTickStyle)):(c.scaleMinorTickSizeBottom>0&&drawScaleLine(a,e+l*h+m*n,f,e+l*h+m*n,f+Math.ceil(a.chartLineScale*c.scaleMinorTickSizeBottom),Math.ceil(a.chartLineScale*c.scaleMinorTickWidth),"gridLine"!=c.minorTickColor&&q?c.scaleLineColor:c.scaleMinorTickColor,c.scaleMinorTickStyle),c.scaleMinorTickSizeTop>0&&drawScaleLine(a,e+l*h+m*n,f-d.availableHeight-Math.ceil(a.chartLineScale*c.scaleMinorTickSizeTop),e+l*h+m*n,f-d.availableHeight,Math.ceil(a.chartLineScale*c.scaleMinorTickWidth),"gridLine"!=c.minorTickColor&&r?c.scaleLineColor:c.scaleMinorTickColor,c.scaleMinorTickStyle))}function drawScaleLine(a,b,c,d,e,f,g,h){a.beginPath(),a.moveTo(b,c),a.lineWidth=f,a.strokeStyle=g,a.lineTo(d,e),a.setLineDash(lineStyleFn(h)),a.stroke(),a.setLineDash([])}function drawTick(a,b,c,d,e,f,g,h,i,j,k){var l,m;for(l=0==b?(d-c)/(g+1):(f-e)/(g+1),m=1;m<=g;m++)a.beginPath(),a.moveTo(c+m*l*(0==b),e+m*l*(1==b)),a.lineWidth=Math.ceil(a.chartLineScale*i),a.strokeStyle=j,a.lineTo(c+m*l*(0==b)+h*(1==b),e+m*l*(1==b)-h*(0==b)),a.setLineDash(lineStyleFn(k)),a.stroke(),a.setLineDash([])}function isBorder(a,b){var c=a;if(c>=8){if("RIGHT"==b)return!0;c-=8}if(c>=4){if("TOP"==b)return!0;c-=4}if(c>=2){if("LEFT"==b)return!0;c-=2}if(c>=1){if("BOTTOM"==b)return!0;c-=1}return!1}function convertData(a,b){console.log("GENERATE:"+b),b&&console.log("var data = {"),b&&console.log('     labels : [""],'),b&&console.log("     datasets : [");for(var c={labels:[""],datasets:[]},d=0;d<a.length;d++)b&&console.log("           {"),c.datasets[d]={data:[]},"undefined"!=typeof a[d].value?(b&&console.log("      data : ["+a[d].value+"],"),c.datasets[d].data=[a[d].value]):(b&&console.log("      data : ["+a[d].value+"],"),c.datasets[d].data=[]),"undefined"!=typeof a[d].color&&(b&&console.log('      fillColor : "'+a[d].color+'",'),c.datasets[d].fillColor=a[d].color),"undefined"!=typeof a[d].title&&(b&&console.log('      title : "'+a[d].title+'",'),c.datasets[d].title=a[d].title),"undefined"!=typeof a[d].link&&(b&&console.log('      link : "'+a[d].link+'",'),c.datasets[d].link=a[d].link),"undefined"!=typeof a[d].imageLoad&&(b&&console.log("      imageLoad : <image>,"),c.datasets[d].imageLoad=a[d].imageLoad),"undefined"!=typeof a[d].imagePos&&(b&&console.log("      imagePos : "+a[d].imagePos+","),c.datasets[d].imagePos=a[d].imagePos),"undefined"!=typeof a[d].imageHeight&&(b&&console.log("      imageHeight : "+a[d].imageHeight+","),c.datasets[d].imageHeight=a[d].imageHeight),"undefined"!=typeof a[d].imageWidth&&(b&&console.log("      imageWidth : "+a[d].imageWidth+","),c.datasets[d].imageWidth=a[d].imageWidth),"undefined"!=typeof a[d].text&&(b&&console.log('      text : "'+a[d].text+'",'),c.datasets[d].text=a[d].text),"undefined"!=typeof a[d].fontStyle&&(b&&console.log('      fontStyle : "'+a[d].fontStyle+'",'),c.datasets[d].fontStyle=a[d].fontStyle),"undefined"!=typeof a[d].fontSize&&(b&&console.log("      fontSize : "+a[d].fontSize+","),c.datasets[d].fontSize=a[d].fontSize),"undefined"!=typeof a[d].expandOutRadius&&(b&&console.log("      expandOutRadius : "+a[d].expandOutRadius+","),c.datasets[d].expandOutRadius=a[d].expandOutRadius),"undefined"!=typeof a[d].expandInRadius&&(b&&console.log("      expandInRadius : "+a[d].expandInRadius+","),c.datasets[d].expandInRadius=a[d].expandInRadius),"undefined"!=typeof a[d].gradientColors&&(b&&console.log("      gradientColors : < put here the gradient Colors definitions> "+a[d].gradientColors+","),c.datasets[d].gradientColors=a[d].gradientColors),b&&(console.log("      nothing : true    // line added to avoid a comma after last line"),d==a.length-1?console.log("           }"):console.log("           },"));return b&&console.log("]"),a.length>0&&("undefined"!=typeof a[0].shapesInChart&&(c.shapesInChart=a[0].shapesInChart),b&&(console.log("     ,"),console.log("     <   put here the shapesInChart    >"))),b&&console.log("};"),c}var chartJSLineStyle=[];chartJSLineStyle.solid=[],chartJSLineStyle.dotted=[1,4],chartJSLineStyle.shortDash=[2,1],chartJSLineStyle.dashed=[4,2],chartJSLineStyle.dashSpace=[4,6],chartJSLineStyle.longDashDot=[7,2,1,2],chartJSLineStyle.longDashShortDash=[10,4,4,4],chartJSLineStyle.gradient=[1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,9,9,8,8,7,7,6,6,5,5,4,4,3,3,2,2,1],"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=1/0&&d!=-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);e<c;e++)if(e in b&&b[e]===a)return e;return-1});var charJSPersonalDefaultOptions={},charJSPersonalDefaultOptionsLine={},charJSPersonalDefaultOptionsRadar={},charJSPersonalDefaultOptionsPolarArea={},charJSPersonalDefaultOptionsPie={},charJSPersonalDefaultOptionsDoughnut={},charJSPersonalDefaultOptionsBar={},charJSPersonalDefaultOptionsStackedBar={},charJSPersonalDefaultOptionsHorizontalBar={},charJSPersonalDefaultOptionsHorizontalStackedBar={},cachebis={};"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.fillTextMultiLine=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=(""+a).split("\n");"middle"==d?f&&(c-=(o.length-1)/2*e):"bottom"==d&&f&&(c-=(o.length-1)*e);for(var p=c-e,q=0;q<o.length;q++)this.fillText(o[q],b,c),c+=e;if(g){var r=h.measureTextMultiLine(a,e),s=[],p=[];s.p1=k+b,p.p1=l+c-e;var t=Math.PI/2+j;"left"==h.textAlign&&"top"==d?(s.p1+=e*Math.cos(t),p.p1+=e*Math.sin(t)):"left"==h.textAlign&&"middle"==d?(s.p1+=e/2*Math.cos(t),p.p1+=e/2*Math.sin(t)):"left"==h.textAlign&&"bottom"==d||("center"==h.textAlign&&"top"==d?(s.p1+=e*Math.cos(t)-r.textWidth/2*Math.cos(j),p.p1+=e*Math.sin(t)-r.textWidth/2*Math.sin(j)):"center"==h.textAlign&&"middle"==d?(s.p1+=e/2*Math.cos(t)-r.textWidth/2*Math.cos(j),p.p1+=e/2*Math.sin(t)-r.textWidth/2*Math.sin(j)):"center"==h.textAlign&&"bottom"==d?(s.p1-=r.textWidth/2*Math.cos(j),p.p1-=r.textWidth/2*Math.sin(j)):"right"==h.textAlign&&"top"==d?(s.p1+=e*Math.cos(t)-r.textWidth*Math.cos(j),p.p1+=e*Math.sin(t)-r.textWidth*Math.sin(j)):"right"==h.textAlign&&"middle"==d?(s.p1+=e/2*Math.cos(t)-r.textWidth*Math.cos(j),p.p1+=e/2*Math.sin(t)-r.textWidth*Math.sin(j)):"right"==h.textAlign&&"bottom"==d&&(s.p1-=r.textWidth*Math.cos(j),p.p1-=r.textWidth*Math.sin(j))),s.p2=s.p1+r.textWidth*Math.cos(j),p.p2=p.p1+r.textWidth*Math.sin(j),s.p3=s.p1-e*Math.cos(t),p.p3=p.p1-e*Math.sin(t),s.p4=s.p3+r.textWidth*Math.cos(j),p.p4=p.p3+r.textWidth*Math.sin(j),jsTextMousePos[h.ChartNewId][jsTextMousePos[h.ChartNewId].length]=[i,a,s,p,j,r.textWidth,r.textHeight,m,n]}},CanvasRenderingContext2D.prototype.measureTextMultiLine=function(a,b){var e,c=0,d=0,f=(""+a).replace(/<BR>/gi,"\n").split("\n");f.length>0&&(d=b+1.5*(f.length-1)*d);for(var d=f.length*b,g=0;g<f.length;g++)e=this.measureText(f[g]).width,e>c&&(c=e);return{textWidth:c,textHeight:d}},"function"!=typeof CanvasRenderingContext2D.prototype.setLineDash&&(CanvasRenderingContext2D.prototype.setLineDash=function(a){return 0}),CanvasRenderingContext2D.prototype.drawRectangle=function(a){var b=this.fillStyle;"undefined"==typeof a.x&&(a.x=0),a.width<0&&(a.x+=a.width,a.width*=-1),a.height<0&&(a.y+=a.height,a.height*=-1),"undefined"==typeof a.y&&(a.y=0),"undefined"==typeof a.y&&(a.y=0),"undefined"!=typeof a.backgroundColor&&(this.fillStyle=a.backgroundColor),"undefined"==typeof a.borderRadius&&(a.borderRadius=0),"undefined"==typeof a.borderSelection&&(a.borderSelection=15);var c=parseInt(a.borderRadius);if(a.borders&&a.bordersWidth>5&&"rgba(0,0,0,0)"!=this.fillStyle&&(c=0),a.borders&&a.fill&&15==a.borderSelection&&c>0)return this;if(0==c&&1==a.fill&&this.fillRect(a.x,a.y,a.width,a.height),0==c&&a.borderSelection>=15&&1==a.stroke&&this.strokeRect(a.x,a.y,a.width,a.height),(0!=c||a.borderSelection<15&&1==a.stroke)&&(c>a.width/2&&(c=a.width/2),a.height<a.width&&c>a.height/2&&(c=a.height/2),a.fill&&(this.beginPath(),this.lineWidth=0,this.strokeStyle="rgba(0,0,0,0)",this.moveTo(a.x+c,a.y),this.lineTo(a.x+a.width-c,a.y),this.arc(a.x+a.width-c,a.y+c,c,1.5*Math.PI,0),this.lineTo(a.x+a.width,a.y+a.height-c),this.arc(a.x+a.width-c,a.y+a.height-c,c,0,.5*Math.PI),this.lineTo(a.x+c,a.y+a.height),this.arc(a.x+c,a.y+a.height-c,c,.5*Math.PI,1*Math.PI),this.lineTo(a.x,a.y+c),this.arc(a.x+c,a.y+c,c,1*Math.PI,1.5*Math.PI),this.closePath(),this.fill(),this.stroke()),1==a.stroke)){var d=0==isBorder(a.borderSelection,"LEFT"),e=0==isBorder(a.borderSelection,"RIGHT"),f=0==isBorder(a.borderSelection,"TOP"),g=0==isBorder(a.borderSelection,"BOTTOM");0!=f||1!=d&&15!=a.borderSelection||(f=!0,this.beginPath(),this.moveTo(a.x+c,a.y),this.lineTo(a.x+a.width-c,a.y),isBorder(a.borderSelection,"RIGHT")?this.arc(a.x+a.width-c,a.y+c,c,1.5*Math.PI,0):this.stroke()),0!=e||1!=f&&15!=a.borderSelection||(e=!0,0==isBorder(a.borderSelection,"TOP")&&(this.beginPath(),this.moveTo(a.x+a.width,a.y+c)),this.lineTo(a.x+a.width,a.y+a.height-c),isBorder(a.borderSelection,"BOTTOM")?this.arc(a.x+a.width-c,a.y+a.height-c,c,0,.5*Math.PI):this.stroke()),0!=g||1!=e&&15!=a.borderSelection||(g=!0,0==isBorder(a.borderSelection,"RIGHT")&&(this.beginPath(),this.moveTo(a.x+a.width-c,a.y+a.height)),this.lineTo(a.x+c,a.y+a.height),isBorder(a.borderSelection,"LEFT")?this.arc(a.x+c,a.y+a.height-c,c,.5*Math.PI,1*Math.PI):this.stroke()),0!=d||1!=g&&15!=a.borderSelection||(d=!0,0==isBorder(a.borderSelection,"BOTTOM")&&(this.beginPath(),this.moveTo(a.x,a.y+a.height-c)),this.lineTo(a.x,a.y+c),isBorder(a.borderSelection,"TOP")?(this.arc(a.x+c,a.y+c,c,1*Math.PI,1.5*Math.PI),15==a.borderSelection&&(this.closePath(),this.stroke())):this.stroke()),0!=f||1!=d&&15!=a.borderSelection||(f=!0,0==isBorder(a.borderSelection,"LEFT")&&(this.beginPath(),this.moveTo(a.x+c,a.y)),this.lineTo(a.x+a.width-c,a.y),isBorder(a.borderSelection,"RIGHT")?this.arc(a.x+a.width-c,a.y+c,c,1.5*Math.PI,0):this.stroke()),0!=e||1!=f&&15!=a.borderSelection||(e=!0,0==isBorder(a.borderSelection,"TOP")&&(this.beginPath(),this.moveTo(a.x+a.width,a.y+c)),this.lineTo(a.x+a.width,a.y+a.height-c),isBorder(a.borderSelection,"BOTTOM")?this.arc(a.x+a.width-c,a.y+a.height-c,c,0,.5*Math.PI):this.stroke()),"rgba(0,0,0,0)"!=this.fillStyle&&15==a.borderSelection&&this.fill()}return this.fillStyle=b,this}),cursorDivCreated=!1,initChartJsResize=!1;var jsGraphResize=new Array,container;bw=new checkBrowser,fromLeft=10,fromTop=10,"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var dynamicDisplay=new Array,dynamicDisplayList=new Array,jsGraphAnnotate=new Array,jsTextMousePos=new Array,mouseActionData=new Array,inMouseAction=new Array;window.Chart=function(context){function init_and_start(a,b,c){var d;if("undefined"==typeof a.initialWidth&&(a.initialWidth=a.canvas.width),"undefined"==typeof a.chartTextScale&&(a.chartTextScale=c.chartTextScale),"undefined"==typeof a.chartLineScale&&(a.chartLineScale=c.chartLineScale),"undefined"==typeof a.chartSpaceScale&&(a.chartSpaceScale=c.chartSpaceScale),"undefined"==typeof a.firstPass&&(a.firstPass=0,c.responsive&&!c.multiGraph&&addResponsiveChart(a.ChartNewId,a,b,c),"undefined"==typeof b.labels&&(b.labels=[]),0==b.labels.length)){var e=0;for(d=0;d<b.datasets.length;d++)e=Max([e,b.datasets[d].data.length]);for(d=0;d<e;d++)b.labels[d]=""}if("undefined"==typeof a.ChartNewId){a.runanimationcompletefunction=!0;var f=new Date,g=f.getTime();a.ChartNewId=a.tpchart+"_"+g,a._eventListeners={}}if(resizeCtx(a,c),!dynamicFunction(b,c,a))return!1;for(c.multiGraph||0==a.firstPass||clearAnnotate(a.ChartNewId),"undefined"==typeof jsGraphAnnotate[a.ChartNewId]&&(jsGraphAnnotate[a.ChartNewId]=new Array,jsTextMousePos[a.ChartNewId]=new Array),d=0;d<b.datasets.length;d++)"undefined"==typeof b.datasets[d].title&&"undefined"!=typeof b.datasets[d].label&&(b.datasets[d].title=b.datasets[d].label);return defMouse(a,b,c),0==a.firstPass&&(c.animation?a.firstPass=1:a.firstPass=2),setRect(a,c),!0}function reverseData(a){a.labels=a.labels.reverse();for(var b=0;b<a.datasets.length;b++)for(var c in a.datasets[b])Array.isArray(a.datasets[b][c])&&(a.datasets[b][c]=a.datasets[b][c].reverse());return a}function calculateOffset(a,b,c,d){if(a)return CapValue(log10(b)*d-log10(c.graphMin)*d,void 0,0);var e=c.steps*c.stepValue,f=b-c.graphMin,g=CapValue(f/e,1,0);return d*c.steps*g}function animationLoop(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function x(){var q=a.animation?CapValue(t(u),null,0):1;1*p>=1*CapValue(a.animationSteps,Number.MAX_VALUE,1)||0==a.animation||e.firstPass%10!=1?q=1:q>=1&&(q=.9999),!a.animation||isIE()<9&&0!=isIE()||!a.clearRect||e.clearRect(f,g,h,i),dispCrossImage(e,a,j,k,l,m,!1,n,q,p),dispCrossText(e,a,j,k,l,m,!1,n,q,p),"function"==typeof a.beforeDrawFunction&&a.beforeDrawFunction("BEFOREDRAWFUNCTION",e,n,o,-1,-1,{animationValue:q,cntiter:p,config:a,borderX:l,borderY:m,midPosX:j,midPosY:k}),a.scaleOverlay?(d(q),"function"==typeof a.endDrawDataFunction&&a.endDrawDataFunction("ENDDATAFUNCTION",e,n,o,-1,-1,{animationValue:q,cntiter:p,config:a,borderX:l,borderY:m,midPosX:j,midPosY:k}),c(),"function"==typeof a.endDrawScaleFunction&&a.endDrawScaleFunction("ENDSCALEFUNCTION",e,n,o,-1,-1,{animationValue:q,cntiter:p,config:a,borderX:l,borderY:m,midPosX:j,midPosY:k})):(c(),"function"==typeof a.endDrawScaleFunction&&a.endDrawScaleFunction("ENDSCALEFUNCTION",e,n,o,-1,-1,{animationValue:q,cntiter:p,config:a,borderX:l,borderY:m,midPosX:j,midPosY:k}),d(q),"function"==typeof a.endDrawDataFunction&&a.endDrawDataFunction("ENDDATAFUNCTION",e,n,o,-1,-1,{animationValue:q,cntiter:p,config:a,borderX:l,borderY:m,midPosX:j,midPosY:k})),dispCrossImage(e,a,j,k,l,m,!0,n,q,p),dispCrossText(e,a,j,k,l,m,!0,n,q,p),drawLegend(b,n,a,e,e.tpchart,p)}function y(){p+=r,u+=r*s,p==a.animationSteps||0==a.animation||e.firstPass%10!=1?u=1:u>=1&&(u=.999),x(),r==-1&&p<=v?("function"==typeof a.onAnimationComplete&&1==e.runanimationcompletefunction&&a.onAnimationComplete(e,a,n,0,q+1,o),r=1,a.animationForceSetTimeOut?requestAnimFrameSetTimeOut(y):requestAnimFrame(y)):u<a.animationStopValue?a.animationForceSetTimeOut?requestAnimFrameSetTimeOut(y):requestAnimFrame(y):(q<a.animationCount||0==a.animationCount)&&e.firstPass%10==1?(q++,a.animationBackward&&1==r?(u-=s,r=-1):(r=1,p=v-1,u=w-s),window.setTimeout(y,1e3*a.animationPauseTime)):(testRedraw(e,n,a)||"function"==typeof a.onAnimationComplete&&1==e.runanimationcompletefunction&&(a.onAnimationComplete(e,a,n,1,q+1,o),e.runanimationcompletefunction=!1),e.firstPass=9)}var p=0,q=1,r=1;(a.animationStartValue<0||a.animationStartValue>1)&&(a.animation.StartValue=0),(a.animationStopValue<0||a.animationStopValue>1)&&(a.animation.StopValue=1),a.animationStopValue<a.animationStartValue&&(a.animationStopValue=a.animationStartValue),isIE()<9&&0!=isIE()&&(a.animation=!1);var s=a.animation?1/CapValue(a.animationSteps,Number.MAX_VALUE,1):1,t=animationOptions[a.animationEasing],u=a.animation?0:1;if(a.animation&&a.animationStartValue>0&&a.animationStartValue<=1)for(;u<a.animationStartValue;)p++,u+=s;var v=p,w=u;"function"!=typeof c&&(c=function(){}),a.clearRect?a.animationForceSetTimeOut?requestAnimFrameSetTimeOut(y):requestAnimFrame(y):y()}function calculateScale(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,p,q;if(2==a?(p=b.logarithmic2,q=b.yAxisMinimumInterval2):(p=b.logarithmic,q=b.yAxisMinimumInterval),p){f==e&&(e+=1),0==f&&(f=.01);var r=calculateOrderOfMagnitude(f),s=calculateOrderOfMagnitude(e)+1;h=Math.pow(10,r),i=Math.pow(10,s),n=s-r}else if(m=e-f,n=calculateOrderOfMagnitude(m),h=Math.abs(f)>b.zeroValue?Math.floor(f/(1*Math.pow(10,n)))*Math.pow(10,n):0,i=Math.abs(e)>b.zeroValue?Math.ceil(e/(1*Math.pow(10,n)))*Math.pow(10,n):0,"number"==typeof q&&i>=0){for(h-=h%q;h>f;)h-=q;for(i%q>b.zeroValue&&i%q<q-b.zeroValue&&(i=roundScale(b,(1+Math.floor(i/q))*q));i<e;)i+=q}if(j=i-h,k=Math.pow(10,n),l=Math.round(j/k),p)l=n;else{for(var t=!1;!t&&(l<d||l>c);)l<d?("number"==typeof q&&k/2<q&&(t=!0,k=q,l=Math.ceil(j/k)),t||(k/=2,l=Math.round(j/k))):(k*=2,l=Math.round(j/k));if("number"==typeof q&&(k<q&&(k=q,l=Math.ceil(j/k)),k%q>b.zeroValue&&k%q<q-b.zeroValue&&(2*k%q<b.zeroValue||2*k%q>q-b.zeroValue?(k=2*k,l=Math.ceil(j/k)):(k=roundScale(b,(1+Math.floor(k/q))*q),l=Math.ceil(j/k)))),1==b.graphMaximized||"bottom"==b.graphMaximized||"undefined"!=typeof b.graphMin)for(;h+k<f&&l>=3;)h+=k,l--;if(1==b.graphMaximized||"top"==b.graphMaximized||"undefined"!=typeof b.graphMax)for(;h+(l-1)*k>=e&&l>=3;)l--}var u=[];return populateLabels(1,b,g,u,l,h,i,k),{steps:l,stepValue:k,graphMin:h,labels:u,maxValue:e}}function roundScale(a,b){var c=0,d=""+a.yAxisMinimumInterval;return d.indexOf(".")>0&&(c=d.substr(d.indexOf(".")).length),Math.round(b*Math.pow(10,c))/Math.pow(10,c)}function calculateOrderOfMagnitude(a){return 0==a?0:Math.floor(Math.log(a)/Math.LN10)}function populateLabels(a,b,c,d,e,f,g,h){var i;if(2==a?(i=b.logarithmic2,fmtYLabel=b.fmtYLabel2):(i=b.logarithmic,fmtYLabel=b.fmtYLabel),c){var j;if(i){var k=f;for(j=0;j<e+1;j++)d.push(tmpl(c,{value:fmtChartJS(b,1*k.toFixed(getDecimalPlaces(k)),fmtYLabel)},b)),k*=10}else for(j=0;j<e+1;j++)d.push(tmpl(c,{value:fmtChartJS(b,1*(f+h*j).toFixed(getDecimalPlaces(h)),fmtYLabel)},b))}}function Max(a){return Math.max.apply(Math,a)}function Min(a){return Math.min.apply(Math,a)}function Default(a,b){return a?a:b}function CapValue(a,b,c){return isNumber(b)&&a>b?b:isNumber(c)&&a<c?c:a}function getDecimalPlaces(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0}function mergeChartConfig(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c}function tmpl(a,b,c){return newstr=a,newstr.substr(0,c.templatesOpenTag.length)==c.templatesOpenTag&&(newstr="<%="+newstr.substr(c.templatesOpenTag.length,newstr.length-c.templatesOpenTag.length)),newstr.substr(newstr.length-c.templatesCloseTag.length,c.templatesCloseTag.length)==c.templatesCloseTag&&(newstr=newstr.substr(0,newstr.length-c.templatesCloseTag.length)+"%>"),tmplpart2(newstr,b)}function tmplpart2(a,b){var c=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[a]=cache[a]||tmplpart2(document.getElementById(a).innerHTML);return b?c(b):c}function dispCrossText(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p;for(k=0;k<b.crossText.length;k++)if(""!=b.crossText[k]&&b.crossTextOverlay[Min([k,b.crossTextOverlay.length-1])]==g&&(1==j&&"first"==b.crossTextIter[Min([k,b.crossTextIter.length-1])]||b.crossTextIter[Min([k,b.crossTextIter.length-1])]==j||"all"==b.crossTextIter[Min([k,b.crossTextIter.length-1])]||1==i&&"last"==b.crossTextIter[Min([k,b.crossTextIter.length-1])])){switch(a.save(),a.beginPath(),a.font=b.crossTextFontStyle[Min([k,b.crossTextFontStyle.length-1])]+" "+Math.ceil(a.chartTextScale*b.crossTextFontSize[Min([k,b.crossTextFontSize.length-1])]).toString()+"px "+b.crossTextFontFamily[Min([k,b.crossTextFontFamily.length-1])],a.fillStyle=b.crossTextFontColor[Min([k,b.crossTextFontColor.length-1])],o=b.crossTextAlign[Min([k,b.crossTextAlign.length-1])],p=b.crossTextBaseline[Min([k,b.crossTextBaseline.length-1])],m=1*Math.ceil(a.chartSpaceScale*b.crossTextPosX[Min([k,b.crossTextPosX.length-1])]),n=1*Math.ceil(a.chartSpaceScale*b.crossTextPosY[Min([k,b.crossTextPosY.length-1])]),1*b.crossTextRelativePosX[Min([k,b.crossTextRelativePosX.length-1])]){case 0:"default"==o&&(o="left");break;case 1:m+=e,"default"==o&&(o="right");break;case 2:m+=c,"default"==o&&(o="center");break;case-2:m+=context.canvas.width/2,"default"==o&&(o="center");break;case 3:m+=m+2*c-e,"default"==o&&(o="left");break;case 4:m+=context.canvas.width,"default"==o&&(o="right");break;default:m+=c,"default"==o&&(o="center")}switch(1*b.crossTextRelativePosY[Min([k,b.crossTextRelativePosY.length-1])]){case 0:"default"==p&&(p="top");break;case 3:n+=f,"default"==p&&(p="top");break;case 2:n+=d,"default"==p&&(p="middle");break;case-2:n+=context.canvas.height/2,"default"==p&&(p="middle");break;case 1:n+=n+2*d-f,"default"==p&&(p="bottom");break;case 4:n+=context.canvas.height,"default"==p&&(p="bottom");break;default:n+=d,"default"==p&&(p="middle")}a.textAlign=o,a.textBaseline=p,a.translate(1*m,1*n);var q=Math.PI*b.crossTextAngle[Min([k,b.crossTextAngle.length-1])]/180;a.rotate(q),"%"==b.crossText[k].substring(0,1)?"function"==typeof b.crossTextFunction&&(l=b.crossTextFunction(k,b.crossText[k],a,b,c,d,e,f,g,h,i)):l=b.crossText[k],setTextBordersAndBackground(a,l,Math.ceil(a.chartTextScale*b.crossTextFontSize[Min([k,b.crossTextFontSize.length-1])]),0,0,b.crossTextBorders[Min([k,b.crossTextBorders.length-1])],b.crossTextBordersSelection[Min([k,b.crossTextBorders.length-1])],b.crossTextBordersColor[Min([k,b.crossTextBordersColor.length-1])],Math.ceil(a.chartLineScale*b.crossTextBordersWidth[Min([k,b.crossTextBordersWidth.length-1])]),Math.ceil(a.chartSpaceScale*b.crossTextBordersXSpace[Min([k,b.crossTextBordersXSpace.length-1])]),Math.ceil(a.chartSpaceScale*b.crossTextBordersYSpace[Min([k,b.crossTextBordersYSpace.length-1])]),b.crossTextBordersStyle[Min([k,b.crossTextBordersStyle.length-1])],b.crossTextBackgroundColor[Min([k,b.crossTextBackgroundColor.length-1])],"CROSSTEXT",b.crossTextBordersRadius),1==i&&"all"==b.crossTextIter[Min([k,b.crossTextIter.length-1])]||"last"!=b.crossTextIter[Min([k,b.crossTextIter.length-1])]?a.fillTextMultiLine(l,0,0,a.textBaseline,Math.ceil(a.chartTextScale*b.crossTextFontSize[Min([k,b.crossTextFontSize.length-1])]),!0,b.detectMouseOnText,a,"CROSSTEXT_TEXTMOUSE",q,1*m,1*n,k,-1):a.fillTextMultiLine(l,0,0,a.textBaseline,Math.ceil(a.chartTextScale*b.crossTextFontSize[Min([k,b.crossTextFontSize.length-1])]),!0,!1,a,"CROSSTEXT_TEXTMOUSE",q,1*m,1*n,k,-1),a.restore()}}function dispCrossImage(a,b,c,d,e,f,g,h,i,j){var k,m,n,o,p;for(k=0;k<b.crossImage.length;k++)if("undefined"!=typeof b.crossImage[k]&&b.crossImageOverlay[Min([k,b.crossImageOverlay.length-1])]==g&&(j==-1&&"background"==b.crossImageIter[Min([k,b.crossImageIter.length-1])]||1==j&&"first"==b.crossImageIter[Min([k,b.crossImageIter.length-1])]||b.crossImageIter[Min([k,b.crossImageIter.length-1])]==j||j!=-1&&"all"==b.crossImageIter[Min([k,b.crossImageIter.length-1])]||1==i&&"last"==b.crossImageIter[Min([k,b.crossImageIter.length-1])])){switch(a.save(),a.beginPath(),
o=b.crossImageAlign[Min([k,b.crossImageAlign.length-1])],p=b.crossImageBaseline[Min([k,b.crossImageBaseline.length-1])],m=1*Math.ceil(a.chartSpaceScale*b.crossImagePosX[Min([k,b.crossImagePosX.length-1])]),n=1*Math.ceil(a.chartSpaceScale*b.crossImagePosY[Min([k,b.crossImagePosY.length-1])]),1*b.crossImageRelativePosX[Min([k,b.crossImageRelativePosX.length-1])]){case 0:"default"==o&&(o="left");break;case 1:m+=e,"default"==o&&(o="right");break;case 2:m+=c,"default"==o&&(o="center");break;case-2:m+=context.canvas.width/2,"default"==o&&(o="center");break;case 3:m+=m+2*c-e,"default"==o&&(o="left");break;case 4:m+=context.canvas.width,"default"==o&&(o="right");break;default:m+=c,"default"==o&&(o="center")}switch(1*b.crossImageRelativePosY[Min([k,b.crossImageRelativePosY.length-1])]){case 0:"default"==p&&(p="top");break;case 3:n+=f,"default"==p&&(p="top");break;case 2:n+=d,"default"==p&&(p="middle");break;case-2:n+=context.canvas.height/2,"default"==p&&(p="middle");break;case 1:n+=n+2*d-f,"default"==p&&(p="bottom");break;case 4:n+=context.canvas.height,"default"==p&&(p="bottom");break;default:n+=d,"default"==p&&(p="middle")}var q=b.crossImage[k].width;switch(o){case"left":break;case"right":m-=q;break;case"center":m-=q/2}var r=b.crossImage[k].height;switch(p){case"top":break;case"bottom":n-=r;break;case"middle":n-=r/2}a.translate(1*m,1*n),a.rotate(Math.PI*b.crossImageAngle[Min([k,b.crossImageAngle.length-1])]/180),a.drawImage(b.crossImage[k],0,0),a.restore()}}function setMeasures(a,b,c,d,e,f,g,h,i,j,k,l){var m=d,n=e;window.devicePixelRatio>1&&(m/=window.devicePixelRatio,n/=window.devicePixelRatio),"none"!=b.canvasBackgroundColor&&(c.canvas.style.background=b.canvasBackgroundColor);var o,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0;c.widthAtSetMeasures=n,c.heightAtSetMeasures=m;var C,D,E,F,G,H,I;H=n,I=m,b.canvasBorders&&b.canvasBordersSelection>0&&(r=Math.ceil(c.chartLineScale*b.canvasBordersWidth),isBorder(b.canvasBordersSelection,"TOP")&&(s=r),isBorder(b.canvasBordersSelection,"BOTTOM")&&(t=r),isBorder(b.canvasBordersSelection,"RIGHT")&&(u=r),isBorder(b.canvasBordersSelection,"LEFT")&&(v=r)),C=0+s+Math.ceil(c.chartSpaceScale*b.spaceTop),""!=b.graphTitle.trim()&&(w=Math.ceil(c.chartTextScale*b.graphTitleFontSize)*(b.graphTitle.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.graphTitleSpaceBefore)+Math.ceil(c.chartSpaceScale*b.graphTitleSpaceAfter),x=C+Math.ceil(c.chartSpaceScale*b.graphTitleSpaceBefore),("none"!=b.graphTitleBackgroundColor||b.graphTitleBorders)&&(w+=(isBorder(b.graphTitleBordersSelection,"TOP")+isBorder(b.graphTitleBordersSelection,"BOTTOM"))*Math.ceil(c.chartSpaceScale*b.graphTitleBordersYSpace),x+=isBorder(b.graphTitleBordersSelection,"TOP")*Math.ceil(c.chartSpaceScale*b.graphTitleBordersYSpace)),b.graphTitleBorders&&(w+=(isBorder(b.graphTitleBordersSelection,"TOP")+isBorder(b.graphTitleBordersSelection,"BOTTOM"))*Math.ceil(c.chartLineScale*b.graphTitleBordersWidth),x+=isBorder(b.graphTitleBordersSelection,"TOP")*Math.ceil(c.chartLineScale*b.graphTitleBordersWidth)),C+=w),""!=b.graphSubTitle.trim()&&(y=Math.ceil(c.chartTextScale*b.graphSubTitleFontSize)*(b.graphSubTitle.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.graphSubTitleSpaceBefore)+Math.ceil(c.chartSpaceScale*b.graphSubTitleSpaceAfter),z=C+Math.ceil(c.chartSpaceScale*b.graphSubTitleSpaceBefore),("none"!=b.graphSubTitleBackgroundColor||b.graphSubTitleBorders)&&(y+=2*Math.ceil(c.chartSpaceScale*b.graphSubTitleBordersYSpace),z+=Math.ceil(c.chartSpaceScale*b.graphSubTitleBordersYSpace)),b.graphSubTitleBorders&&(y+=(isBorder(b.graphTitleBordersSelection,"TOP")+isBorder(b.graphTitleBordersSelection,"BOTTOM"))*Math.ceil(c.chartLineScale*b.graphSubTitleBordersWidth),z+=isBorder(b.graphTitleBordersSelection,"TOP")*Math.ceil(c.chartLineScale*b.graphSubTitleBordersWidth)),C+=y),D=C,I-=D,C=m-t-Math.ceil(c.chartSpaceScale*b.spaceBottom),"undefined"!=typeof b.footNote&&""!=b.footNote.trim()&&(A=Math.ceil(c.chartTextScale*b.footNoteFontSize)*(b.footNote.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.footNoteSpaceBefore)+Math.ceil(c.chartSpaceScale*b.footNoteSpaceAfter),B=C-Math.ceil(c.chartSpaceScale*b.footNoteSpaceAfter),("none"!=b.footNoteBackgroundColor||b.footNoteBorders)&&(A+=2*Math.ceil(c.chartSpaceScale*b.footNoteBordersYSpace),B-=Math.ceil(c.chartSpaceScale*b.footNoteBordersYSpace)),b.footNoteBorders&&(A+=(isBorder(b.footNoteBordersSelection,"TOP")+isBorder(b.footNoteBordersSelection,"BOTTOM"))*Math.ceil(c.chartLineScale*b.footNoteBordersWidth),B-=isBorder(b.footNoteBordersSelection,"BOTTOM")*Math.ceil(c.chartLineScale*b.footNoteBordersWidth)),C-=A),E=m-C,I-=E,C=0+v+Math.ceil(c.chartSpaceScale*b.spaceLeft),F=C,H-=F,C=n-u-Math.ceil(c.chartSpaceScale*b.spaceRight),G=n-C,H-=G,D+=Math.ceil(c.chartSpaceScale*b.graphSpaceBefore),E+=Math.ceil(c.chartSpaceScale*b.graphSpaceAfter),I-=Math.ceil(c.chartSpaceScale*b.graphSpaceBefore)+Math.ceil(c.chartSpaceScale*b.graphSpaceAfter);var J=0,K=-99999999,L=0;if("undefined"!=typeof b.legend&&1==b.legend){c.font=b.legendFontStyle+" "+Math.ceil(c.chartTextScale*b.legendFontSize).toString()+"px "+b.legendFontFamily;var M;for(o=0;o<a.datasets.length;o++)"string"==typeof a.datasets[o].title&&""!=a.datasets[o].title.trim()&&(J++,M=c.measureTextMultiLine(fmtChartJS(b,a.datasets[o].title,b.fmtLegend),Math.ceil(c.chartTextScale*b.legendFontSize)),K=Math.max(M.textWidth,K),L=Math.max(Math.ceil(c.chartTextScale*b.legendFontSize),L));K+=Math.ceil(c.chartTextScale*b.legendBlockSize)+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenBoxAndText),(0==J||1==J&&!b.showSingleLegend)&&(K=0)}var W,Q=0,R=0,S=0,T=0,U=0,V=0;if(K>-99999998)if(0==b.legendPosY||4==b.legendPosY){var X,Y;X=1==b.legendPosX||2==b.legendPosX||3==b.legendPosX?H-Math.ceil(c.chartSpaceScale*Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText))-Math.ceil(c.chartSpaceScale*b.legendSpaceRightText):n-u-v-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight)-Math.ceil(c.chartSpaceScale*Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText))-Math.ceil(c.chartSpaceScale*b.legendSpaceRightText),1!=b.legendBorders&&"rgba(0,0,0,0)"==b.legendFillColor||(X-=b.legendBorders*(isBorder(b.legendBordersSelection,"RIGHT")+isBorder(b.legendBordersSelection,"LEFT"))*Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceLeft)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceRight)),Y=Min([Math.floor((X+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))/(K+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))),b.maxLegendCols]),S=Math.ceil(J/Y),T=Math.ceil(J/S),W=measureLegend(a,c,b,K,L,S,T,X),U=W.legendHeight,0==b.legendPosY?(R=D-Math.ceil(c.chartSpaceScale*b.graphSpaceBefore),D+=U):(R=m-E-U,E+=U),I-=U}else if(0==b.legendPosX||4==b.legendPosX){var Z,$;Z=I-Math.ceil(c.chartSpaceScale*Math.ceil(c.chartSpaceScale*b.legendSpaceBeforeText))-Math.ceil(c.chartSpaceScale*b.legendSpaceAfterText),X=H-Math.ceil(c.chartSpaceScale*Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText))-Math.ceil(c.chartSpaceScale*b.legendSpaceRightText),1!=b.legendBorders&&"rgba(0,0,0,0)"==b.legendFillColor||(Z-=b.legendBorders*(isBorder(b.legendBordersSelection,"BOTTOM")+isBorder(b.legendBordersSelection,"TOP"))*Math.ceil(c.chartLineScale*b.legendBordersWidth)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceBefore)+Math.ceil(c.chartSpaceScale*b.legendBordersSpaceAfter)),$=Min([Math.floor((Z+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextVertical))/(L+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextVertical))),b.maxLegendLines]),T=Math.ceil(J/$),S=Math.ceil(J/T),W=measureLegend(a,c,b,K,L,S,T,X),V=W.legendWidth,0==b.legendPosX?(Q=F,F+=V):(Q=n-G-V,G+=V),H-=V}var _=0,aa=0,ba=0;if(j&&""!=b.yAxisUnit.trim()){aa=Math.ceil(c.chartTextScale*b.yAxisUnitFontSize)*(b.yAxisUnit.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.yAxisUnitSpaceBefore)+Math.ceil(c.chartSpaceScale*b.yAxisUnitSpaceAfter),c.font=b.yAxisUnitFontStyle+" "+Math.ceil(c.chartTextScale*b.yAxisUnitFontSize).toString()+"px "+b.yAxisUnitFontFamily;var ca=c.measureTextMultiLine(b.yAxisUnit,Math.ceil(c.chartTextScale*b.yAxisUnitFontSize));ba=ca.textWidth,_=D+Math.ceil(c.chartSpaceScale*b.yAxisUnitSpaceBefore)+ca.textHeight,("none"!=b.yAxisUnitBackgroundColor||b.yAxisUnitBorders)&&(aa+=2*Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersYSpace),_+=Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersYSpace)),b.yAxisUnitBorders&&(aa+=(isBorder(b.yAxisUnitBordersSelection,"TOP")+isBorder(b.yAxisUnitBordersSelection,"BOTTOM"))*Math.ceil(c.chartLineScale*b.yAxisUnitBordersWidth),_+=isBorder(b.yAxisUnitBordersSelection,"TOP")*Math.ceil(c.chartLineScale*b.yAxisUnitBordersWidth)),D+=aa,I-=aa}var da=0,ea=1,fa=0,ga=1,ha=0,ia=0,ja=0,ka=0,la=0,ma=1,na=0,oa=1,pa=0,qa=0,ra=0;if(j){var sa;for(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,da=Math.max(1,Math.ceil(c.chartTextScale*b.xScaleLabelsMinimumWidth)),fa=da,o=0;o<a.labels.length;o++)showLabels(c,a,b,o)===!0&&(sa=c.measureTextMultiLine(fmtChartJS(b,a.labels[o],b.fmtXLabel),Math.ceil(c.chartTextScale*b.scaleFontSize)),da=Math.max(sa.textWidth,da),ea=Math.max(sa.textHeight,ea));if("object"==typeof a.Labels2&&b.xAxisBottom&&b.xAxisTop)for(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,o=0;o<a.Labels2.length;o++)showLabels(c,a,b,o)===!0&&(sa=c.measureTextMultiLine(fmtChartJS(b,a.Labels2[o],b.fmtTopXLabel),Math.ceil(c.chartTextScale*b.scaleFontSize)),fa=Math.max(sa.textWidth,fa),ga=Math.max(sa.textHeight,ga));else fa=da,ga=ea;"undefined"!=typeof b.xAxisLabel&&b.xAxisBottom&&""!=b.xAxisLabel.trim()&&(ha=Math.ceil(c.chartTextScale*b.xAxisFontSize)*(b.xAxisLabel.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.xAxisLabelSpaceBefore)+Math.ceil(c.chartSpaceScale*b.xAxisLabelSpaceAfter),ja=m-E-Math.ceil(c.chartSpaceScale*b.xAxisLabelSpaceAfter),("none"!=b.xAxisLabelBackgroundColor||b.footNoteBorders)&&(ha+=2*Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersYSpace),ja-=Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersYSpace)),b.xAxisLabelBorders&&(ha+=(isBorder(b.xAxisLabelBordersSelection,"TOP")+isBorder(b.xAxisLabelBordersSelection,"BOTTOM"))*Math.ceil(c.chartLineScale*b.xAxisLabelBordersWidth),ja-=isBorder(b.xAxisLabelBordersSelection,"BOTTOM")*Math.ceil(c.chartLineScale*b.xAxisLabelBordersWidth)));var ta;if(ta=b.xAxisLabel,"undefined"!=typeof b.xTAxisLabel&&b.xAxisTop&&""!=b.xTAxisLabel.trim()&&(ta=b.xTAxisLabel),"undefined"!=typeof ta&&b.xAxisTop&&""!=ta.trim()&&(ia=Math.ceil(c.chartTextScale*b.xAxisFontSize)*(ta.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.xAxisLabelSpaceBefore)+Math.ceil(c.chartSpaceScale*b.xAxisLabelSpaceAfter),ka=D+Math.ceil(c.chartSpaceScale*b.xAxisLabelSpaceBefore),"none"!=b.xAxisLabelBackgroundColor&&(ia+=2*Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersYSpace),ka+=Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersYSpace)),b.xAxisLabelBorders&&(ia+=(isBorder(b.xAxisLabelBordersSelection,"TOP")+isBorder(b.xAxisLabelBordersSelection,"BOTTOM"))*Math.ceil(c.chartLineScale*b.xAxisLabelBordersWidth),ka+=isBorder(b.xAxisLabelBordersSelection,"TOP")*Math.ceil(c.chartLineScale*b.xAxisLabelBordersWidth))),la=Math.max(1,Math.ceil(c.chartTextScale*b.yScaleLabelsMinimumWidth)),na=la,null!=f&&"nihil"!=f)for(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,o=f.length-1;o>=0;o--)"string"==typeof f[o]&&showYLabels(c,a,b,o,f[o])&&""!=f[o].trim()&&(sa=c.measureTextMultiLine(fmtChartJS(b,f[o],b.fmtYLabel),Math.ceil(c.chartTextScale*b.scaleFontSize)),la=Math.max(la,sa.textWidth),ma=Math.max(ma,sa.textHeight));if(null!=g&&b.yAxisRight)for(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,o=g.length-1;o>=0;o--)"string"==typeof g[o]&&showYLabels(c,a,b,o,g[o])&&(sa=c.measureTextMultiLine(fmtChartJS(b,g[o],b.fmtYLabel2),Math.ceil(c.chartTextScale*b.scaleFontSize)),na=Math.max(sa.textWidth,na),oa=Math.max(sa.textHeight,oa));else na=la,oa=ma;"undefined"!=typeof b.yAxisLabel&&(b.yAxisRight||b.yAxisLeft)&&""!=b.yAxisLabel.trim()&&(pa=Math.ceil(c.chartTextScale*b.yAxisFontSize)*(b.yAxisLabel.split("\n").length||1)+Math.ceil(c.chartSpaceScale*b.yAxisLabelSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisLabelSpaceRight),qa=F+Math.ceil(c.chartSpaceScale*b.yAxisLabelSpaceLeft)+Math.ceil(c.chartTextScale*b.yAxisFontSize),ra=n-G-Math.ceil(c.chartSpaceScale*b.yAxisLabelSpaceLeft)-Math.ceil(c.chartTextScale*b.yAxisFontSize),("none"!=b.yAxisLabelBackgroundColor||b.yAxisLabelBorders)&&(pa+=2*Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersYSpace),qa+=Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersYSpace),ra-=Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersYSpace)),b.yAxisLabelBorders&&(pa+=(isBorder(b.yAxisLabelBordersSelection,"TOP")+isBorder(b.yAxisLabelBordersSelection,"BOTTOM"))*Math.ceil(c.chartLineScale*b.yAxisLabelBordersWidth),qa+=isBorder(b.yAxisLabelBordersSelection,"TOP")*Math.ceil(c.chartLineScale*b.yAxisLabelBordersWidth),ra-=isBorder(b.yAxisLabelBordersSelection,"TOP")*Math.ceil(c.chartLineScale*b.yAxisLabelBordersWidth)))}var Ca,Da,Ea,Fa,ua=0,va=0,wa=0,xa=0,ya=0,za=0,Aa=0,Ba=0;j&&b.xAxisBottom&&(Fa=H,0==i?(Ca=da,Da=ea,Ea=a.labels.length,1==b.yAxisLeft&&(Fa-=la+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),1==b.yAxisRight&&(Fa-=na+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight))):(Ca=la,Da=ma,Ea=f.length,1==b.yAxisLeft&&(Fa-=da+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),1==b.yAxisRight&&(Fa-=fa+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight))),"undefined"!=typeof b.yAxisLabel&&""!=b.yAxisLabel.trim()&&(b.yAxisRight&&(Fa-=pa),b.yAxisLeft&&(Fa-=pa)),"smart"==b.rotateLabels?(ua=0,(Fa+Math.ceil(c.chartTextScale*b.xAxisSpaceBetweenLabels))/Ea<Ca+Math.ceil(c.chartTextScale*b.xAxisSpaceBetweenLabels)&&(ua=45,Fa/Ea<Math.abs(Math.cos(ua*Math.PI/180)*Ca)&&(ua=90))):(ua=b.rotateLabels,ua<0&&(ua=0),ua>180&&(ua=180)),ua>90&&(ua+=180),ya=Math.abs(Math.sin(ua*Math.PI/180)*Ca)+Math.abs(Math.sin((ua+90)*Math.PI/180)*Da),wa=Math.abs(Math.cos(ua*Math.PI/180)*Ca)+Math.abs(Math.cos((ua+90)*Math.PI/180)*Da),Aa=m-E-ha-ya-Math.ceil(c.chartSpaceScale*b.xAxisSpaceAfter)),j&&b.xAxisTop&&(Fa=H,0==i?(Ca=fa,Da=ga,Ea=a.labels.length,1==b.yAxisLeft&&(Fa-=la+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),1==b.yAxisRight&&(Fa-=na+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight))):(Ca=na,Da=oa,Ea=g.length,1==b.yAxisLeft&&(Fa-=da+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),1==b.yAxisRight&&(Fa-=fa+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight))),"undefined"!=typeof b.yAxisLabel&&""!=b.yAxisLabel.trim()&&(b.yAxisRight&&(Fa-=pa),b.yAxisLeft&&(Fa-=pa)),"smart"==b.rotateTLabels?(va=0,(Fa+Math.ceil(c.chartTextScale*b.xAxisSpaceBetweenLabels))/Ea<Ca+Math.ceil(c.chartTextScale*b.xAxisSpaceBetweenLabels)&&(va=45,Fa/Ea<Math.abs(Math.cos(va*Math.PI/180)*Ca)&&(va=90))):(va=b.rotateTLabels,va<0&&(va=0),va>180&&(va=180)),ua>90&&(ua+=180),za=Math.abs(Math.sin(va*Math.PI/180)*Ca)+Math.abs(Math.sin((va+90)*Math.PI/180)*Da),xa=Math.abs(Math.cos(va*Math.PI/180)*Ca)+Math.abs(Math.cos((va+90)*Math.PI/180)*Da),Ba=D+ia+Math.ceil(c.chartSpaceScale*b.xAxisSpaceBefore));var Ga=F,Ha=G;if(j&&b.yAxisLeft&&(F+=0==i?pa+la+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight):pa+da+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),j&&b.yAxisRight&&(G+=0==i?pa+na+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight):pa+fa+Math.ceil(c.chartSpaceScale*b.yAxisSpaceLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),H=n-F-G,j&&b.xAxisTop)if(0==i)D+=ia+za+Math.ceil(c.chartSpaceScale*b.xAxisSpaceBefore)+Math.ceil(c.chartSpaceScale*b.xAxisSpaceAfter);else{var Ia=Math.abs(Math.sin(va*Math.PI/180)*na)+Math.abs(Math.sin((va+90)*Math.PI/180)*oa);D+=ha+Ia+Math.ceil(c.chartSpaceScale*b.xAxisSpaceBefore)+Math.ceil(c.chartSpaceScale*b.xAxisSpaceAfter)}if(j&&b.xAxisBottom)if(0==i)E+=ha+ya+Math.ceil(c.chartSpaceScale*b.xAxisSpaceBefore)+Math.ceil(c.chartSpaceScale*b.xAxisSpaceAfter);else{var Ia=Math.abs(Math.sin(ua*Math.PI/180)*la)+Math.abs(Math.sin((ua+90)*Math.PI/180)*ma);E+=ha+Ia+Math.ceil(c.chartSpaceScale*b.xAxisSpaceBefore)+Math.ceil(c.chartSpaceScale*b.xAxisSpaceAfter)}if(I=m-D-E,K>-99999998){switch(0==S&&(X=H-Math.ceil(c.chartSpaceScale*Math.ceil(c.chartSpaceScale*b.legendSpaceLeftText))-Math.ceil(c.chartSpaceScale*b.legendSpaceRightText),Y=Min([Math.floor((X+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))/(K+Math.ceil(c.chartSpaceScale*b.legendSpaceBetweenTextHorizontal))),b.maxLegendCols]),S=Math.ceil(J/Y),T=Math.ceil(J/S),W=measureLegend(a,c,b,K,L,S,T,X)),U=W.legendHeight,V=W.legendWidth,b.legendPosY){case 0:break;case 1:R=D;break;case 2:R=D+I/2-U/2;break;case-2:R=m/2-U/2;break;case 3:R=m-E-U;break;case 4:break;default:R=D}switch(b.legendPosX){case 0:0!=b.legendPosY&&4!=b.legendPosY||(Q=Ga);break;case 1:Q=F;break;case 2:Q=F+H/2-V/2;break;case-2:Q=n/2-V/2;break;case 3:Q=n-G-V;break;case 4:0!=b.legendPosY&&4!=b.legendPosY||(Q=n-Ha-V);break;default:Q=n-G}}if("Line"!=l&&"HorizontalBar"!=l&&"HorizontalStackedBar"!=l||(b.inGraphDataShow&&(G=Math.max(G,Math.max(la,na)+1+u),F=Math.max(F,Math.max(la,na)+1+v)),(b.xAxisTop||b.xAxisBottom)&&(G=Math.max(G,Math.max(da/2,fa/2)+1+u),F=Math.max(F,Math.max(da/2,fa/2)+1+v)),H=n-G-F),j&&b.yAxisLeft&&(b.yAxisUnitBorders||"none"!=b.yAxisUnitBackgroundColor)&&(b.yAxisLeft&&(F=Math.max(F,v+b.spaceLeft+(b.yAxisUnitBorders&&isBorder(b.yAxisUnitBordersSelection,"LEFT"))*b.yAxisUnitBordersWidth+("none"!=b.yAxisUnitBackgroundColor||b.yAxisUnitBorders)*Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersYSpace)+1+ba/2)),b.yAxisRight&&(G=Math.max(G,u+b.spaceRight+(b.yAxisUnitBorders&&isBorder(b.yAxisUnitBordersSelection,"RIGHT"))*b.yAxisUnitBordersWidth+("none"!=b.yAxisUnitBackgroundColor||b.yAxisUnitBorders)*Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersYSpace)+1+ba/2)),H=n-G-F),"Line"!=l&&"Bar"!=l&&"StackedBar"!=l||(b.inGraphDataShow&&(D=Math.max(D,Math.max(ma,oa)+1+s)),I=m-D-E),dispCrossImage(c,b,n/2,m/2,n/2,m/2,!1,a,-1,-1),"function"==typeof b.initFunction&&b.initFunction("INITFUNCTION",c,a,null,-1,-1,{animationValue:0,cntiter:0,config:b,borderX:0,borderY:0,midPosX:0,midPosY:0}),"nihil"!=f){if(r>0&&(c.save(),c.beginPath(),c.setLineDash(lineStyleFn(b.canvasBordersStyle)),c.strokeStyle=b.canvasBordersColor,c.lineWidth=r,c.setLineDash(lineStyleFn(b.canvasBordersStyle)),c.strokeStyle=b.canvasBordersColor,c.fillStyle="rgba(0,0,0,0)",c.drawRectangle({x:0+v/2,y:0+s/2,width:n-u/2-v/2,height:m-s/2-t/2,borders:!0,bordersWidth:r,borderSelection:b.canvasBordersSelection,borderRadius:b.canvasBordersRadius,fill:!1,stroke:!0}),c.setLineDash([]),c.restore()),w>0){c.save(),c.beginPath(),c.font=b.graphTitleFontStyle+" "+Math.ceil(c.chartTextScale*b.graphTitleFontSize).toString()+"px "+b.graphTitleFontFamily,c.fillStyle=b.graphTitleFontColor,c.textBaseline="top";var Ja;switch(b.graphTitleAlign){case"right":c.textAlign="right",Ja=Math.ceil(c.chartSpaceScale*b.spaceLeft)+(n-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight))/2,Ja=n-Math.ceil(c.chartSpaceScale*(b.spaceRight+b.graphTitleShift))-u;break;case"left":c.textAlign="left",Ja=v+Math.ceil(c.chartSpaceScale*(b.spaceLeft+b.graphTitleShift));break;default:c.textAlign="center",Ja=v+Math.ceil(c.chartSpaceScale*b.spaceLeft)+(n-u-v-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight))/2}setTextBordersAndBackground(c,b.graphTitle,Math.ceil(c.chartTextScale*b.graphTitleFontSize),Ja,x,b.graphTitleBorders,b.graphTitleBordersSelection,b.graphTitleBordersColor,Math.ceil(c.chartLineScale*b.graphTitleBordersWidth),Math.ceil(c.chartSpaceScale*b.graphTitleBordersXSpace),Math.ceil(c.chartSpaceScale*b.graphTitleBordersYSpace),b.graphTitleBordersStyle,b.graphTitleBackgroundColor,"GRAPHTITLE",b.graphTitleBordersRadius),c.translate(Ja,x),c.fillTextMultiLine(b.graphTitle,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.graphTitleFontSize),!0,b.detectMouseOnText,c,"TITLE_TEXTMOUSE",0,Ja,x,-1,-1),c.stroke(),c.restore()}if(y>0){switch(c.save(),c.beginPath(),c.font=b.graphSubTitleFontStyle+" "+Math.ceil(c.chartTextScale*b.graphSubTitleFontSize).toString()+"px "+b.graphSubTitleFontFamily,c.fillStyle=b.graphSubTitleFontColor,b.graphSubTitleAlign){case"right":c.textAlign="right",Ja=n-Math.ceil(c.chartSpaceScale*(b.spaceRight+b.graphSubTitleShift))-u;break;case"left":c.textAlign="left",Ja=v+Math.ceil(c.chartSpaceScale*(b.spaceLeft+b.graphSubTitleShift));break;default:c.textAlign="center",Ja=v+Math.ceil(c.chartSpaceScale*b.spaceLeft)+(n-u-v-Math.ceil(c.chartSpaceScale*b.spaceLeft)-Math.ceil(c.chartSpaceScale*b.spaceRight))/2}c.textBaseline="top",setTextBordersAndBackground(c,b.graphSubTitle,Math.ceil(c.chartTextScale*b.graphSubTitleFontSize),Ja,z,b.graphSubTitleBorders,b.graphSubTitleBordersSelection,b.graphSubTitleBordersColor,Math.ceil(c.chartLineScale*b.graphSubTitleBordersWidth),Math.ceil(c.chartSpaceScale*b.graphSubTitleBordersXSpace),Math.ceil(c.chartSpaceScale*b.graphSubTitleBordersYSpace),b.graphSubTitleBordersStyle,b.graphSubTitleBackgroundColor,"GRAPHSUBTITLE",b.graphSubTitleBordersRadius),c.translate(Ja,z),c.fillTextMultiLine(b.graphSubTitle,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.graphSubTitleFontSize),!0,b.detectMouseOnText,c,"SUBTITLE_TEXTMOUSE",0,Ja,z,-1,-1),c.stroke(),c.restore()}if(""!=b.footNote.trim()){switch(c.save(),c.font=b.footNoteFontStyle+" "+Math.ceil(c.chartTextScale*b.footNoteFontSize).toString()+"px "+b.footNoteFontFamily,c.fillStyle=b.footNoteFontColor,b.footNoteAlign){case"right":c.textAlign="right",Ja=n-Math.ceil(c.chartSpaceScale*(b.spaceRight+b.footNoteShift))-u;break;case"left":c.textAlign="left",Ja=v+Math.ceil(c.chartSpaceScale*(b.spaceLeft+b.footNoteShift));break;default:c.textAlign="center",Ja=F+H/2}c.textBaseline="bottom",setTextBordersAndBackground(c,b.footNote,Math.ceil(c.chartTextScale*b.footNoteFontSize),Ja,B,b.footNoteBorders,b.footNoteBordersSelection,b.footNoteBordersColor,Math.ceil(c.chartLineScale*b.footNoteBordersWidth),Math.ceil(c.chartSpaceScale*b.footNoteBordersXSpace),Math.ceil(c.chartSpaceScale*b.footNoteBordersYSpace),b.footNoteBordersStyle,b.footNoteBackgroundColor,"FOOTNOTE",b.footNoteBordersRadius),c.translate(Ja,B),c.fillTextMultiLine(b.footNote,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.footNoteFontSize),!0,b.detectMouseOnText,c,"FOOTNOTE_TEXTMOUSE",0,Ja,B,-1,-1),c.stroke(),c.restore()}if(aa>0&&(b.yAxisLeft&&(c.save(),c.beginPath(),c.font=b.yAxisUnitFontStyle+" "+Math.ceil(c.chartTextScale*b.yAxisUnitFontSize).toString()+"px "+b.yAxisUnitFontFamily,c.fillStyle=b.yAxisUnitFontColor,c.textAlign="center",c.textBaseline="bottom",setTextBordersAndBackground(c,b.yAxisUnit,Math.ceil(c.chartTextScale*b.yAxisUnitFontSize),F,_,b.yAxisUnitBorders,b.yAxisUnitBordersSelection,b.yAxisUnitBordersColor,Math.ceil(c.chartLineScale*b.yAxisUnitBordersWidth),Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersXSpace),Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersYSpace),b.yAxisUnitBordersStyle,b.yAxisUnitBackgroundColor,"YAXISUNIT",b.yAxisUnitBordersRadius),c.translate(F,_),c.fillTextMultiLine(b.yAxisUnit,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.yAxisUnitFontSize),!0,b.detectMouseOnText,c,"YLEFTAXISUNIT_TEXTMOUSE",0,F,_,-1,-1),c.stroke(),c.restore()),b.yAxisRight&&(""==b.yAxisUnit2&&(b.yAxisUnit2=b.yAxisUnit),c.save(),c.beginPath(),c.font=b.yAxisUnitFontStyle+" "+Math.ceil(c.chartTextScale*b.yAxisUnitFontSize).toString()+"px "+b.yAxisUnitFontFamily,c.fillStyle=b.yAxisUnitFontColor,c.textAlign="center",c.textBaseline="bottom",setTextBordersAndBackground(c,b.yAxisUnit2,Math.ceil(c.chartTextScale*b.yAxisUnitFontSize),n-G,_,b.yAxisUnitBorders,b.yAxisUnitBordersSelection,b.yAxisUnitBordersColor,Math.ceil(c.chartLineScale*b.yAxisUnitBordersWidth),Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersXSpace),Math.ceil(c.chartSpaceScale*b.yAxisUnitBordersYSpace),b.yAxisUnitBordersStyle,b.yAxisUnitBackgroundColor,"YAXISUNIT",b.yAxisUnitBordersRadius),c.translate(n-G,_),c.fillTextMultiLine(b.yAxisUnit2,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.yAxisUnitFontSize),!0,b.detectMouseOnText,c,"YRIGHTAXISUNIT_TEXTMOUSE",0,n-G,_,-1,-1),c.stroke(),c.restore())),pa>0&&(b.yAxisLeft&&(c.save(),c.beginPath(),c.font=b.yAxisFontStyle+" "+Math.ceil(c.chartTextScale*b.yAxisFontSize).toString()+"px "+b.yAxisFontFamily,c.fillStyle=b.yAxisFontColor,c.textAlign="center",c.textBaseline="bottom",c.translate(qa,D+I/2),c.rotate(-(90*(Math.PI/180))),setTextBordersAndBackground(c,b.yAxisLabel,Math.ceil(c.chartTextScale*b.yAxisFontSize),0,0,b.yAxisLabelBorders,b.yAxisLabelBordersSelection,b.yAxisLabelBordersColor,Math.ceil(c.chartLineScale*b.yAxisLabelBordersWidth),Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersXSpace),Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersYSpace),b.yAxisLabelBordersStyle,b.yAxisLabelBackgroundColor,"YAXISLABELLEFT",b.yAxisLabelBordersRadius),c.fillTextMultiLine(b.yAxisLabel,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.yAxisFontSize),!1,b.detectMouseOnText,c,"YLEFTAXISLABEL_TEXTMOUSE",-(90*(Math.PI/180)),qa,D+I/2,-1,-1),c.stroke(),c.restore()),b.yAxisRight)){var Ka=b.yAxisLabel2;""==Ka&&(Ka=b.yAxisLabel),c.save(),c.beginPath(),c.font=b.yAxisFontStyle+" "+Math.ceil(c.chartTextScale*b.yAxisFontSize).toString()+"px "+b.yAxisFontFamily,c.fillStyle=b.yAxisFontColor,c.textAlign="center",c.textBaseline="bottom",c.translate(ra,D+I/2),c.rotate(+(90*(Math.PI/180))),setTextBordersAndBackground(c,Ka,Math.ceil(c.chartTextScale*b.yAxisFontSize),0,0,b.yAxisLabelBorders,b.yAxisLabelBordersSelection,b.yAxisLabelBordersColor,Math.ceil(c.chartLineScale*b.yAxisLabelBordersWidth),Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersXSpace),Math.ceil(c.chartSpaceScale*b.yAxisLabelBordersYSpace),b.yAxisLabelBordersStyle,b.yAxisLabelBackgroundColor,"YAXISLABELLEFT",b.yAxisLabelBordersRadius),c.fillTextMultiLine(Ka,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.yAxisFontSize),!1,b.detectMouseOnText,c,"YRIGHTAXISLABEL_TEXTMOUSE",+(90*(Math.PI/180)),ra,D+I/2,-1,-1),c.stroke(),c.restore()}if(ha>0&&(b.xAxisBottom&&(c.save(),c.beginPath(),c.font=b.xAxisFontStyle+" "+Math.ceil(c.chartTextScale*b.xAxisFontSize).toString()+"px "+b.xAxisFontFamily,c.fillStyle=b.xAxisFontColor,c.textAlign="center",c.textBaseline="bottom",setTextBordersAndBackground(c,b.xAxisLabel,Math.ceil(c.chartTextScale*b.xAxisFontSize),F+H/2,ja,b.xAxisLabelBorders,b.xAxisLabelBordersSelection,b.xAxisLabelBordersColor,Math.ceil(c.chartLineScale*b.xAxisLabelBordersWidth),Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersXSpace),Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersYSpace),b.xAxisLabelBordersStyle,b.xAxisLabelBackgroundColor,"XAXISLABEL",b.xAxisLabelBordersRadius),c.translate(F+H/2,ja),c.fillTextMultiLine(b.xAxisLabel,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.xAxisFontSize),!0,b.detectMouseOnText,c,"XAXISLABEL_TEXTMOUSE",0,F+H/2,ja,-1,-1),c.stroke(),c.restore()),b.xAxisTop)){var La=b.xAxisLabel2;""==La&&(La=b.xAxisLabel),c.save(),c.beginPath(),c.font=b.xAxisFontStyle+" "+Math.ceil(c.chartTextScale*b.xAxisFontSize).toString()+"px "+b.xAxisFontFamily,c.fillStyle=b.xAxisFontColor,c.textAlign="center",c.textBaseline="top",setTextBordersAndBackground(c,La,Math.ceil(c.chartTextScale*b.xAxisFontSize),F+H/2,ka,b.xAxisLabelBorders,b.xAxisLabelBordersSelection,b.xAxisLabelBordersColor,Math.ceil(c.chartLineScale*b.xAxisLabelBordersWidth),Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersXSpace),Math.ceil(c.chartSpaceScale*b.xAxisLabelBordersYSpace),b.xAxisLabelBordersStyle,b.xAxisLabelBackgroundColor,"XAXISLABEL",b.xAxisLabelBordersRadius),c.translate(F+H/2,ka),c.fillTextMultiLine(La,0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.xAxisFontSize),!0,b.detectMouseOnText,c,"XAXISLABEL_TEXTMOUSE",0,F+H/2,ja,-1,-1),c.stroke(),c.restore()}var Ma;J>1||1==J&&b.showSingleLegend?(Ma={dispLegend:!0,xLegendPos:Q,yLegendPos:R,nbLegendLines:S,nbLegendCols:T,reverseLegend:h,legendBox:k,widestLegend:K,highestLegend:L,legendWidth:W.legendWidth,legendHeight:W.legendHeight,legendBackgroundColorWidth:W.legendBackgroundColorWidth,legendBackgroundColorHeight:W.legendBackgroundColorHeight,legendBorderWidth:W.legendBorderWidth,legendBorderHeight:W.legendBorderHeight,legendFirstTextXPos:W.legendFirstTextXPos,legendFirstTextYPos:W.legendFirstTextYPos,legendBackgroundColorXPos:W.legendBackgroundColorXPos,legendBackgroundColorYPos:W.legendBackgroundColorYPos,legendBorderXPos:W.legendBorderXPos,legendBorderYPos:W.legendBorderYPos,elementMsr:W.elementMsr},0!=b.legendPosY&&4!=b.legendPosY&&0!=b.legendPosX&&4!=b.legendPosX||(drawLegend(Ma,a,b,c,l,-1),Ma={dispLegend:!1})):Ma={dispLegend:!1}}return clrx=F,clrwidth=H,clry=D,clrheight=I,{leftNotUsableWidth:F,rightNotUsableWidth:G,availableWidth:H,topNotUsableHeight:D,bottomNotUsableHeight:E,availableHeight:I,widestXLabel:da,widestTXLabel:fa,highestXLabel:ea,highestTXLabel:ga,widestYLabel:la,widestYLabel2:na,highestYLabel:ma,rotateLabels:ua,rotateTLabels:va,xLabelPos:Aa,xTLabelPos:Ba,clrx:clrx,clry:clry,clrwidth:clrwidth,clrheight:clrheight,legendMsr:Ma}}function drawLinesDataset(a,b,c,d,e,f){function A(a,f,g,h){0==setOptionValue(!0,!0,1,"LINKTYPE",d,b,e,b.datasets[h].linkType,c.linkType,"linkType",h,s,{nullvalue:null})&&setOptionValue(!0,!0,1,"BEZIERCURVE",d,b,e,void 0,c.bezierCurve,"bezierCurve",h,-1,{nullValue:!0})&&(a.length=0,a.push(f),a.push(g)),n=g}function B(a,b,c,d){return yposOrigin="undefined","undefined"!=typeof d[a][b].yPosOffsetOrigin&&(yposOrigin=d[a][b].yAxisPos-m.mainVal*d[a][b].yPosOffsetOrigin),yposOrigin}function C(a,b,c,d,e,f,g,h,i){0==setOptionValue(!0,!0,1,"LINKTYPE",b,f,g,f.datasets[h].linkType,e.linkType,"linkType",h,s,{nullvalue:null})&&setOptionValue(!0,!0,1,"BEZIERCURVE",b,f,g,void 0,e.bezierCurve,"bezierCurve",h,-1,{nullValue:!0})?(a.push(c),a.push(d)):0==setOptionValue(!0,!0,1,"LINKTYPE",b,f,g,f.datasets[h].linkType,e.linkType,"linkType",h,s,{nullvalue:null})?b.lineTo(c,d):1==setOptionValue(!0,!0,1,"LINKTYPE",b,f,g,f.datasets[h].linkType,e.linkType,"linkType",h,s,{nullvalue:null})?("undefined"!=i?b.moveTo(c,i):b.moveTo(c,g[h][0].xAxisPosY-g[h][0].zeroY),b.lineTo(c,d)):2==setOptionValue(!0,!0,1,"LINKTYPE",b,f,g,f.datasets[h].linkType,e.linkType,"linkType",h,s,{nullvalue:null})&&"undefined"!=typeof n&&(b.lineTo(c,n),b.lineTo(c,d),n=d)}function D(a,c,d,f){0==setOptionValue(!0,!0,1,"LINKTYPE",c,b,e,b.datasets[f].linkType,d.linkType,"linkType",f,s,{nullvalue:null})&&setOptionValue(!0,!0,1,"BEZIERCURVE",c,b,e,void 0,d.bezierCurve,"bezierCurve",f,-1,{nullValue:!0})&&(minimumpos=e[f][0].xAxisPosY,maximumpos=e[f][0].xAxisPosY-e[f][0].calculatedScale.steps*e[f][0].scaleHop,F(c,a,setOptionValue(!0,!0,1,"BEZIERCURVETENSION",c,b,e,void 0,d.bezierCurveTension,"bezierCurveTension",f,-1,{nullValue:!0}),minimumpos,maximumpos),a.length=0),n=void 0}function E(a,b,c,d,e,f,g){var h=Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2)),i=Math.sqrt(Math.pow(e-c,2)+Math.pow(f-d,2)),j=g*h/(h+i),k=g-j,l=c+j*(a-e),m=d+j*(b-f),n=c-k*(a-e),o=d-k*(b-f);return[l,m,n,o]}function F(a,d,f,i,j){var k=[],l=d.length;if(d.push(2*d[l-2]-d[l-4]),d.push(2*d[l-1]-d[l-3]),4==l)return a.moveTo(d[0],d[1]),void a.lineTo(d[2],d[3]);for(var m=0;m<l-2;m+=2)k=k.concat(E(d[m],d[m+1],d[m+2],d[m+3],d[m+4],d[m+5],f));for(a.beginPath(),a.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",a,b,e,b.datasets[p].strokeColor,c.defaultStrokeColor,"strokeColor",p,s,{nullvalue:null}),a.lineWidth=Math.ceil(a.chartLineScale*setOptionValue(!0,!0,1,"LINEWIDTH",a,b,e,b.datasets[p].datasetStrokeWidth,c.datasetStrokeWidth,"datasetStrokeWidth",p,s,{
nullvalue:null})),a.moveTo(d[0],d[1]),a.quadraticCurveTo(k[0],Math.max(Math.min(k[1],i),j),d[2],d[3]),a.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",a,b,e,b.datasets[p].datasetStrokeStyle,c.datasetStrokeStyle,"datasetStrokeStyle",p,s,{nullvalue:null}))),m=2;m<d.length-4;m+=2)g=Math.max(Math.min(k[2*m-1],i),j),h=Math.max(Math.min(k[2*m+1],i),j),a.bezierCurveTo(k[2*m-2],g,k[2*m],h,d[m+2],d[m+3]);a.stroke()}for(var g,h,i,j,k,l,m,n,o=[],p=0;p<b.datasets.length;p++)if(1==setOptionValue(!0,!0,1,"ANIMATION",d,b,e,b.datasets[p].animation,c.animation,"animation",p,-1,{nullvalue:null})||a>=1){if(n="undefined","Line"!=e[p][0].tpchart)continue;if(0==e[p].length)continue;if(e[p][0].firstNotMissing==-1)continue;d.save(),d.beginPath(),prevAnimPc={mainVal:0,subVal:0,animVal:0};for(var q=-1,r=-1,s=e[p][0].firstNotMissing;s<=e[p][0].lastNotMissing;s++)if(todisplay=!0,0==setOptionValue(!0,!0,1,"DISPLAYDATA",d,b,e,b.datasets[p].displayData,c.displayData,"displayData",p,s,{nullvalue:null})&&(todisplay=!1),0==setOptionValue(!0,!0,1,"DISPLAYDATA",d,b,e,b.displayData,c.displayData,"displayData",s,-1,{nullvalue:null})&&(todisplay=!1),"undefined"==typeof b.datasets[p].data[s]&&(todisplay=!1),!(0==prevAnimPc.animVal&&s>e[p][0].firstNotMissing))if(m=animationCorrection(a,b,c,p,s,!0),0==m.mainVal&&prevAnimPc.mainVal>0&&q!=-1)d.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",d,b,e,b.datasets[p].datasetStrokeStyle,c.datasetStrokeStyle,"datasetStrokeStyle",p,s,{nullvalue:null}))),d.stroke(),d.setLineDash([]),c.extrapolateMissingData?(g=e[p][e[p][s].prevNotMissing].yAxisPos-prevAnimPc.mainVal*e[p][e[p][s].prevNotMissing].yPosOffset,h=e[p][s].yAxisPos-prevAnimPc.mainVal*e[p][e[p][s-1].nextNotMissing].yPosOffset,j=e[p][s-1].nextNotMissing-e[p][s].prevNotMissing,k=s-1-e[p][s].prevNotMissing,l=(k+prevAnimPc.subVal)/j,i=g+l*(h-g),C(o,d,e[p][e[p][s].prevNotMissing].xPos+l*(e[p][e[p][s-1].nextNotMissing].xPos-e[p][e[p][s].prevNotMissing].xPos),i,c,b,e,p,B(p,s,b,e)),D(o,d,c,p),d.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",d,b,e,b.datasets[p].datasetStrokeStyle,c.datasetStrokeStyle,"datasetStrokeStyle",p,s,{nullvalue:null}))),d.stroke(),d.setLineDash([]),d.strokeStyle="rgba(0,0,0,0)",c.datasetFill&&1!=setOptionValue(!0,!0,1,"LINKTYPE",d,b,e,b.datasets[p].linkType,c.linkType,"linkType",p,s,{nullvalue:null})&&(d.lineTo(e[p][e[p][s].prevNotMissing].xPos+l*(e[p][e[p][s-1].nextNotMissing].xPos-e[p][e[p][s].prevNotMissing].xPos),e[p][s].yAxisPos),d.lineTo(e[p][q].xPos,e[p][q].xAxisPosY-e[p][0].zeroY),d.closePath(),d.fillStyle=setOptionValue(!0,!0,1,"COLOR",d,b,e,b.datasets[p].fillColor,c.defaultFillColor,"fillColor",p,s,{animationValue:m.mainVal,xPosLeft:e[p][0].xPos,yPosBottom:Math.max(e[p][0].yAxisPos,e[p][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[p][0].lminvalue_offset),xPosRight:e[p][b.datasets[p].data.length-1].xPos,yPosTop:Math.min(e[p][0].yAxisPos,e[p][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[p][0].lmaxvalue_offset)}),d.fill(),q=-1)):1==todisplay&&(C(o,d,e[p][s-1].xPos+prevAnimPc.subVal*(e[p][s].xPos-e[p][s-1].xPos),e[p][s].yAxisPos-prevAnimPc.mainVal*e[p][e[p][s-1].nextNotMissing].yPosOffset,c,b,e,p,B(p,s,b,e)),D(o,d,c,p),d.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",d,b,e,b.datasets[p].datasetStrokeStyle,c.datasetStrokeStyle,"datasetStrokeStyle",p,s,{nullvalue:null}))),d.stroke(),d.setLineDash([]),d.strokeStyle="rgba(0,0,0,0)",c.datasetFill&&1!=setOptionValue(!0,!0,1,"LINKTYPE",d,b,e,b.datasets[p].linkType,c.linkType,"linkType",p,s,{nullvalue:null})&&(d.lineTo(e[p][s-1].xPos+prevAnimPc.subVal*(e[p][s].xPos-e[p][s-1].xPos),e[p][s].yAxisPos),d.lineTo(e[p][q].xPos,e[p][q].xAxisPosY-e[p][0].zeroY),d.closePath(),d.fillStyle=setOptionValue(!0,!0,1,"COLOR",d,b,e,b.datasets[p].fillColor,c.defaultFillColor,"fillColor",p,s,{animationValue:m.mainVal,xPosLeft:e[p][0].xPos,yPosBottom:Math.max(e[p][0].yAxisPos,e[p][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[p][0].lminvalue_offset),xPosRight:e[p][b.datasets[p].data.length-1].xPos,yPosTop:Math.min(e[p][0].yAxisPos,e[p][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[p][0].lmaxvalue_offset)}),d.fill())),prevAnimPc=m;else switch(0==m.totVal?(d.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",d,b,e,b.datasets[p].datasetStrokeStyle,c.datasetStrokeStyle,"datasetStrokeStyle",p,s,{nullvalue:null}))),d.stroke(),d.setLineDash([]),d.strokeStyle="rgba(0,0,0,0)"):(d.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",d,b,e,b.datasets[p].datasetStrokeStyle,c.datasetStrokeStyle,"datasetStrokeStyle",p,s,{nullvalue:null}))),d.stroke(),d.setLineDash([]),d.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",d,b,e,b.datasets[p].strokeColor,c.defaultStrokeColor,"strokeColor",p,s,{nullvalue:null})),prevAnimPc=m,todisplay){case!1:if(c.extrapolateMissingData)m.subVal>0&&(r=e[p][s].xPos+m.subVal*(e[p][s+1].xPos-e[p][s].xPos),g=e[p][e[p][s+1].prevNotMissing].yAxisPos-e[p][e[p][s+1].prevNotMissing].yPosOffset,h=e[p][e[p][s].nextNotMissing].yAxisPos-e[p][e[p][s].nextNotMissing].yPosOffset,j=e[p][s].nextNotMissing-e[p][s+1].prevNotMissing,k=s-e[p][s+1].prevNotMissing,l=(k+prevAnimPc.subVal)/j,i=g+l*(h-g),C(o,d,e[p][e[p][s].prevNotMissing].xPos+l*(e[p][e[p][s-1].nextNotMissing].xPos-e[p][e[p][s].prevNotMissing].xPos),i,c,b,e,p,B(p,s,b,e)));else{if(q==-1)continue;D(o,d,c,p),d.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",d,b,e,b.datasets[p].datasetStrokeStyle,c.datasetStrokeStyle,"datasetStrokeStyle",p,s,{nullvalue:null}))),d.stroke(),d.setLineDash([]),c.datasetFill&&q!=-1&&1!=setOptionValue(!0,!0,1,"LINKTYPE",d,b,e,b.datasets[p].linkType,c.linkType,"linkType",p,s,{nullvalue:null})&&(r=-1,d.strokeStyle="rgba(0,0,0,0)",d.lineTo(e[p][s-1].xPos,e[p][s-1].yAxisPos),d.lineTo(e[p][q].xPos,e[p][q].yAxisPos),d.closePath(),d.fillStyle=setOptionValue(!0,!0,1,"COLOR",d,b,e,b.datasets[p].fillColor,c.defaultFillColor,"fillColor",p,s,{animationValue:m.mainVal,xPosLeft:e[p][0].xPos,yPosBottom:Math.max(e[p][0].yAxisPos,e[p][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[p][0].lminvalue_offset),xPosRight:e[p][b.datasets[p].data.length-1].xPos,yPosTop:Math.min(e[p][0].yAxisPos,e[p][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[p][0].lmaxvalue_offset)}),d.fill()),d.beginPath(),prevAnimPc={mainVal:0,subVal:0},q=-1}break;default:d.lineWidth=Math.ceil(d.chartLineScale*setOptionValue(!0,!0,1,"LINEWIDTH",d,b,e,b.datasets[p].datasetStrokeWidth,c.datasetStrokeWidth,"datasetStrokeWidth",p,s,{nullvalue:null})),q==-1?(q=s,d.beginPath(),1==setOptionValue(!0,!0,1,"LINKTYPE",d,b,e,b.datasets[p].linkType,c.linkType,"linkType",p,s,{nullvalue:null})?("undefined"!=typeof e[p][s].yPosOffsetOrigin?d.moveTo(e[p][s].xPos,e[p][s].yAxisPos-m.mainVal*e[p][s].yPosOffsetOrigin):d.moveTo(e[p][q].xPos,e[p][q].xAxisPosY-e[p][0].zeroY),d.lineTo(e[p][s].xPos,e[p][s].yAxisPos-m.mainVal*e[p][s].yPosOffset)):d.moveTo(e[p][s].xPos,e[p][s].yAxisPos-m.mainVal*e[p][s].yPosOffset),A(o,e[p][s].xPos,e[p][s].yAxisPos-m.mainVal*e[p][s].yPosOffset,p),r=e[p][s].xPos):(r=e[p][s].xPos,C(o,d,e[p][s].xPos,e[p][s].yAxisPos-m.mainVal*e[p][s].yPosOffset,c,b,e,p,B(p,s,b,e))),m.subVal>0&&e[p][s].nextNotMissing!=-1&&(c.extrapolateMissing||e[p][s].nextNotMissing==s+1)&&(r=e[p][s].xPos+m.subVal*(e[p][s+1].xPos-e[p][s].xPos),g=e[p][e[p][s+1].prevNotMissing].yAxisPos-e[p][e[p][s+1].prevNotMissing].yPosOffset,h=e[p][e[p][s].nextNotMissing].yAxisPos-e[p][e[p][s].nextNotMissing].yPosOffset,i=g+m.subVal*(h-g),C(o,d,e[p][s].xPos+m.subVal*(e[p][e[p][s].nextNotMissing].xPos-e[p][s].xPos),i,c,b,e,p,B(p,s,b,e)))}if(D(o,d,c,p),d.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",d,b,e,b.datasets[p].datasetStrokeStyle,c.datasetStrokeStyle,"datasetStrokeStyle",p,s,{nullvalue:null}))),d.stroke(),d.setLineDash([]),c.datasetFill&&1!=setOptionValue(!0,!0,1,"LINKTYPE",d,b,e,b.datasets[p].linkType,c.linkType,"linkType",p,s,{nullvalue:null})&&q>=0&&(d.strokeStyle="rgba(0,0,0,0)",d.lineTo(r,e[p][0].xAxisPosY-e[p][0].zeroY),d.lineTo(e[p][q].xPos,e[p][q].xAxisPosY-e[p][0].zeroY),d.closePath(),d.fillStyle=setOptionValue(!0,!0,1,"COLOR",d,b,e,b.datasets[p].fillColor,c.defaultFillColor,"fillColor",p,-1,{animationValue:m.mainVal,xPosLeft:e[p][0].xPos,yPosBottom:Math.max(e[p][0].yAxisPos,e[p][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[p][0].lminvalue_offset),xPosRight:e[p][b.datasets[p].data.length-1].xPos,yPosTop:Math.min(e[p][0].yAxisPos,e[p][0].yAxisPos-(c.animationLeftToRight?1:1*m.mainVal)*e[p][0].lmaxvalue_offset)}),d.fill()),d.restore(),a>=1)for(s=0;s<b.datasets[p].data.length;s++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",d,b,e,b.datasets[p].displayData,c.displayData,"displayData",p,s,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",d,b,e,b.displayData,c.displayData,"displayData",s,-1,{nullvalue:null})&&"undefined"!=typeof b.datasets[p].data[s]&&(m=animationCorrection(a,b,c,p,s,!0),(m.mainVal>0||!c.animationLeftToRight)&&setOptionValue(!0,!0,1,"POINTDOT",d,b,e,void 0,c.pointDot,"pointDot",p,s,{nullvalue:null}))){d.beginPath(),d.fillStyle=setOptionValue(!0,!0,1,"MARKERFILLCOLOR",d,b,e,b.datasets[p].pointColor,c.defaultStrokeColor,"pointColor",p,s,{nullvalue:!0}),d.strokeStyle=setOptionValue(!0,!0,1,"MARKERSTROKESTYLE",d,b,e,b.datasets[p].pointStrokeColor,c.defaultStrokeColor,"pointStrokeColor",p,s,{nullvalue:!0}),d.lineWidth=setOptionValue(!0,!0,d.chartLineScale,"MARKERLINEWIDTH",d,b,e,b.datasets[p].pointDotStrokeWidth,c.pointDotStrokeWidth,"pointDotStrokeWidth",p,s,{nullvalue:!0});var t=setOptionValue(!0,!0,1,"MARKERSHAPE",d,b,e,b.datasets[p].markerShape,c.markerShape,"markerShape",p,s,{nullvalue:!0}),u=setOptionValue(!0,!0,d.chartSpaceScale,"MARKERRADIUS",d,b,e,b.datasets[p].pointDotRadius,c.pointDotRadius,"pointDotRadius",p,s,{nullvalue:!0}),v=setOptionValue(!0,!0,1,"MARKERSTROKESTYLE",d,b,e,b.datasets[p].pointDotStrokeStyle,c.pointDotStrokeStyle,"pointDotStrokeStyle",p,s,{nullvalue:!0});drawMarker(d,e[p][s].xPos,e[p][s].yAxisPos-m.mainVal*e[p][s].yPosOffset,t,u,v)}if(a>=c.animationStopValue)for(s=0;s<b.datasets[p].data.length;s++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",d,b,e,b.datasets[p].displayData,c.displayData,"displayData",p,s,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",d,b,e,b.displayData,c.displayData,"displayData",s,-1,{nullvalue:null})&&"undefined"!=typeof b.datasets[p].data[s]&&(0!=b.datasets[p].mouseDetection&&(jsGraphAnnotate[d.ChartNewId][jsGraphAnnotate[d.ChartNewId].length]=["POINT",p,s,e,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",d,b,e,b.datasets[p].annotateDisplay,c.annotateDisplay,"annotateDisplay",p,s,{nullValue:!0})]),setOptionValue(!0,!0,1,"INGRAPHDATASHOW",d,b,e,b.datasets[p].inGraphDataShow,c.inGraphDataShow,"inGraphDataShow",p,s,{nullValue:!0}))){d.save(),d.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",d,b,e,void 0,c.inGraphDataAlign,"inGraphDataAlign",p,s,{nullValue:!0}),d.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",d,b,e,void 0,c.inGraphDataVAlign,"inGraphDataVAlign",p,s,{nullValue:!0}),d.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",d,b,e,void 0,c.inGraphDataFontStyle,"inGraphDataFontStyle",p,s,{nullValue:!0})+" "+setOptionValue(!0,!0,d.chartTextScale,"INGRAPHDATAFONTSIZE",d,b,e,void 0,c.inGraphDataFontSize,"inGraphDataFontSize",p,s,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",d,b,e,void 0,c.inGraphDataFontFamily,"inGraphDataFontFamily",p,s,{nullValue:!0}),d.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",d,b,e,void 0,c.inGraphDataFontColor,"inGraphDataFontColor",p,s,{nullValue:!0});var w=setOptionValue(!0,!0,d.chartSpaceScale,"INGRAPHDATAPADDINGX",d,b,e,void 0,c.inGraphDataPaddingX,"inGraphDataPaddingX",p,s,{nullValue:!0}),x=setOptionValue(!0,!0,d.chartSpaceScale,"INGRAPHDATAPADDINGY",d,b,e,void 0,c.inGraphDataPaddingY,"inGraphDataPaddingY",p,s,{nullValue:!0}),y=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",d,b,e,void 0,c.inGraphDataTmpl,"inGraphDataTmpl",p,s,{nullValue:!0}),e[p][s],c);d.translate(e[p][s].xPos+w,e[p][s].yAxisPos-m.mainVal*e[p][s].yPosOffset-x);var z=setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",d,b,e,void 0,c.inGraphDataRotate,"inGraphDataRotate",p,s,{nullValue:!0})*(Math.PI/180);d.rotate(z),setTextBordersAndBackground(d,y,setOptionValue(!0,!0,d.chartTextScale,"INGRAPHDATAFONTSIZE",d,b,e,void 0,c.inGraphDataFontSize,"inGraphDataFontSize",p,s,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",d,b,e,void 0,c.inGraphDataBorders,"inGraphDataBorders",p,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",d,b,e,void 0,c.inGraphDataBordersSelection,"inGraphDataBordersSelection",p,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",d,b,e,void 0,c.inGraphDataBordersColor,"inGraphDataBordersColor",p,s,{nullValue:!0}),setOptionValue(!0,!0,d.chartLineScale,"INGRAPHDATABORDERSWIDTH",d,b,e,void 0,c.inGraphDataBordersWidth,"inGraphDataBordersWidth",p,s,{nullValue:!0}),setOptionValue(!0,!0,d.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",d,b,e,void 0,c.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",p,s,{nullValue:!0}),setOptionValue(!0,!0,d.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",d,b,e,void 0,c.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",p,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",d,b,e,void 0,c.inGraphDataBordersStyle,"inGraphDataBordersStyle",p,s,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",d,b,e,void 0,c.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",p,s,{nullValue:!0}),"INGRAPHDATA",c.inGraphDataBordersRadius),d.fillTextMultiLine(y,0,0,d.textBaseline,setOptionValue(!0,!0,d.chartTextScale,"INGRAPHDATAFONTSIZE",d,b,e,void 0,c.inGraphDataFontSize,"inGraphDataFontSize",p,s,{nullValue:!0}),!0,c.detectMouseOnText,d,"INGRAPHDATA_TEXTMOUSE",z,e[p][s].xPos+w,e[p][s].yAxisPos-m.mainVal*e[p][s].yPosOffset-x,p,s),d.restore()}}d.setLineDash([])}function log10(a){return Math.log(a)/Math.LN10}function setRect(a,b){b.clearRect?b.multiGraph||(clear(a),a.clearRect(0,0,width,height)):(clear(a),a.clearRect(0,0,width,height),a.fillStyle=b.savePngBackgroundColor,a.strokeStyle=b.savePngBackgroundColor,a.beginPath(),a.moveTo(0,0),a.lineTo(0,a.canvas.height),a.lineTo(a.canvas.width,a.canvas.height),a.lineTo(a.canvas.width,0),a.lineTo(0,0),a.stroke(),a.fill())}function defMouse(a,b,c){function f(a,b){a.mouseAction.indexOf("/"+b)>=0?a.mouseAction[a.mouseAction.indexOf("/"+b)]=b:a.mouseAction.indexOf(b)<0&&(a.mouseAction[a.mouseAction.length]=b)}function g(a,b){isIE()<9&&0!=isIE()?a.canvas.attachEvent("on"+b.split(" ")[0],function(c){doMouseAction(c,a.ChartNewId,b.split(" ")[0])}):a.canvas.addEventListener(b.split(" ")[0],function(c){doMouseAction(c,a,b.split(" ")[0])},!1)}var d=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";if("undefined"==typeof a.mouseAction)a.mouseAction=[];else for(var e=0;e<a.mouseAction;e++)"/"!=a.mouseAction.substring(0,1)&&(a.mouseAction[e]="/"+a.mouseAction[e]);1==c.savePng&&("mousedown left"==c.savePngFunction?f(a,"mousedown 1"):"mousedown middle"==c.savePngFunction?f(a,"mousedown 2"):"mousedown right"==c.savePngFunction&&f(a,"mousedown 3")),1==c.annotateDisplay&&(0==cursorDivCreated&&(oCursor=new makeCursorObj("divCursor")),"mousedown left"==c.annotateFunction?f(a,"mousedown 1"):"mousedown middle"==c.annotateFunction?f(a,"mousedown 2"):"mousedown right"==c.annotateFunction?f(a,"mousedown 3"):"mousemove"==c.annotateFunction&&f(a,"mousemove")),1==c.highLight&&("mousedown left"==c.highLightMouseFunction?f(a,"mousedown 1"):"mousedown middle"==c.highLightMouseFunction?f(a,"mousedown 2"):"mousedown right"==c.highLightMouseFunction?f(a,"mousedown 3"):"mousemove"==c.highLightMouseFunction&&f(a,"mousemove")),"function"==typeof c.mouseMove&&f(a,"mousemove"),"function"==typeof c.mouseDownLeft&&f(a,"mousedown 1"),"function"==typeof c.mouseDownMiddle&&f(a,"mousedown 2"),"function"==typeof c.mouseDownRight&&f(a,"mousedown 3"),"function"==typeof c.mouseWheel&&f(a,d),"function"==typeof c.mouseOut&&f(a,"mouseout"),"function"==typeof c.mouseDblClick&&f(a,"dblclick");var h=!1;(a.mouseAction.indexOf("mousemove")>=0&&a.mouseAction.indexOf("/mousemove")<0||a.mouseAction.indexOf("mouseout")>=0&&a.mouseAction.indexOf("/mouseout")<0)&&(f(a,"mouseout"),h=!0,g(a,"mouseout")),(a.mouseAction.indexOf("mousemove")>=0&&a.mouseAction.indexOf("/mousemove")<0||a.mouseAction.indexOf(d)>=0&&a.mouseAction.indexOf("/"+d)<0)&&(f(a,d),h=!0,g(a,d)),a.mouseAction.indexOf("mousemove")>=0&&a.mouseAction.indexOf("/mousemove")<0&&(h=!0,g(a,"mousemove")),a.mouseAction.indexOf("dblclick")>=0&&a.mouseAction.indexOf("/dblclick")<0&&(h=!0,g(a,"dblclick")),(a.mouseAction.indexOf("mousedown 1")>=0&&a.mouseAction.indexOf("/mousedown 1")<0||a.mouseAction.indexOf("mousedown 2")>=0&&a.mouseAction.indexOf("/mousedown 2")<0||a.mouseAction.indexOf("mousedown 3")>=0&&a.mouseAction.indexOf("/mousedown 3")<0)&&(h=!0,g(a,"mousedown")),(0==c.contextMenu||a.mouseAction.indexOf("mousedown 3")>=0)&&a.mouseAction.indexOf("/removeContextMenu")<0&&(a.mouseAction[a.mouseAction.length]="removeContextMenu",a.canvas.oncontextmenu=function(a){a.preventDefault()}),inMouseAction[a.ChartNewId]=!1,mouseActionData[a.ChartNewId]={data:b,config:c,prevShow:-1}}var chart=this,animationOptions={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0==a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1==a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0==a?0:1==a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;return 0==a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c)))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;return 0==a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin((1*a-b)*(2*Math.PI)/c)+1)},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;return 0==a?0:2==(a/=.5)?1:(c||(c=1*(.3*1.5)),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),a<1?-.5*(d*Math.pow(2,10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c)):d*Math.pow(2,-10*(a-=1))*Math.sin((1*a-b)*(2*Math.PI)/c)*.5+1)},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*(a*a*(((b*=1.525)+1)*a-b)):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-animationOptions.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?1*(7.5625*a*a):a<2/2.75?1*(7.5625*(a-=1.5/2.75)*a+.75):a<2.5/2.75?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return a<.5?.5*animationOptions.easeInBounce(2*a):.5*animationOptions.easeOutBounce(2*a-1)+.5}},width=context.canvas.width,height=context.canvas.height;this.Doughnut=function(a,b){chart.Doughnut.defaults=chart.defaults.PieAndDoughnutV2,chart.Doughnut.defaults=mergeChartConfig(chart.defaults.PieAndDoughnut,chart.Doughnut.defaults),isIE()<9&&0!=isIE()&&(chart.Doughnut.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Doughnut.defaults)),chart.Doughnut.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Doughnut.defaults),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptions),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptionsDoughnut);var c=b?mergeChartConfig(chart.Doughnut.defaults,b):chart.Doughnut.defaults;return new Doughnut(a,c,context)},this.PolarArea=function(a,b){chart.PolarArea.defaults=chart.defaults.PolarAreaV2,chart.PolarArea.defaults=mergeChartConfig(chart.defaults.PolarArea,chart.PolarArea.defaults),isIE()<9&&0!=isIE()&&(chart.PolarArea.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.PolarArea.defaults)),chart.PolarArea.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.PolarArea.defaults),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptions),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptionsPolarArea);var c=b?mergeChartConfig(chart.PolarArea.defaults,b):chart.PolarArea.defaults;return new PolarArea(a,c,context)},this.PolarArea=function(a,b){chart.PolarArea.defaults=chart.defaults.PolarAreaV2,chart.PolarArea.defaults=mergeChartConfig(chart.defaults.PolarArea,chart.PolarArea.defaults),isIE()<9&&0!=isIE()&&(chart.PolarArea.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.PolarArea.defaults)),chart.PolarArea.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.PolarArea.defaults),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptions),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptionsPolarArea);var c=b?mergeChartConfig(chart.PolarArea.defaults,b):chart.PolarArea.defaults;return new PolarArea(a,c,context)},this.Radar=function(a,b){chart.Radar.defaults={highLightSet:{pointDotRadius:15,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,yAxisMinimumInterval:"none",scaleGridLinesStep:1,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!1,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineStyle:"solid",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointDotStrokeStyle:"solid",datasetFill:!0,datasetStrokeWidth:2,datasetStrokeStyle:"solid",animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10,startAngle:90},isIE()<9&&0!=isIE()&&(chart.Radar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Radar.defaults)),chart.Radar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Radar.defaults),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptions),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptionsRadar);var c=b?mergeChartConfig(chart.Radar.defaults,b):chart.Radar.defaults;return new Radar(a,c,context)},this.Pie=function(a,b){chart.Pie.defaults=chart.defaults.PieAndDoughnutV2,chart.Pie.defaults=mergeChartConfig(chart.defaults.PieAndDoughnut,chart.Pie.defaults),isIE()<9&&0!=isIE()&&(chart.Pie.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Pie.defaults)),chart.Pie.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Pie.defaults),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptions),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptionsPie);var c=b?mergeChartConfig(chart.Pie.defaults,b):chart.Pie.defaults;return new Pie(a,c,context)},this.Doughnut=function(a,b){chart.Doughnut.defaults=chart.defaults.PieAndDoughnutV2,chart.Doughnut.defaults=mergeChartConfig(chart.defaults.PieAndDoughnut,chart.Doughnut.defaults),isIE()<9&&0!=isIE()&&(chart.Doughnut.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Doughnut.defaults)),chart.Doughnut.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Doughnut.defaults),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptions),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptionsDoughnut);var c=b?mergeChartConfig(chart.Doughnut.defaults,b):chart.Doughnut.defaults;return new Doughnut(a,c,context)},this.Line=function(a,b){chart.Line.defaults={inGraphDataShow:!1,highLightSet:{pointDotRadius:15,pointDot:!0},inGraphDataPaddingX:3,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLabel2:"<%=value%>",scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",rotateTLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,bezierCurve:!0,linkType:0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,datasetStrokeStyle:"solid",datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",extrapolateMissingData:!0,onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10,xAxisMiddle:!1},isIE()<9&&0!=isIE()&&(chart.Line.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Line.defaults)),chart.Line.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptions),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptionsLine);var c=b?mergeChartConfig(chart.Line.defaults,b):chart.Line.defaults;return new Line(a,c,context)},this.StackedBar=function(a,b){chart.StackedBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:-3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"top",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleLabel2:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",rotateTLabels:"smart",scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,barShowStroke:!0,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,bezierCurve:!0,linkType:0,bezierCurveTension:.4,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10},isIE()<9&&0!=isIE()&&(chart.StackedBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.StackedBar.defaults)),chart.StackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptions),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptionsStackedBar);var c=b?mergeChartConfig(chart.StackedBar.defaults,b):chart.StackedBar.defaults;return new StackedBar(a,c,context)},this.HorizontalStackedBar=function(a,b){chart.HorizontalStackedBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:-3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"right",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",rotateTLabels:"smart",barShowStroke:!0,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},isIE()<9&&0!=isIE()&&(chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.HorizontalStackedBar.defaults)),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptionsHorizontalStackedBar);var c=b?mergeChartConfig(chart.HorizontalStackedBar.defaults,b):chart.HorizontalStackedBar.defaults;
return new HorizontalStackedBar(a,c,context)},this.Bar=function(a,b){chart.Bar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleLabel2:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleGridLineStyle:"solid",showYAxisMin:!0,rotateLabels:"smart",rotateTLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:!0,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,complementaryBar:!1,complementaryBarFullHeight:!1,complementaryColor:"rgba(100,100,100,0.3)",complementaryStrokeColor:"rgba(100,100,100,0.1)",pointDot:!0,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,extrapolateMissingData:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,bezierCurve:!0,linkType:0,bezierCurveTension:.4,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10},isIE()<9&&0!=isIE()&&(chart.Bar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Bar.defaults)),chart.Bar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptions),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptionsBar);var c=b?mergeChartConfig(chart.Bar.defaults,b):chart.Bar.defaults;return new Bar(a,c,context)},this.HorizontalBar=function(a,b){chart.HorizontalBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:!0},inGraphDataShow:!1,inGraphDataPaddingX:3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",rotateTLabels:"smart",barShowStroke:!0,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,complementaryBar:!1,complementaryColor:"rgba(100,100,100,0.3)",complementaryStrokeColor:"rgba(100,100,100,0.1)",animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},isIE()<9&&0!=isIE()&&(chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.HorizontalBar.defaults)),chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptionsHorizontalBar);var c=b?mergeChartConfig(chart.HorizontalBar.defaults,b):chart.HorizontalBar.defaults;return new HorizontalBar(a,c,context)},chart.defaults={},chart.defaults.IExplorer8={annotateBackgroundColor:"black",annotateFontColor:"white"},chart.defaults.commonOptions={generateConvertedData:!1,displayData:!0,showZeroValue:!0,chartTextScale:1,chartLineScale:1,chartSpaceScale:1,multiGraph:!1,clearRect:!0,dynamicDisplay:!1,dynamicDisplayXPartOfChart:.5,dynamicDisplayYPartOfChart:.5,animationForceSetTimeOut:!1,graphSpaceBefore:5,graphSpaceAfter:5,canvasBorders:!1,canvasBackgroundColor:"none",canvasBordersRadius:0,canvasBordersSelection:15,canvasBordersWidth:3,canvasBordersStyle:"solid",canvasBordersColor:"black",zeroValue:1e-10,graphTitle:"",graphTitleAlign:"center",graphTitleShift:10,graphTitleFontFamily:"'Arial'",graphTitleFontSize:24,graphTitleFontStyle:"bold",graphTitleFontColor:"#666",graphTitleSpaceBefore:5,graphTitleSpaceAfter:5,graphTitleBorders:!1,graphTitleBordersRadius:0,graphTitleBordersColor:"black",graphTitleBordersXSpace:3,graphTitleBordersYSpace:3,graphTitleBordersSelection:15,graphTitleBordersWidth:1,graphTitleBordersStyle:"solid",graphTitleBackgroundColor:"none",graphSubTitle:"",graphSubTitleAlign:"center",graphSubTitleShift:10,graphSubTitleFontFamily:"'Arial'",graphSubTitleFontSize:18,graphSubTitleFontStyle:"normal",graphSubTitleFontColor:"#666",graphSubTitleSpaceBefore:5,graphSubTitleSpaceAfter:5,graphSubTitleBorders:!1,graphSubTitleBordersColor:"black",graphSubTitleBordersRadius:0,graphSubTitleBordersXSpace:3,graphSubTitleBordersYSpace:3,graphSubTitleBordersSelection:15,graphSubTitleBordersWidth:1,graphSubTitleBordersStyle:"solid",graphSubTitleBackgroundColor:"none",footNote:"footNote",footNoteAlign:"left",footNoteShift:10,footNoteFontFamily:"'Arial'",footNoteFontSize:8,footNoteFontStyle:"bold",footNoteFontColor:"#666",footNoteSpaceBefore:5,footNoteSpaceAfter:5,footNoteBorders:!1,footNoteBordersColor:"black",footNoteBordersRadius:0,footNoteBordersXSpace:3,footNoteBordersYSpace:3,footNoteBordersSelection:15,footNoteBordersWidth:1,footNoteBordersStyle:"solid",footNoteBackgroundColor:"none",legend:!1,legendWhenToDraw:"all",showSingleLegend:!1,maxLegendCols:999,maxLegendLines:999,legendPosY:4,legendPosX:-2,legendFontFamily:"'Arial'",legendFontSize:12,legendFontStyle:"normal",legendFontColor:"#666",legendBlockSize:15,legendBlockRadius:0,legendBorders:!0,legendBordersStyle:"solid",legendBordersWidth:1,legendBordersSelection:15,legendBordersColors:"#666",legendBordersRadius:0,legendBordersSpaceBefore:5,legendBordersSpaceAfter:5,legendBordersSpaceLeft:5,legendBordersSpaceRight:5,legendSpaceBeforeText:5,legendSpaceAfterText:5,legendSpaceLeftText:5,legendSpaceRightText:5,legendSpaceBetweenTextVertical:5,legendSpaceBetweenTextHorizontal:5,legendSpaceBetweenBoxAndText:5,legendFillColor:"rgba(0,0,0,0)",legendXPadding:0,legendYPadding:0,inGraphDataBorders:!1,inGraphDataBordersRadius:0,inGraphDataBordersColor:"black",inGraphDataBordersXSpace:3,inGraphDataBordersYSpace:3,inGraphDataBordersSelection:15,inGraphDataBordersWidth:1,inGraphDataBordersStyle:"solid",inGraphDataBackgroundColor:"none",annotateDisplay:!1,annotateRelocate:!1,savePng:!1,savePngOutput:"NewWindow",savePngFunction:"mousedown right",savePngBackgroundColor:"WHITE",annotateFunction:"mousemove",annotateFontFamily:"'Arial'",annotateBorder:"none",annotateBorderRadius:"2px",annotateBackgroundColor:"rgba(0,0,0,0.8)",annotateFontSize:12,annotateFontColor:"white",annotateFontStyle:"normal",annotatePadding:"3px",annotateClassName:"",annotateFunctionIn:null,annotateFunctionOut:null,detectMouseOnText:!1,crossText:[""],crossTextIter:["all"],crossTextOverlay:[!0],crossTextFontFamily:["'Arial'"],crossTextFontSize:[12],crossTextFontStyle:["normal"],crossTextFontColor:["rgba(220,220,220,1)"],crossTextRelativePosX:[2],crossTextRelativePosY:[2],crossTextBaseline:["middle"],crossTextAlign:["center"],crossTextPosX:[0],crossTextPosY:[0],crossTextAngle:[0],crossTextFunction:null,crossTextBorders:[!1],crossTextBordersColor:["black"],crossTextBordersRadius:[0],crossTextBordersXSpace:[3],crossTextBordersYSpace:[3],crossTextBordersSelection:[15],crossTextBordersWidth:[1],crossTextBordersStyle:["solid"],crossTextBackgroundColor:["none"],crossImage:[void 0],crossImageIter:["all"],crossImageOverlay:[!0],crossImageRelativePosX:[2],crossImageRelativePosY:[2],crossImageBaseline:["middle"],crossImageAlign:["center"],crossImagePosX:[0],crossImagePosY:[0],crossImageAngle:[0],spaceTop:0,spaceBottom:0,spaceRight:0,spaceLeft:0,decimalSeparator:".",thousandSeparator:"",currency:"€",currencyPosition:"after",roundNumber:"none",roundPct:-1,templatesOpenTag:"<%=",templatesCloseTag:"%>",fmtV1:"none",fmtV2:"none",fmtV3:"none",fmtV4:"none",fmtV5:"none",fmtV6:"none",fmtV6T:"none",fmtV7:"none",fmtV8:"none",fmtV8T:"none",fmtV9:"none",fmtV10:"none",fmtV11:"none",fmtV12:"none",fmtV13:"none",fmtV14:"none",fmtV15:"none",fmtXLabel:"none",fmtTopXLabel:"none",fmtYLabel:"none",fmtYLabel2:"none",fmtLegend:"none",animationStartValue:0,animationStopValue:1,animationCount:1,animationPauseTime:5,animationBackward:!1,animationStartWithDataset:1,animationStartWithData:1,animationLeftToRight:!1,animationByDataset:!1,defaultStrokeColor:"rgba(220,220,220,1)",defaultFillColor:"rgba(220,220,220,0.5)",defaultLineWidth:2,graphMaximized:!1,contextMenu:!0,mouseDownRight:null,mouseDownLeft:null,mouseDownMiddle:null,mouseMove:null,mouseOut:null,mouseDblClick:null,mouseWheel:null,highLight:!1,highLightMouseFunction:"mousemove",highLightFullLine:!1,highLightRerunEndFunction:!1,savePngName:"canvas",responsive:!1,responsiveMinWidth:0,responsiveMinHeight:0,responsiveMaxWidth:9999999,responsiveMaxHeight:9999999,maintainAspectRatio:!0,responsiveScaleContent:!1,responsiveWindowInitialWidth:!1,markerShape:"circle",barStrokeWidth:2,initFunction:null,beforeDrawFunction:null,endDrawDataFunction:null,endDrawScaleFunction:null},chart.defaults.PolarAreaV1={highLightSet:{color:"red"},inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>"},chart.defaults.PolarAreaV2={highLightSet:{fillColor:"red"},inGraphDataTmpl:"<%=(data.labels.length == 1 ? (v1 == '' ? '' : v1+':') + v3 + ' (' + v6 + ' %)' : (i==0 ? v2 : '') )%>",annotateLabel:"<%=(v2 == '' ? '' : v2) + (v2!='' && v1 !='' ? ' - ' : '')+(v1 == '' ? '' : v1)+(v2!='' || v1 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"},chart.defaults.PolarArea={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,scaleOverlay:!0,scaleOverride:!1,scaleOverride2:!1,forceSecondScale:!1,scaleGridLinesStep:1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleLineStyle:"solid",scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,animation:!0,animationByData:"ByArc",animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,startAngle:90,totalAmplitude:360,radiusScale:1},chart.defaults.PieAndDoughnutV1={inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>"},chart.defaults.PieAndDoughnutV2={inGraphDataTmpl:"<%=(data.labels.length == 1 ? (v1 == '' ? '' : v1+':') + v3 + ' (' + v6 + ' %)' : (i==0 ? v2 : '') )%>",annotateLabel:"<%=(v2 == '' ? '' : v2) + (v2!='' && v1 !='' ? ' - ' : '')+(v1 == '' ? '' : v1)+(v2!='' || v1 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"},chart.defaults.PieAndDoughnut={highLightSet:{expandOutRadius:.1,expandInRadius:-.1},inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,inGraphDataMinimumAngle:0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationByData:!1,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,startAngle:90,totalAmplitude:360,radiusScale:1,radiusDataWeight:1,radiusSpaceWeight:.3},chart.defaults.xyAxisCommonOptions={maxBarWidth:-1,drawXScaleLine:[{position:"bottom"}],yAxisMinimumInterval:"none",yAxisMinimumInterval2:"none",yScaleLabelsMinimumWidth:0,xScaleLabelsMinimumWidth:0,yAxisLeft:!0,yAxisRight:!1,xAxisBottom:!0,xAxisTop:!1,xAxisSpaceBetweenLabels:5,fullWidthGraph:!1,yAxisLabel:"",yAxisLabel2:"",yAxisFontFamily:"'Arial'",yAxisFontSize:16,yAxisFontStyle:"normal",yAxisFontColor:"#666",yAxisLabelSpaceRight:5,yAxisLabelSpaceLeft:5,yAxisSpaceRight:5,yAxisSpaceLeft:5,yAxisLabelBorders:!1,yAxisLabelBordersColor:"black",yAxisLabelBordersRadius:0,yAxisLabelBordersXSpace:3,yAxisLabelBordersYSpace:3,yAxisLabelBordersSelection:15,yAxisLabelBordersWidth:1,yAxisLabelBordersStyle:"solid",yAxisLabelBackgroundColor:"none",xAxisLabel:"",xAxisLabel2:"",xTAxisLabel:"",xAxisFontFamily:"'Arial'",xAxisFontSize:16,xAxisFontStyle:"normal",xAxisFontColor:"#666",xAxisLabelSpaceBefore:5,xAxisLabelSpaceAfter:5,xAxisSpaceBefore:5,xAxisSpaceAfter:5,xAxisLabelBorders:!1,xAxisLabelBordersColor:"black",xAxisLabelBordersRadius:0,xAxisLabelBordersXSpace:3,xAxisLabelBordersYSpace:3,xAxisLabelBordersSelection:15,xAxisLabelBordersWidth:1,xAxisLabelBordersStyle:"solid",xAxisLabelBackgroundColor:"none",showXLabels:1,firstLabelToShow:1,showYLabels:1,firstYLabelToShow:1,yAxisUnit:"",yAxisUnit2:"",yAxisUnitFontFamily:"'Arial'",yAxisUnitFontSize:8,yAxisUnitFontStyle:"normal",yAxisUnitFontColor:"#666",yAxisUnitSpaceBefore:5,yAxisUnitSpaceAfter:5,yAxisUnitBorders:!1,yAxisUnitBordersColor:"black",yAxisUnitBordersradius:0,yAxisUnitBordersXSpace:3,yAxisUnitBordersYSpace:3,yAxisUnitBordersSelection:15,yAxisUnitBordersWidth:1,yAxisUnitBordersStyle:"solid",yAxisUnitBackgroundColor:"none",scaleMinorTickWidth:1,scaleMinorTickColor:"rgba(0,0,0,.05)",scaleMinorTickStyle:"solid",scaleMinorTickSizeTop:3,scaleMinorTickSizeBottom:3,scaleMinorTickSizeRight:3,scaleMinorTickSizeLeft:3,scaleMinorTickHorizontalCount:0,scaleMinorTickVerticalCount:0,scaleMinorTickVerticalLines:!0,scaleMinorTickHorizontalLines:!0,tickColor:"gridLine",minorTickColor:"gridLine"};var clear=function(a){a.clearRect(0,0,width,height)},MPolarArea=function(a,b,c){function y(d){var g=0,h=o[0][0].firstAngle;1*b.animationStartWithData>1&&1*b.animationStartWithData-1<a.length&&(g=o[b.animationStartWithData-1].startAngle-o[0][0].firstAngle,h=o[b.animationStartWithData-1].startAngle),prevAngle=o[0][0].firstAngle;for(var i=0;i<a.labels.length;i++){var j=1,k=1;b.animation&&(b.animateScale&&(j=d),b.animateRotate&&(k=d));for(var l=0;l<a.datasets.length;l++)if(correctedRotateAnimation=animationCorrection(k,a,b,l,-1,!1).mainVal,"undefined"!=typeof a.datasets[l].data[i]){if(c.beginPath(),"ByArc"==b.animationByData)endAngle=o[l][i].startAngle+correctedRotateAnimation*o[l][i].segmentAngle,c.arc(m,n,j*o[l][i].radiusOffset,o[l][i].startAngle,endAngle,!1);else if(b.animationByData)if(l<1*b.animationStartWithData-1)c.arc(midPieX,midPieY,j*o[l][i].radiusOffset,o[l][i].startAngle,o[l][i].endAngle,!1);else{if(!(o[l][i].startAngle<=h+correctedRotateAnimation*(2*Math.PI-g)))continue;endAngle=o[l][i].endAngle,o[l][i].endAngle>h+correctedRotateAnimation*(2*Math.PI-g)&&(endAngle=h+correctedRotateAnimation*(2*Math.PI-g)),c.arc(midPieX,midPieY,j*o[l][i].radiusOffset,o[l][i].startAngle,endAngle,!1)}else c.arc(midPieX,midPieY,j*o[l][i].radiusOffset,prevAngle,prevAngle+correctedRotateAnimation*(o[l][i].endAngle-o[l][i].startAngle),!1),prevAngle+=correctedRotateAnimation*(o[l][i].endAngle-o[l][i].startAngle);c.lineTo(m,n),c.closePath(),c.fillStyle=setOptionValue(!0,!0,1,"FILLCOLOR",c,a,o,a.datasets[l].fillColor,b.defaultFillColor,"fillColor",l,i,{animationDecimal:d,scaleAnimation:j}),c.fill(),"merge"==b.segmentShowStroke?(c.lineWidth=0,c.strokeStyle=setOptionValue(!0,!0,1,"FILLCOLOR",c,a,o,a.datasets[l].fillColor,b.defaultFillColor,"fillColor",l,i,{animationDecimal:d,scaleAnimation:j}),c.setLineDash([]),c.stroke()):b.segmentShowStroke&&(c.strokeStyle=b.segmentStrokeColor,c.lineWidth=Math.ceil(c.chartLineScale*b.segmentStrokeWidth),c.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"SEGMENTSTROKESTYLE",c,a,o,a.datasets[l].segmentStrokeStyle,b.segmentStrokeStyle,"segmentStrokeStyle",l,i,{animationDecimal:d,scaleAnimation:j}))),c.stroke(),c.setLineDash([]))}}if(d>=b.animationStopValue)for(l=0;l<a.datasets.length;l++)for(i=0;i<a.labels.length;i++)if("undefined"!=typeof a.datasets[l].data[i]&&(jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["MARC",l,i,o,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",c,a,o,a.datasets[l].annotateDisplay,b.annotateDisplay,"annotateDisplay",l,i,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",c,a,o,a.datasets[l].inGraphDataShow,b.inGraphDataShow,"inGraphDataShow",l,i,{nullValue:!0}))){1==setOptionValue(!0,!0,1,"INGRAPHDATAANGLEPOSITION",c,a,o,void 0,b.inGraphDataAnglePosition,"inGraphDataAnglePosition",l,i,{nullValue:!0})?posAngle=o[l][i].realStartAngle+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINANGLE",c,a,o,void 0,b.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",l,i,{nullValue:!0})*(Math.PI/180):2==setOptionValue(!0,!0,1,"INGRAPHDATAANGLEPOSITION",c,a,o,void 0,b.inGraphDataAnglePosition,"inGraphDataAnglePosition",l,i,{nullValue:!0})?posAngle=(2*o[l][i].realStartAngle-o[l][i].segmentAngle)/2+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINANGLE",c,a,o,void 0,b.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",l,i,{nullValue:!0})*(Math.PI/180):3==setOptionValue(!0,!0,1,"INGRAPHDATAANGLEPOSITION",c,a,o,void 0,b.inGraphDataAnglePosition,"inGraphDataAnglePosition",l,i,{nullValue:!0})&&(posAngle=o[l][i].realStartAngle-o[l][i].segmentAngle+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINANGLE",c,a,o,void 0,b.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",l,i,{nullValue:!0})*(Math.PI/180)),1==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",c,a,o,void 0,b.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",l,i,{nullValue:!0})?labelRadius=0+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",c,a,o,void 0,b.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",l,i,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",c,a,o,void 0,b.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",l,i,{nullValue:!0})?labelRadius=o[l][i].radiusOffset/2+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",c,a,o,void 0,b.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",l,i,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",c,a,o,void 0,b.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",l,i,{nullValue:!0})?labelRadius=o[l][i].radiusOffset+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",c,a,o,void 0,b.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",l,i,{nullValue:!0}):4==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",c,a,o,void 0,b.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",l,i,{nullValue:!0})&&(labelRadius=e*f.steps+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",c,a,o,void 0,b.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",l,i,{nullValue:!0})),c.save(),"off-center"==setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",c,a,o,void 0,b.inGraphDataAlign,"inGraphDataAlign",l,i,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,o,void 0,b.inGraphDataRotate,"inGraphDataRotate",l,i,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?c.textAlign="left":c.textAlign="right":"to-center"==setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",c,a,o,void 0,b.inGraphDataAlign,"inGraphDataAlign",l,i,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,o,void 0,b.inGraphDataRotate,"inGraphDataRotate",l,i,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?c.textAlign="right":c.textAlign="left":c.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",c,a,o,void 0,b.inGraphDataAlign,"inGraphDataAlign",l,i,{nullValue:!0}),"off-center"==setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",c,a,o,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",l,i,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="top":c.textBaseline="bottom":"to-center"==setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",c,a,o,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",l,i,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="bottom":c.textBaseline="top":c.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",c,a,o,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",l,i,{nullValue:!0}),c.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",c,a,o,void 0,b.inGraphDataFontStyle,"inGraphDataFontStyle",l,i,{nullValue:!0})+" "+setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,o,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",l,i,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",c,a,o,void 0,b.inGraphDataFontFamily,"inGraphDataFontFamily",l,i,{nullValue:!0}),c.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",c,a,o,void 0,b.inGraphDataFontColor,"inGraphDataFontColor",l,i,{nullValue:!0});var p=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",c,a,o,void 0,b.inGraphDataTmpl,"inGraphDataTmpl",l,i,{nullValue:!0}),o[l][i],b);c.translate(m+labelRadius*Math.cos(posAngle),n-labelRadius*Math.sin(posAngle));var q=0;q="inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,o,void 0,b.inGraphDataRotate,"inGraphDataRotate",l,i,{nullValue:!0})?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,o,void 0,b.inGraphDataRotate,"inGraphDataRotate",l,i,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,o,void 0,b.inGraphDataRotate,"inGraphDataRotate",l,i,{nullValue:!0})*(Math.PI/180),c.rotate(q),setTextBordersAndBackground(c,p,setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,o,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",l,i,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",c,a,o,void 0,b.inGraphDataBorders,"inGraphDataBorders",l,i,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",c,a,o,void 0,b.inGraphDataBordersSelection,"inGraphDataBordersSelection",l,i,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",c,a,o,void 0,b.inGraphDataBordersColor,"inGraphDataBordersColor",l,i,{nullValue:!0}),setOptionValue(!0,!0,c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,o,void 0,b.inGraphDataBordersWidth,"inGraphDataBordersWidth",l,i,{nullValue:!0}),setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,o,void 0,b.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",l,i,{nullValue:!0}),setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,o,void 0,b.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",l,i,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",c,a,o,void 0,b.inGraphDataBordersStyle,"inGraphDataBordersStyle",l,i,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",c,a,o,void 0,b.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",l,i,{nullValue:!0}),"INGRAPHDATA",b.inGraphDataBordersRadius),c.fillTextMultiLine(p,0,0,c.textBaseline,setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,o,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",l,i,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",q,m+labelRadius*Math.cos(posAngle),n-labelRadius*Math.sin(posAngle),l,i),c.restore()}}function z(){for(var a=0;a<f.steps;a++)if(b.scaleShowLine&&(a+1)%b.scaleGridLinesStep==0&&(c.beginPath(),c.arc(m,n,e*(a+1),4*Math.PI-r,4*Math.PI-s,!0),c.strokeStyle=b.scaleLineColor,c.lineWidth=Math.ceil(c.chartLineScale*b.scaleLineWidth),c.setLineDash(lineStyleFn(b.scaleLineStyle)),c.stroke(),c.setLineDash([])),b.scaleShowLabels){Math.abs(b.totalAmplitude-360)<b.zeroValue?scaleAngle=Math.PI/2:scaleAngle=(r+s)/2,c.textAlign="center",c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily;var d=f.labels[a+1];if(b.scaleShowLabelBackdrop){var g=c.measureTextMultiLine(d,Math.ceil(c.chartTextScale*b.scaleFontSize));c.fillStyle=b.scaleBackdropColor,c.beginPath(),c.rect(Math.round(m+Math.cos(scaleAngle)*(e*(a+1))-g/2-Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingX)),Math.round(n-Math.sin(scaleAngle)*(e*(a+1))-.5*Math.ceil(c.chartTextScale*b.scaleFontSize)-Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingY)),Math.round(g+2*Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingX)),Math.round(Math.ceil(c.chartTextScale*b.scaleFontSize)+2*Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingY))),c.fill()}c.textBaseline="middle",c.fillStyle=b.scaleFontColor,c.fillTextMultiLine(d,m+Math.cos(scaleAngle)*(e*(a+1)),n-Math.sin(scaleAngle)*(e*(a+1)),c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"SCALE_TEXTMOUSE",0,0,0,a,-1)}}function A(){for(var d=-Number.MAX_VALUE,e=Number.MAX_VALUE,f=0;f<a.datasets.length;f++)for(j=0;j<a.labels.length;j++)"undefined"!=typeof a.datasets[f].data[j]&&(1*a.datasets[f].data[j]>d&&(d=1*a.datasets[f].data[j]),1*a.datasets[f].data[j]<e&&(e=1*a.datasets[f].data[j]));d<e&&(d=0,e=0),Math.abs(d-e)<b.zeroValue&&(Math.abs(d)<b.zeroValue&&(d=.9),d>0?(d=1.1*d,e=.9*e):(d=.9*d,e=1.1*e)),"function"==typeof b.graphMin?e=setOptionValue(!0,!0,1,"GRAPHMIN",c,a,o,void 0,b.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(b.graphMin)||(e=b.graphMin),"function"==typeof b.graphMax?d=setOptionValue(!0,!0,1,"GRAPHMAX",c,a,o,void 0,b.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(b.graphMax)||(d=b.graphMax);var i=Math.floor(h/(.66*g)),k=Math.floor(h/g*.5);return d<e&&(e=d-1),{maxValue:d,minValue:e,maxSteps:i,minSteps:k}}var e,f,g,h,i,k,l,m,n;if(c.tpchart="PolarArea",c.tpdata=0,init_and_start(c,a,b)){var o=initPassVariableData_part1(a,b,c),p=((b.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);b.logarithmic=!1,b.logarithmic2=!1;var q=((b.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);q<=b.zeroValue&&(q=2*Math.PI);var r=(p-q+4*Math.PI)%(2*Math.PI),s=r+q;if(i=A(),k=b.scaleShowLabels?b.scaleLabel:"",b.scaleOverride){var t=setOptionValue(!0,!0,1,"SCALESTARTVALUE",c,a,o,void 0,b.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),u=setOptionValue(!0,!0,1,"SCALESTEPS",c,a,o,void 0,b.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),v=setOptionValue(!0,!0,1,"SCALESTEPWIDTH",c,a,o,void 0,b.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});f={steps:u,stepValue:v,graphMin:t,graphMax:t+u*v,labels:[]},populateLabels(1,b,k,f.labels,f.steps,t,f.graphMax,v),l=setMeasures(a,b,c,c.canvas.height,c.canvas.width,f.labels,null,!0,!1,!1,!0,"PolarArea")}else f=calculateScale(1,b,i.maxSteps,i.minSteps,i.maxValue,i.minValue,k),l=setMeasures(a,b,c,c.canvas.height,c.canvas.width,f.labels,null,!0,!1,!1,!0,"PolarArea");var w=f.graphMin+f.steps*f.stepValue,x=calculatePieDrawingSize(c,l,b,a,o);return m=x.midPieX,n=x.midPieY,e=Math.floor(x.radius/f.steps),e>0?(initPassVariableData_part2(o,a,b,c,{midPosX:m,midPosY:n,int_radius:0,ext_radius:e*f.steps,calculatedScale:f,scaleHop:e,outerVal:w}),animationLoop(b,l.legendMsr,z,y,c,l.clrx,l.clry,l.clrwidth,l.clrheight,m,n,m-(Min([l.availableHeight,l.availableWidth])/2-5),n+(Min([l.availableHeight,l.availableWidth])/2-5),a,o)):(testRedraw(c,a,b),c.firstPass=9),{data:a,config:b,ctx:c}}},PolarArea=function(a,b,c){return"undefined"!=typeof a.length?MPolarArea(convertData(a,b.generateConvertedData),b,c):MPolarArea(a,b,c)},Radar=function(a,b,c){function r(d){var e=2*Math.PI/a.datasets[0].data.length;c.save();for(var f=0;f<a.datasets.length;f++){for(var g=-1,h=0;h<a.datasets[f].data.length;h++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,n,a.datasets[f].displayData,b.displayData,"displayData",f,h,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,n,a.displayData,b.displayData,"displayData",h,-1,{nullvalue:null})){var i=animationCorrection(d,a,b,f,h,!1).animVal;i>1&&(i-=1),"undefined"!=typeof a.datasets[f].data[h]&&(g==-1?(c.beginPath(),c.moveTo(l+i*n[f][h].offsetX,m-i*n[f][h].offsetY),g=h):c.lineTo(l+i*n[f][h].offsetX,m-i*n[f][h].offsetY))}if(c.closePath(),b.datasetFill?c.fillStyle=setOptionValue(!0,!0,1,"COLOR",c,a,n,a.datasets[f].fillColor,b.defaultFillColor,"fillColor",f,-1,{animationValue:i,midPosX:n[f][0].midPosX,midPosY:n[f][0].midPosY,ext_radius:(b.animationLeftToRight?1:i)*n[f][0].calculated_offset_max}):c.fillStyle="rgba(0,0,0,0)",c.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",c,a,n,a.datasets[f].strokeColor,b.defaultStrokeColor,"strokeColor",f,-1,{nullvalue:null}),c.lineWidth=Math.ceil(c.chartLineScale*setOptionValue(!0,!0,1,"LINEWIDTH",c,a,n,a.datasets[f].datasetStrokeWidth,b.datasetStrokeWidth,"datasetStrokeWidth",f,-1,{nullvalue:null})),c.fill(),c.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"LINEDASH",c,a,n,a.datasets[f].datasetStrokeStyle,b.datasetStrokeStyle,"datasetStrokeStyle",f,h,{nullvalue:null}))),c.stroke(),c.setLineDash([]),d>=b.animationStopValue){c.beginPath();for(var j=0;j<a.datasets[f].data.length;j++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,n,a.datasets[f].displayData,b.displayData,"displayData",f,j,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,n,a.displayData,b.displayData,"displayData",j,-1,{nullvalue:null})&&"undefined"!=typeof a.datasets[f].data[j]&&setOptionValue(!0,!0,1,"POINTDOT",c,a,n,void 0,b.pointDot,"pointDot",f,j,{nullvalue:null})){c.beginPath(),c.fillStyle=setOptionValue(!0,!0,1,"MARKERFILLCOLOR",c,a,n,a.datasets[f].pointColor,b.defaultStrokeColor,"pointColor",f,j,{nullvalue:!0}),c.strokeStyle=setOptionValue(!0,!0,1,"MARKERSTROKESTYLE",c,a,n,a.datasets[f].pointStrokeColor,b.defaultStrokeColor,"pointStrokeColor",f,j,{nullvalue:!0}),c.lineWidth=setOptionValue(!0,!0,c.chartLineScale,"MARKERLINEWIDTH",c,a,n,a.datasets[f].pointDotStrokeWidth,b.pointDotStrokeWidth,"pointDotStrokeWidth",f,j,{nullvalue:!0});var k=setOptionValue(!0,!0,1,"MARKERSHAPE",c,a,n,a.datasets[f].markerShape,b.markerShape,"markerShape",f,j,{nullvalue:!0}),o=setOptionValue(!0,!0,c.chartSpaceScale,"MARKERRADIUS",c,a,n,a.datasets[f].pointDotRadius,b.pointDotRadius,"pointDotRadius",f,j,{nullvalue:!0}),p=setOptionValue(!0,!0,1,"MARKERSTROKESTYLE",c,a,n,a.datasets[f].pointDotStrokeStyle,b.pointDotStrokeStyle,"pointDotStrokeStyle",f,j,{nullvalue:!0});drawMarker(c,l+i*n[f][j].offsetX,m-i*n[f][j].offsetY,k,o,p)}}}if(c.restore(),d>=b.animationStopValue)for(f=0;f<a.datasets.length;f++)for(h=0;h<a.datasets[f].data.length;h++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,n,a.datasets[f].displayData,b.displayData,"displayData",f,h,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,n,a.displayData,b.displayData,"displayData",h,-1,{
nullvalue:null})&&"undefined"!=typeof a.datasets[f].data[h]&&(jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["POINT",f,h,n,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",c,a,n,a.datasets[f].annotateDisplay,b.annotateDisplay,"annotateDisplay",f,h,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",c,a,n,a.datasets[f].inGraphDataShow,b.inGraphDataShow,"inGraphDataShow",f,h,{nullValue:!0}))){c.save(),c.beginPath(),c.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",c,a,n,void 0,b.inGraphDataAlign,"inGraphDataAlign",f,h,{nullValue:!0}),c.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",c,a,n,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",f,h,{nullValue:!0}),"off-center"==setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",c,a,n,void 0,b.inGraphDataAlign,"inGraphDataAlign",f,h,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,n,void 0,b.inGraphDataRotate,"inGraphDataRotate",f,h,{nullValue:!0})||(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)<=Math.PI/2?c.textAlign="left":c.textAlign="right":"to-center"==setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",c,a,n,void 0,b.inGraphDataAlign,"inGraphDataAlign",f,h,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,n,void 0,b.inGraphDataRotate,"inGraphDataRotate",f,h,{nullValue:!0})||(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)<Math.PI/2?c.textAlign="right":c.textAlign="left":c.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",c,a,n,void 0,b.inGraphDataAlign,"inGraphDataAlign",f,h,{nullValue:!0}),"off-center"==setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",c,a,n,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",f,h,{nullValue:!0})?(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="bottom":c.textBaseline="top":"to-center"==setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",c,a,n,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",f,h,{nullValue:!0})?(b.startAngle*Math.PI/180-h*e+4*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="top":c.textBaseline="bottom":c.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",c,a,n,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",f,h,{nullValue:!0}),c.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",c,a,n,void 0,b.inGraphDataFontStyle,"inGraphDataFontStyle",f,h,{nullValue:!0})+" "+setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,n,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",f,h,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",c,a,n,void 0,b.inGraphDataFontFamily,"inGraphDataFontFamily",f,h,{nullValue:!0}),c.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",c,a,n,void 0,b.inGraphDataFontColor,"inGraphDataFontColor",f,h,{nullValue:!0});var q;1==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",c,a,n,void 0,b.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",f,h,{nullValue:!0})?q=0+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",c,a,n,void 0,b.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",f,h,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",c,a,n,void 0,b.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",f,h,{nullValue:!0})?q=n[f][h].calculated_offset/2+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",c,a,n,void 0,b.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",f,h,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATARADIUSPOSITION",c,a,n,void 0,b.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",f,h,{nullValue:!0})&&(q=n[f][h].calculated_offset+setOptionValue(!0,!0,1,"INGRAPHDATAPADDINGRADIUS",c,a,n,void 0,b.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",f,h,{nullValue:!0}));var r,s;n[f][h].calculated_offset>0?(r=l+n[f][h].offsetX*(q/n[f][h].calculated_offset),s=m-n[f][h].offsetY*(q/n[f][h].calculated_offset)):(r=l,s=m),c.translate(r,s);var t=0;t="inRadiusAxis"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,n,void 0,b.inGraphDataRotate,"inGraphDataRotate",f,h,{nullValue:!0})?h*e:"inRadiusAxisRotateLabels"==setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,n,void 0,b.inGraphDataRotate,"inGraphDataRotate",f,h,{nullValue:!0})?(h*e+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(h*e+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI+h*e:2*Math.PI+h*e:setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,n,void 0,b.inGraphDataRotate,"inGraphDataRotate",f,h,{nullValue:!0})*(Math.PI/180),c.rotate(t);var u=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",c,a,n,void 0,b.inGraphDataTmpl,"inGraphDataTmpl",f,h,{nullValue:!0}),n[f][h],b);setTextBordersAndBackground(c,u,setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,n,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",f,h,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",c,a,n,void 0,b.inGraphDataBorders,"inGraphDataBorders",f,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",c,a,n,void 0,b.inGraphDataBordersSelection,"inGraphDataBordersSelection",f,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",c,a,n,void 0,b.inGraphDataBordersColor,"inGraphDataBordersColor",f,h,{nullValue:!0}),setOptionValue(!0,!0,c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,n,void 0,b.inGraphDataBordersWidth,"inGraphDataBordersWidth",f,h,{nullValue:!0}),setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,n,void 0,b.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",f,h,{nullValue:!0}),setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,n,void 0,b.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",f,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",c,a,n,void 0,b.inGraphDataBordersStyle,"inGraphDataBordersStyle",f,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",c,a,n,void 0,b.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",f,h,{nullValue:!0}),"INGRAPHDATA",b.inGraphDataBordersRadius),c.fillTextMultiLine(u,0,0,c.textBaseline,setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,n,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",f,h,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",t,r,s,f,h),c.restore()}}function s(){var g=2*Math.PI/a.datasets[0].data.length;if(c.save(),c.translate(l,m),c.rotate((90-b.startAngle)*Math.PI/180),b.angleShowLineOut){c.strokeStyle=b.angleLineColor,c.lineWidth=Math.ceil(c.chartLineScale*b.angleLineWidth);for(var h=0;h<a.datasets[0].data.length;h++)c.rotate(g),c.beginPath(),c.moveTo(0,0),c.lineTo(0,-d),c.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"ANGLELINESTYLE",c,a,n,void 0,b.angleLineStyle,"angleLineStyle",h,-1,{nullValue:!0}))),c.stroke(),c.setLineDash([])}for(var i=0;i<f.steps;i++)if(c.beginPath(),b.scaleShowLine&&(i+1)%b.scaleGridLinesStep==0){c.strokeStyle=b.scaleLineColor,c.lineWidth=Math.ceil(c.chartLineScale*b.scaleLineWidth),c.moveTo(0,-e*(i+1));for(var j=0;j<a.datasets[0].data.length;j++)c.rotate(g),c.lineTo(0,-e*(i+1));c.closePath(),c.setLineDash(lineStyleFn(b.scaleLineStyle)),c.stroke(),c.setLineDash([])}if(c.rotate(-(90-b.startAngle)*Math.PI/180),b.scaleShowLabels)for(i=0;i<f.steps;i++){if(c.textAlign="center",c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,c.textBaseline="middle",b.scaleShowLabelBackdrop){var k=c.measureTextMultiLine(f.labels[i+1],Math.ceil(c.chartTextScale*b.scaleFontSize)).textWidth;c.fillStyle=b.scaleBackdropColor,c.beginPath(),c.rect(Math.round(Math.cos(b.startAngle*Math.PI/180)*(e*(i+1))-k/2-Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingX)),Math.round(-Math.sin(b.startAngle*Math.PI/180)*e*(i+1)-.5*Math.ceil(c.chartTextScale*b.scaleFontSize)-Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingY)),Math.round(k+2*Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingX)),Math.round(Math.ceil(c.chartTextScale*b.scaleFontSize)+2*Math.ceil(c.chartSpaceScale*b.scaleBackdropPaddingY))),c.fill()}c.fillStyle=b.scaleFontColor,c.fillTextMultiLine(f.labels[i+1],Math.cos(b.startAngle*Math.PI/180)*(e*(i+1)),-Math.sin(b.startAngle*Math.PI/180)*e*(i+1),c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"SCALE_TEXTMOUSE",0,l,m,i,-1)}for(var o=0;o<a.labels.length;o++){c.font=b.pointLabelFontStyle+" "+Math.ceil(c.chartTextScale*b.pointLabelFontSize).toString()+"px "+b.pointLabelFontFamily,c.fillStyle=b.pointLabelFontColor;for(var p=Math.sin((90-b.startAngle)*Math.PI/180+g*o)*(d+Math.ceil(c.chartTextScale*b.pointLabelFontSize)),q=Math.cos((90-b.startAngle)*Math.PI/180+g*o)*(d+Math.ceil(c.chartTextScale*b.pointLabelFontSize)),r=(90-b.startAngle)*Math.PI/180+g*o;r<0;)r+=2*Math.PI;for(;r>2*Math.PI;)r-=2*Math.PI;r==Math.PI||0==r?c.textAlign="center":r>Math.PI?c.textAlign="right":c.textAlign="left",c.textBaseline="middle",c.fillTextMultiLine(a.labels[o],p,-q,c.textBaseline,Math.ceil(c.chartTextScale*b.pointLabelFontSize),!0,b.detectMouseOnText,c,"LABEL_TEXTMOUSE",0,l,m,o,-1)}c.restore()}function t(){var e,f,h,i,j,m,n,o,p,q,r=2*Math.PI/a.datasets[0].data.length,s=b.startAngle*Math.PI/180;if(c.font=b.pointLabelFontStyle+" "+Math.ceil(c.chartTextScale*b.pointLabelFontSize).toString()+"px "+b.pointLabelFontFamily,b.graphMaximized)for(i=k.availableWidth/2,h=k.availableWidth/2,m=40,p=0;p<a.labels.length;p++)q=c.measureTextMultiLine(a.labels[p],Math.ceil(c.chartTextScale*b.scaleFontSize)).textWidth+c.measureTextMultiLine(a.labels[p],Math.ceil(c.chartTextScale*b.scaleFontSize)).textHeight,f=(k.availableWidth-q)/(1+Math.abs(Math.cos(s))),s<Math.PI/2&&s>-Math.PI/2||s>3*Math.PI/2?f<i&&(i=f):0!=Math.cos(s)&&f<h&&(h=f),s-=r;else i=k.availableWidth/2,h=k.availableWidth/2,m=1;for(n=0,o=0,l=i+k.leftNotUsableWidth,e=i,j=0;j<m;++j,e+=(k.availableWidth-h-i)/m){for(d=Max([e,k.availableWidth-e]),s=b.startAngle*Math.PI/180,f=k.available,p=0;p<a.labels.length;p++)q=c.measureTextMultiLine(a.labels[p],Math.ceil(c.chartTextScale*b.scaleFontSize)).textWidth+c.measureTextMultiLine(a.labels[p],Math.ceil(c.chartTextScale*b.scaleFontSize)).textHeight,s<Math.PI/2&&s>-Math.PI/2||s>3*Math.PI/2?f=(k.availableWidth-e-q)/Math.abs(Math.cos(s)):Math.cos(0!=s)&&(f=(e-q)/Math.abs(Math.cos(s))),f<d&&(d=f),Math.sin(s)*k.availableHeight/2>k.availableHeight/2-2*Math.ceil(c.chartTextScale*b.scaleFontSize)&&(f=Math.sin(s)*k.availableHeight/2-1.5*Math.ceil(c.chartTextScale*b.scaleFontSize),f<d&&(d=f)),s-=r;d>n&&(n=d,l=e+k.leftNotUsableWidth)}d=n-Math.ceil(c.chartTextScale*b.scaleFontSize)/2,g=Default(g,5)}function u(){for(var d=-Number.MAX_VALUE,e=Number.MAX_VALUE,f=0;f<a.datasets.length;f++)for(var i=0;i<a.datasets[f].data.length;i++)"undefined"!=typeof a.datasets[f].data[i]&&(1*a.datasets[f].data[i]>d&&(d=1*a.datasets[f].data[i]),1*a.datasets[f].data[i]<e&&(e=1*a.datasets[f].data[i]));d<e&&(d=0,e=0),Math.abs(d-e)<b.zeroValue&&(Math.abs(d)<b.zeroValue&&(d=.9,e=-.9),d>0?(d=1.1*d,e=.9*e):(d=.9*d,e=1.1*e)),"function"==typeof b.graphMin?e=setOptionValue(!0,!0,1,"GRAPHMIN",c,a,n,void 0,b.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(b.graphMin)||(e=b.graphMin),"function"==typeof b.graphMax?d=setOptionValue(!0,!0,1,"GRAPHMAX",c,a,n,void 0,b.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(b.graphMax)||(d=b.graphMax);var j=Math.floor(h/(.66*g)),k=Math.floor(h/g*.5);return d<e&&(e=d-1),{maxValue:d,minValue:e,maxSteps:j,minSteps:k}}var d,e,f,g,h,i,j,k,l,m;if(c.tpchart="Radar",c.tpdata=0,init_and_start(c,a,b)){var n=initPassVariableData_part1(a,b,c);if(i=u(),b.logarithmic=!1,b.logarithmic2=!1,a.labels||(a.labels=[]),j=b.scaleShowLabels?b.scaleLabel:"",b.scaleOverride){var o=setOptionValue(!0,!0,1,"SCALESTARTVALUE",c,a,n,void 0,b.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),p=setOptionValue(!0,!0,1,"SCALESTEPS",c,a,n,void 0,b.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),q=setOptionValue(!0,!0,1,"SCALESTEPWIDTH",c,a,n,void 0,b.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});f={steps:p,stepValue:q,graphMin:o,graphMax:o+p*q,labels:[]},populateLabels(1,b,j,f.labels,f.steps,o,f.graphMax,q),k=setMeasures(a,b,c,c.canvas.height,c.canvas.width,f.labels,null,!0,!1,!1,b.datasetFill,"Radar")}else f=calculateScale(1,b,i.maxSteps,i.minSteps,i.maxValue,i.minValue,j),k=setMeasures(a,b,c,c.canvas.height,c.canvas.width,f.labels,null,!0,!1,!1,b.datasetFill,"Radar");return t(),m=k.topNotUsableHeight+k.availableHeight/2,e=d/f.steps,initPassVariableData_part2(n,a,b,c,{midPosX:l,midPosY:m,calculatedScale:f,scaleHop:e,maxSize:d,outerVal:-1}),animationLoop(b,k.legendMsr,s,r,c,k.clrx,k.clry,k.clrwidth,k.clrheight,l,m,l-d,m+d,a,n),{data:a,config:b,ctx:c}}},Pie=function(a,b,c){return c.tpchart="Pie","undefined"!=typeof a.length?PieDoughnut(convertData(a,b.generateConvertedData),b,c,"Pie"):PieDoughnut(a,b,c,"Pie")},Doughnut=function(a,b,c){return c.tpchart="Doughnut","undefined"!=typeof a.length?PieDoughnut(convertData(a,b.generateConvertedData),b,c,"Doughnut"):PieDoughnut(a,b,c,"Doughnut")},PieDoughnut=function(a,b,c,d){function n(e){var l,m,n,o,p,q,r,s;p=[],q=[],r=[],s=[];for(var t=0;t<a.datasets.length;t++){var u=1,v=1;for(j=0;j<a.labels.length;j++)if("undefined"==typeof p[j]&&"undefined"!=typeof k[t][j].firstAngle&&(p[j]=k[t][j].firstAngle,q[j]=0,r[j]=k[t][j].firstAngle,s[j]=((-b.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),1*b.animationStartWithData>1&&1*b.animationStartWithData-1<a.datasets.length),0!=setOptionValue(!1,!0,1,"DISPLAYDATA",c,a,k,a.datasets[t].displayData,b.displayData,"displayData",t,j,{nullvalue:null})&&0!=setOptionValue(!1,!0,1,"DISPLAYDATA",c,a,k,a.displayData,b.displayData,"displayData",-1,j,{nullvalue:null})&&!("undefined"==typeof a.datasets[t].data[j]||1*a.datasets[t].data[j]<=0)){if(l="Pie"==d?i:i,m=h,n=l+(m-l)*k[t][j].startRadius,o=l+(m-l)*k[t][j].stopRadius,l=n,m=o,("Pie"!=d||j>0)&&(n=l-(m-l)*setOptionValue(!1,!0,1,"EXPANDINRADIUS",c,a,k,a.datasets[t].expandInRadius,0,"expandInRadius",t,j,{animationDecimal:e,scaleAnimation:u})),o=m+(m-l)*setOptionValue(!1,!0,1,"EXPANDOUTRADIUS",c,a,k,a.datasets[t].expandOutRadius,0,"expandOutRadius",t,j,{animationDecimal:e,scaleAnimation:u}),l=n,m=o,b.animation&&(b.animateScale&&(u=e),b.animateRotate&&(v=e)),correctedRotateAnimation=animationCorrection(v,a,b,t,-1,!1).mainVal,c.beginPath(),c.lineWidth=Math.ceil(c.chartLineScale*b.segmentStrokeWidth),c.strokeStyle="rgba(0,0,0,0)","ByArc"==b.animationByData)endAngle=k[t][j].startAngle+correctedRotateAnimation*k[t][j].segmentAngle,c.arc(f,g,u*m,k[t][j].startAngle,endAngle,!1),c.arc(f,g,u*l,endAngle,k[t][j].startAngle,!0);else if(b.animationByData)if(t<0)c.arc(f,g,u*m,k[t][j].startAngle,k[t].endAngle,!1),c.arc(f,g,u*l,k[t][j].endAngle,k[t][j].startAngle,!0);else{if(!(k[t][j].startAngle<=r[j]+correctedRotateAnimation*(2*Math.PI-q[j])))continue;endAngle=k[t][j].endAngle,k[t][j].endAngle>r[j]+correctedRotateAnimation*(2*Math.PI-q[j])&&(endAngle=r[j]+correctedRotateAnimation*(2*Math.PI-q[j])),c.arc(f,g,u*m,k[t][j].startAngle,endAngle,!1),c.arc(f,g,u*l,endAngle,k[t][j].startAngle,!0)}else c.arc(f,g,u*m,p[j],p[j]+correctedRotateAnimation*(k[t][j].endAngle-k[t][j].startAngle),!1),c.arc(f,g,u*l,p[j]+correctedRotateAnimation*(k[t][j].endAngle-k[t][j].startAngle),p[j],!0),p[j]=p[j]+correctedRotateAnimation*(k[t][j].endAngle-k[t][j].startAngle);c.closePath(),c.fillStyle=setOptionValue(!1,!0,1,"FILLCOLOR",c,a,k,a.datasets[t].fillColor,b.defaultFillColor,"fillColor",t,j,{animationDecimal:e,scaleAnimation:u}),c.fill(),"merge"==b.segmentShowStroke?(c.lineWidth=1.5,c.strokeStyle=setOptionValue(!1,!0,1,"FILLCOLOR",c,a,k,a.datasets[t].fillColor,b.defaultFillColor,"fillColor",t,j,{animationDecimal:e,scaleAnimation:u}),c.setLineDash([]),c.stroke()):b.segmentShowStroke&&(c.lineWidth=Math.ceil(c.chartLineScale*b.segmentStrokeWidth),c.strokeStyle=b.segmentStrokeColor,c.setLineDash(lineStyleFn(setOptionValue(!1,!0,1,"SEGMENTSTROKESTYLE",c,a,k,a.datasets[t].segmentStrokeStyle,b.segmentStrokeStyle,"segmentStrokeStyle",t,-1,{animationDecimal:e,scaleAnimation:u}))),c.stroke(),c.setLineDash([]))}}if(e>=b.animationStopValue)for(var t=0;t<a.datasets.length;t++)for(j=0;j<a.labels.length;j++)if(0!=setOptionValue(!1,!0,1,"DISPLAYDATA",c,a,k,a.datasets[t].displayData,b.displayData,"displayData",t,j,{nullvalue:null})&&0!=setOptionValue(!1,!0,1,"DISPLAYDATA",c,a,k,a.displayData,b.displayData,"displayData",-1,j,{nullvalue:null})&&!("undefined"==typeof a.datasets[t].data[j]||1*a.datasets[t].data[j]<=0)&&(l="Pie"==d?i:i-(h-i)*setOptionValue(!1,!0,1,"EXPANDINRADIUS",c,a,k,a.datasets[t].expandInRadius,0,"expandInRadius",t,j,{animationDecimal:e,scaleAnimation:u}),m=h+(h-i)*setOptionValue(!1,!0,1,"EXPANDOUTRADIUS",c,a,k,a.datasets[t].expandOutRadius,0,"expandOutRadius",t,j,{animationDecimal:e,scaleAnimation:u}),n=l+(m-l)*k[t][j].startRadius,o=l+(m-l)*k[t][j].stopRadius,l=n,m=o,jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["MARC",t,j,k,setOptionValue(!1,!0,1,"ANNOTATEDISPLAY",c,a,k,a.datasets[t].annotateDisplay,b.annotateDisplay,"annotateDisplay",t,j,{nullValue:!0})],setOptionValue(!1,!0,1,"INGRAPHDATASHOW",c,a,k,a.datasets[t].inGraphDataShow,b.inGraphDataShow,"inGraphDataShow",t,j,{nullValue:!0})&&k[t][j].segmentAngle>=Math.PI/180*setOptionValue(!1,!0,1,"INGRAPHDATAMINIMUMANGLE",c,a,k,void 0,b.inGraphDataMinimumAngle,"inGraphDataMinimumAngle",t,j,{nullValue:!0}))){1==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",c,a,k,void 0,b.inGraphDataAnglePosition,"inGraphDataAnglePosition",t,j,{nullValue:!0})?posAngle=k[t][j].realStartAngle+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",c,a,k,void 0,b.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",t,j,{nullValue:!0})*(Math.PI/180):2==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",c,a,k,void 0,b.inGraphDataAnglePosition,"inGraphDataAnglePosition",t,j,{nullValue:!0})?posAngle=k[t][j].realStartAngle-k[t][j].segmentAngle/2+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",c,a,k,void 0,b.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",t,j,{nullValue:!0})*(Math.PI/180):3==setOptionValue(!1,!0,1,"INGRAPHDATAANGLEPOSITION",c,a,k,void 0,b.inGraphDataAnglePosition,"inGraphDataAnglePosition",t,j,{nullValue:!0})&&(posAngle=k[t][j].realStartAngle-k[t][j].segmentAngle+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINANGLE",c,a,k,void 0,b.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",t,j,{nullValue:!0})*(Math.PI/180)),1==setOptionValue(!1,!0,1,"INGRAPHDATARADIUSPOSITION",c,a,k,void 0,b.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",t,j,{nullValue:!0})?labelRadius=l+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINGRADIUS",c,a,k,void 0,b.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",t,j,{nullValue:!0}):2==setOptionValue(!1,!0,1,"INGRAPHDATARADIUSPOSITION",c,a,k,void 0,b.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",t,j,{nullValue:!0})?labelRadius=l+(m-l)/2+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINGRADIUS",c,a,k,void 0,b.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",t,j,{nullValue:!0}):3==setOptionValue(!1,!0,1,"INGRAPHDATARADIUSPOSITION",c,a,k,void 0,b.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",t,j,{nullValue:!0})&&(labelRadius=m+setOptionValue(!1,!0,1,"INGRAPHDATAPADDINGRADIUS",c,a,k,void 0,b.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",t,j,{nullValue:!0})),c.save(),"off-center"==setOptionValue(!1,!0,1,"INGRAPHDATAALIGN",c,a,k,void 0,b.inGraphDataAlign,"inGraphDataAlign",t,j,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",c,a,k,void 0,b.inGraphDataRotate,"inGraphDataRotate",t,j,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?c.textAlign="left":c.textAlign="right":"to-center"==setOptionValue(!1,!0,1,"INGRAPHDATAALIGN",c,a,k,void 0,b.inGraphDataAlign,"inGraphDataAlign",t,j,{nullValue:!0})?"inRadiusAxis"==setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",c,a,k,void 0,b.inGraphDataRotate,"inGraphDataRotate",t,j,{nullValue:!0})||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2?c.textAlign="right":c.textAlign="left":c.textAlign=setOptionValue(!1,!0,1,"INGRAPHDATAALIGN",c,a,k,void 0,b.inGraphDataAlign,"inGraphDataAlign",t,j,{nullValue:!0}),"off-center"==setOptionValue(!1,!0,1,"INGRAPHDATAVALIGN",c,a,k,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",t,j,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="top":c.textBaseline="bottom":"to-center"==setOptionValue(!1,!0,1,"INGRAPHDATAVALIGN",c,a,k,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",t,j,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?c.textBaseline="bottom":c.textBaseline="top":c.textBaseline=setOptionValue(!1,!0,1,"INGRAPHDATAVALIGN",c,a,k,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",t,j,{nullValue:!0}),c.font=setOptionValue(!1,!0,1,"INGRAPHDATAFONTSTYLE",c,a,k,void 0,b.inGraphDataFontStyle,"inGraphDataFontStyle",t,j,{nullValue:!0})+" "+setOptionValue(!1,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,k,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",t,j,{nullValue:!0})+"px "+setOptionValue(!1,!0,1,"INGRAPHDATAFONTFAMILY",c,a,k,void 0,b.inGraphDataFontFamily,"inGraphDataFontFamily",t,j,{nullValue:!0}),c.fillStyle=setOptionValue(!1,!0,1,"INGRAPHDATAFONTCOLOR",c,a,k,void 0,b.inGraphDataFontColor,"inGraphDataFontColor",t,j,{nullValue:!0});var w=tmplbis(setOptionValue(!1,!0,1,"INGRAPHDATATMPL",c,a,k,void 0,b.inGraphDataTmpl,"inGraphDataTmpl",t,j,{nullValue:!0}),k[t][j],b);c.translate(f+labelRadius*Math.cos(posAngle),g-labelRadius*Math.sin(posAngle));var x=0;x="inRadiusAxis"==setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",c,a,k,void 0,b.inGraphDataRotate,"inGraphDataRotate",t,j,{nullValue:!0})?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",c,a,k,void 0,b.inGraphDataRotate,"inGraphDataRotate",t,j,{nullValue:!0})?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:setOptionValue(!1,!0,1,"INGRAPHDATAROTATE",c,a,k,void 0,b.inGraphDataRotate,"inGraphDataRotate",t,j,{nullValue:!0})*(Math.PI/180),c.rotate(x),setTextBordersAndBackground(c,w,setOptionValue(!1,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,k,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",t,j,{nullValue:!0}),0,0,setOptionValue(!1,!0,1,"INGRAPHDATABORDERS",c,a,k,void 0,b.inGraphDataBorders,"inGraphDataBorders",t,j,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",c,a,k,void 0,b.inGraphDataBordersSelection,"inGraphDataBordersSelection",t,j,{nullValue:!0}),setOptionValue(!1,!0,1,"INGRAPHDATABORDERSCOLOR",c,a,k,void 0,b.inGraphDataBordersColor,"inGraphDataBordersColor",t,j,{nullValue:!0}),setOptionValue(!1,!0,c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,k,void 0,b.inGraphDataBordersWidth,"inGraphDataBordersWidth",t,j,{nullValue:!0}),setOptionValue(!1,!0,c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,k,void 0,b.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",t,j,{nullValue:!0}),setOptionValue(!1,!0,c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,k,void 0,b.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",t,j,{nullValue:!0}),setOptionValue(!1,!0,1,"INGRAPHDATABORDERSSTYLE",c,a,k,void 0,b.inGraphDataBordersStyle,"inGraphDataBordersStyle",t,j,{nullValue:!0}),setOptionValue(!1,!0,1,"INGRAPHDATABACKGROUNDCOLOR",c,a,k,void 0,b.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",t,j,{nullValue:!0}),"INGRAPHDATA",b.inGraphDataBordersRadius),c.fillTextMultiLine(w,0,0,c.textBaseline,setOptionValue(!1,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,k,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",t,j,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",x,f+labelRadius*Math.cos(posAngle),g-labelRadius*Math.sin(posAngle),t,j),c.restore()}}var e,f,g,h,i;if(c.tpdata=0,init_and_start(c,a,b)){var k=initPassVariableData_part1(a,b,c);((b.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);b.logarithmic=!1,b.logarithmic2=!1,e=setMeasures(a,b,c,c.canvas.height,c.canvas.width,"none","none",!0,!1,!1,!0,"Doughnut");var m=calculatePieDrawingSize(c,e,b,a,k);return f=m.midPieX,g=m.midPieY,h=m.radius,i="Pie"==d?0:h*(b.percentageInnerCutout/100),h>0?(initPassVariableData_part2(k,a,b,c,{midPosX:f,midPosY:g,int_radius:i,ext_radius:h,outerVal:-1}),animationLoop(b,e.legendMsr,null,n,c,e.clrx,e.clry,e.clrwidth,e.clrheight,f,g,f-h,g+h,a,k)):(testRedraw(c,a,b),c.firstPass=9),{data:a,config:b,ctx:c}}},Line=function(data,config,ctx){function drawLines(a){drawLinesDataset(a,data,config,ctx,statData,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1}),a>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset,statData:statData})}function drawScale(){drawGridScale(ctx,data,config,msr,yAxisPosX,xAxisPosY,zeroY,valueHop,scaleHop,calculatedScale.steps,data.labels.length+0)}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+Math.ceil(ctx.chartTextScale*config.scaleFontSize).toString()+"px "+config.scaleFontFamily,config.xAxisTop||config.xAxisBottom){if(ctx.textBaseline="top",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom){msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center";var a=0,b=0;1==config.xAxisMiddle&&(a=valueHop/2,b=1);for(var c=0;c<data.labels.length-b;c++)showLabels(ctx,data,config,c)&&(ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+c*valueHop-msr.highestXLabel/2+a,msr.xLabelPos),ctx.rotate(-((msr.rotateLabels+180*(msr.rotateLabels>90))*(Math.PI/180))),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[c],config.fmtXLabel),0,0,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+c*valueHop-msr.highestXLabel/2+a,msr.xLabelPos,c,-1)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[c],config.fmtXLabel),yAxisPosX+c*valueHop+a,msr.xLabelPos,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",0,0,0,c,-1),ctx.restore())}if(config.xAxisTop){msr.rotateTLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateTLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center";var d;d="object"==typeof data.labels2?data.labels2:data.labels;for(var c=0;c<d.length;c++)showLabels(ctx,data,config,c)&&(ctx.save(),msr.rotateTLabels>0?(ctx.translate(yAxisPosX+c*valueHop-msr.highestXLabel/2,msr.xTLabelPos),ctx.rotate(-((msr.rotateTLabels+180*(msr.rotateTLabels>90))*(Math.PI/180))),ctx.fillTextMultiLine(fmtChartJS(config,d[c],config.fmtXLabel),0,0,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",-(msr.rotateTLabels*(Math.PI/180)),yAxisPosX+c*valueHop-msr.highestXLabel/2,msr.xTLabelPos,c,-1)):ctx.fillTextMultiLine(fmtChartJS(config,d[c],config.fmtXLabel),yAxisPosX+c*valueHop,msr.xTLabelPos,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",0,0,0,c,-1),ctx.restore())}}ctx.textAlign="right",ctx.textBaseline="middle";for(var e=config.showYAxisMin?-1:0;e<calculatedScale.steps;e++)config.scaleShowLabels&&showYLabels(ctx,data,config,e+1,calculatedScale.labels[e+1])&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[e+1],yAxisPosX-(Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(e+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,e)),!config.yAxisRight||valueBounds.dbAxis||config.forceSecondScale||(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[e+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(e+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,e)));if(config.yAxisRight&&(valueBounds.dbAxis||config.forceSecondScale))for(e=config.showYAxisMin?-1:0;e<calculatedScale2.steps;e++)config.scaleShowLabels&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale2.labels[e+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(e+1)*scaleHop2,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,e))}function getValueBounds(){for(var upperValue=-Number.MAX_VALUE,lowerValue=Number.MAX_VALUE,upperValue2=-Number.MAX_VALUE,lowerValue2=Number.MAX_VALUE,secondAxis=!1,firstAxis=!1,mathValueHeight,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeightVal=window[mathFctName](parameter)}else mathValueHeightVal=0;for(var j=0;j<data.datasets[i].data.length;j++)mathValueHeight="object"==typeof mathValueHeightVal?mathValueHeightVal[Math.min(mathValueHeightVal.length,j)]:mathValueHeightVal,"undefined"!=typeof data.datasets[i].data[j]&&(2==data.datasets[i].axis?(secondAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue2&&(upperValue2=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue2&&(lowerValue2=1*data.datasets[i].data[j]-mathValueHeight)):(firstAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight)))}upperValue<lowerValue&&(upperValue=0,lowerValue=0),Math.abs(upperValue-lowerValue)<config.zeroValue&&(Math.abs(upperValue)<config.zeroValue&&(upperValue=.9),upperValue>0?(upperValue=1.1*upperValue,lowerValue=.9*lowerValue):(upperValue=.9*upperValue,lowerValue=1.1*lowerValue)),"function"==typeof config.graphMin?lowerValue=setOptionValue(!0,!0,1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(config.graphMin)||(lowerValue=config.graphMin),"function"==typeof config.graphMax?upperValue=setOptionValue(!0,!0,1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(config.graphMax)||(upperValue=config.graphMax),secondAxis&&(upperValue2<lowerValue2&&(upperValue2=0,lowerValue2=0),Math.abs(upperValue2-lowerValue2)<config.zeroValue&&(Math.abs(upperValue2)<config.zeroValue&&(upperValue2=.9),upperValue2>0?(upperValue2=1.1*upperValue2,lowerValue2=.9*lowerValue2):(upperValue2=.9*upperValue2,lowerValue2=1.1*lowerValue2)),"function"==typeof config.graphMin2?lowerValue2=setOptionValue(!0,!0,1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin2,"graphMin2",-1,-1,{nullValue:!0}):isNaN(config.graphMin2)||(lowerValue2=config.graphMin2),"function"==typeof config.graphMax2?upperValue2=setOptionValue(!0,!0,1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax2,"graphMax2",-1,-1,{nullValue:!0}):isNaN(config.graphMax2)||(upperValue2=config.graphMax2)),!firstAxis&&secondAxis&&(upperValue=upperValue2,lowerValue=lowerValue2),labelHeight=Math.ceil(ctx.chartTextScale*config.scaleFontSize),scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return upperValue<lowerValue&&(lowerValue=upperValue-1),upperValue2<lowerValue2&&(lowerValue2=upperValue2-1),{maxValue:upperValue,minValue:lowerValue,maxValue2:upperValue2,minValue2:lowerValue2,dbAxis:secondAxis,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,scaleHop2,calculatedScale,calculatedScale2,labelHeight,scaleHeight,valueBounds,labelTemplateString,labelTemplateString2,valueHop,xAxisLength,yAxisPosX,xAxisPosY,rotateLabels=0,msr,zeroY=0,zeroY2=0;if(ctx.tpchart="Line",ctx.tpdata=0,init_and_start(ctx,data,config)){
for(var mxlgt=0,i=0;i<data.datasets.length;i++)mxlgt=Max([mxlgt,data.datasets[i].data.length]);if(1==mxlgt){for("string"==typeof data.labels[0]&&(data.labels=["",data.labels[0],""]),i=0;i<data.datasets.length;i++)data.datasets[i].data=[void 0,data.datasets[i].data[0],void 0];mxlgt=3}var statData=initPassVariableData_part1(data,config,ctx);for(i=0;i<data.datasets.length;i++)statData[i][0].tpchart="Line";msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,"nihil","nihil",!1,!1,!0,config.datasetFill,"Line"),valueBounds=getValueBounds(),config.logarithmic!==!1&&valueBounds.minValue<=0&&(config.logarithmic=!1),config.logarithmic2!==!1&&valueBounds.minValue2<=0&&(config.logarithmic2=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&OrderOfMagnitude<4||config.scaleOverride)&&(config.logarithmic=!1);var OrderOfMagnitude2=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue2)));if(("fuzzy"==config.logarithmic2&&OrderOfMagnitude2<4||config.scaleOverride2)&&(config.logarithmic2=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",labelTemplateString2=config.scaleShowLabels2?config.scaleLabel2:"",config.scaleOverride){var scaleStartValue=setOptionValue(!0,!0,1,"SCALESTARTVALUE",ctx,data,statData,void 0,config.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),scaleSteps=setOptionValue(!0,!0,1,"SCALESTEPS",ctx,data,statData,void 0,config.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),scaleStepWidth=setOptionValue(!0,!0,1,"SCALESTEPWIDTH",ctx,data,statData,void 0,config.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});calculatedScale={steps:scaleSteps,stepValue:scaleStepWidth,graphMin:scaleStartValue,graphMax:scaleStartValue+scaleSteps*scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,scaleStartValue,calculatedScale.graphMax,scaleStepWidth)}else valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString));if(valueBounds.dbAxis||config.forceSecondScale)if(config.scaleOverride2){var scaleStartValue2=setOptionValue(!0,!0,1,"SCALESTARTVALUE2",ctx,data,statData,void 0,config.scaleStartValue2,"scaleStartValue2",-1,-1,{nullValue:!0}),scaleSteps2=setOptionValue(!0,!0,1,"SCALESTEPS2",ctx,data,statData,void 0,config.scaleSteps2,"scaleSteps2",-1,-1,{nullValue:!0}),scaleStepWidth2=setOptionValue(!0,!0,1,"SCALESTEPWIDTH2",ctx,data,statData,void 0,config.scaleStepWidth2,"scaleStepWidth2",-1,-1,{nullValue:!0});calculatedScale2={steps:scaleSteps2,stepValue:scaleStepWidth2,graphMin:scaleStartValue2,graphMax:scaleStartValue2+scaleSteps2*scaleStepWidth2,labels:[]},populateLabels(2,config,labelTemplateString2,calculatedScale2.labels,calculatedScale2.steps,scaleStartValue2,calculatedScale2.graphMax,scaleStepWidth2)}else valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale2=calculateScale(2,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue2,valueBounds.minValue2,labelTemplateString2));else calculatedScale2={steps:0,stepValue:0,graphMin:0,graphMax:0,labels:null};if(valueBounds.maxSteps>0&&valueBounds.minSteps>0){msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,calculatedScale.labels,calculatedScale2.labels,!1,!1,!0,config.datasetFill,"Line");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeBottom,config.scaleMinorTickSizeBottom*(config.scaleMinorTickHorizontalCount>0)))-Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeTop,config.scaleMinorTickSizeTop*(config.scaleMinorTickHorizontalCount>0))),msr.availableWidth=msr.availableWidth-Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeLeft,config.scaleMinorTickSizeLeft*(config.scaleMinorTickVerticalCount>0)))-Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeRight,config.scaleMinorTickSizeRight*(config.scaleMinorTickVerticalCount>0))),scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),scaleHop2=Math.floor(msr.availableHeight/calculatedScale2.steps),valueHop=Math.floor(msr.availableWidth/(data.labels.length-1)),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/(data.labels.length-1)),msr.clrwidth=msr.clrwidth-(msr.availableWidth-(data.labels.length-1)*valueHop),msr.topNotUsableHeight+=msr.availableHeight-calculatedScale.steps*scaleHop,msr.rightNotUsableWidth+=msr.availableWidth-(data.labels.length-1)*valueHop,msr.availableWidth=(data.labels.length-1)*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,yAxisPosX=msr.leftNotUsableWidth+Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeLeft,config.scaleMinorTickSizeLeft*(config.scaleMinorTickVerticalCount>0))),xAxisPosY=msr.topNotUsableHeight+msr.availableHeight+Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeTop,config.scaleMinorTickSizeTop*(config.scaleMinorTickHorizontalCount>0))),drawLabels(),zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop),"object"==typeof calculatedScale2&&(zeroY2=calculateOffset(config.logarithmic2,0,calculatedScale2,scaleHop2)),initPassVariableData_part2(statData,data,config,ctx,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,logarithmic:config.logarithmic,scaleHop2:scaleHop2,zeroY2:zeroY2,msr:msr,calculatedScale2:calculatedScale2,logarithmic2:config.logarithmic2}),animationLoop(config,msr.legendMsr,drawScale,drawLines,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data,statData)}else testRedraw(ctx,data,config),ctx.firstPass=9;return{data:data,config:config,ctx:ctx}}},StackedBar=function(a,b,c){function G(d){for(var e=new Array,f=new Array,g=0;g<a.datasets.length;g++)if("Line"!=a.datasets[g].type)for(var h=0;h<a.datasets[g].data.length;h++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,t,a.displayData,b.displayData,"displayData",h,-1,{nullvalue:null})){var i=animationCorrection(d,a,b,g,h,!1).animVal;if(i>1&&(i-=1),"undefined"!=typeof a.datasets[g].data[h]&&1*a.datasets[g].data[h]!=0&&!(Math.abs(a.datasets[g].data[h])<b.zeroValue&&0==b.showZeroValue)){"undefined"==typeof e[h]&&(e[h]=t[t[g][h].firstNotMissing][h].yPosBottom,f[h]=t[t[g][h].firstNotMissing][h].yPosBottom);var j,k;j=1*a.datasets[g].data[h]>0?e[h]:f[h],k=j+i*(t[g][h].yPosTop-t[g][h].yPosBottom),1*a.datasets[g].data[h]>0?e[h]=k:f[h]=k,0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,t,a.datasets[g].displayData,b.displayData,"displayData",g,h,{nullvalue:null})&&(c.save(),c.lineWidth=Math.ceil(c.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",c,a,t,a.datasets[g].barStrokeWidth,b.barStrokeWidth,"barStrokeWidth",g,h,{animationValue:i,xPosLeft:t[g][h].xPosLeft,yPosBottom:j,xPosRight:t[g][h].xPosRight,yPosTop:k})),c.fillStyle=setOptionValue(!0,!0,1,"COLOR",c,a,t,a.datasets[g].fillColor,b.defaultFillColor,"fillColor",g,h,{animationValue:i,xPosLeft:t[g][h].xPosLeft,yPosBottom:j,xPosRight:t[g][h].xPosRight,yPosTop:k}),c.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",c,a,t,a.datasets[g].strokeColor,b.defaultStrokeColor,"strokeColor",g,h,{nullvalue:null}),0!=i&&j!=k&&(c.beginPath(),c.moveTo(t[g][h].xPosLeft,j+(k-j)/2),c.lineTo(t[g][h].xPosLeft,k),c.lineTo(t[g][h].xPosRight,k),c.lineTo(t[g][h].xPosRight,j),c.lineTo(t[g][h].xPosLeft,j),c.lineTo(t[g][h].xPosLeft,j+(k-j)/2),b.barShowStroke&&(c.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"STROKESTYLE",c,a,t,a.datasets[g].datasetStrokeStyle,b.datasetStrokeStyle,"datasetStrokeStyle",g,h,{nullvalue:null}))),c.stroke(),c.setLineDash([])),c.closePath(),c.fill()),c.restore())}}if(drawLinesDataset(d,a,b,c,t,{xAxisPosY:p,yAxisPosX:o,valueHop:m,nbValueHop:a.labels.length}),d>=b.animationStopValue){var l=0,n=0;for(g=0;g<a.datasets.length;g++)for(h=0;h<a.datasets[g].data.length;h++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,t,a.datasets[g].displayData,b.displayData,"displayData",g,h,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,t,a.displayData,b.displayData,"displayData",h,-1,{nullvalue:null})&&"undefined"!=typeof a.datasets[g].data[h]&&(jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["RECT",g,h,t,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",c,a,t,a.datasets[g].annotateDisplay,b.annotateDisplay,"annotateDisplay",g,h,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",c,a,t,a.datasets[g].inGraphDataShow,b.inGraphDataShow,"inGraphDataShow",g,h,{nullValue:!0}))){c.save(),c.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",c,a,t,void 0,b.inGraphDataAlign,"inGraphDataAlign",g,h,{nullValue:!0}),c.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",c,a,t,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",g,h,{nullValue:!0}),c.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",c,a,t,void 0,b.inGraphDataFontStyle,"inGraphDataFontStyle",g,h,{nullValue:!0})+" "+setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,t,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",g,h,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",c,a,t,void 0,b.inGraphDataFontFamily,"inGraphDataFontFamily",g,h,{nullValue:!0}),c.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",c,a,t,void 0,b.inGraphDataFontColor,"inGraphDataFontColor",g,h,{nullValue:!0});var r=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",c,a,t,void 0,b.inGraphDataTmpl,"inGraphDataTmpl",g,h,{nullValue:!0}),t[g][h],b);if(c.beginPath(),c.beginPath(),l=0,n=0,1==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",c,a,t,void 0,b.inGraphDataXPosition,"inGraphDataXPosition",g,h,{nullValue:!0})?n=t[g][h].xPosLeft+setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,t,void 0,b.inGraphDataPaddingX,"inGraphDataPaddingX",g,h,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",c,a,t,void 0,b.inGraphDataXPosition,"inGraphDataXPosition",g,h,{nullValue:!0})?n=t[g][h].xPosLeft+q/2+setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,t,void 0,b.inGraphDataPaddingX,"inGraphDataPaddingX",g,h,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",c,a,t,void 0,b.inGraphDataXPosition,"inGraphDataXPosition",g,h,{nullValue:!0})&&(n=t[g][h].xPosLeft+q+setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,t,void 0,b.inGraphDataPaddingX,"inGraphDataPaddingX",g,h,{nullValue:!0})),1==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",c,a,t,void 0,b.inGraphDataYPosition,"inGraphDataYPosition",g,h,{nullValue:!0})?l=t[g][h].yPosBottom-setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,t,void 0,b.inGraphDataPaddingY,"inGraphDataPaddingY",g,h,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",c,a,t,void 0,b.inGraphDataYPosition,"inGraphDataYPosition",g,h,{nullValue:!0})?l=(t[g][h].yPosTop+t[g][h].yPosBottom)/2-setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,t,void 0,b.inGraphDataPaddingY,"inGraphDataPaddingY",g,h,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",c,a,t,void 0,b.inGraphDataYPosition,"inGraphDataYPosition",g,h,{nullValue:!0})&&(l=t[g][h].yPosTop-setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,t,void 0,b.inGraphDataPaddingY,"inGraphDataPaddingY",g,h,{nullValue:!0})),l>s.topNotUsableHeight){c.translate(n,l);var u=setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,t,void 0,b.inGraphDataRotate,"inGraphDataRotate",g,h,{nullValue:!0})*(Math.PI/180);c.rotate(u),setTextBordersAndBackground(c,r,setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,t,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",g,h,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",c,a,t,void 0,b.inGraphDataBorders,"inGraphDataBorders",g,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",c,a,t,void 0,b.inGraphDataBordersSelection,"inGraphDataBordersSelection",g,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",c,a,t,void 0,b.inGraphDataBordersColor,"inGraphDataBordersColor",g,h,{nullValue:!0}),setOptionValue(!0,!0,c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,t,void 0,b.inGraphDataBordersWidth,"inGraphDataBordersWidth",g,h,{nullValue:!0}),setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,t,void 0,b.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",g,h,{nullValue:!0}),setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,t,void 0,b.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",g,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",c,a,t,void 0,b.inGraphDataBordersStyle,"inGraphDataBordersStyle",g,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",c,a,t,void 0,b.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",g,h,{nullValue:!0}),"INGRAPHDATA",b.inGraphDataBordersRadius),c.fillTextMultiLine(r,0,0,c.textBaseline,setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,t,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",g,h,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",u,n,l,g,h)}c.restore()}}}function H(){drawGridScale(c,a,b,s,o,p,E,m,e,g.steps,a.labels.length+1)}function I(){if(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,b.xAxisTop||b.xAxisBottom){if(c.textBaseline="top",c.fillStyle=b.scaleFontColor,b.xAxisBottom){s.rotateLabels>90?(c.save(),c.textAlign="left"):s.rotateLabels>0?(c.save(),c.textAlign="right"):c.textAlign="center";for(var d=0;d<a.labels.length;d++)showLabels(c,a,b,d)&&(c.save(),s.rotateLabels>0?(c.translate(o+Math.ceil(c.chartSpaceScale*b.barValueSpacing)+d*m+D+q/2-s.highestXLabel/2,s.xLabelPos),c.rotate(-((s.rotateLabels+180*(s.rotateLabels>90))*(Math.PI/180))),c.fillTextMultiLine(fmtChartJS(b,a.labels[d],b.fmtXLabel),0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",-(s.rotateLabels*(Math.PI/180)),o+Math.ceil(c.chartSpaceScale*b.barValueSpacing)+d*m+D+q/2-s.highestXLabel/2,s.xLabelPos,d,-1)):c.fillTextMultiLine(fmtChartJS(b,a.labels[d],b.fmtXLabel),o+Math.ceil(c.chartSpaceScale*b.barValueSpacing)+d*m+D+q/2,s.xLabelPos,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",0,0,0,d,-1),c.restore())}if(b.xAxisTop){s.rotateTLabels>90?(c.save(),c.textAlign="left"):s.rotateTLabels>0?(c.save(),c.textAlign="right"):c.textAlign="center";var i;i="object"==typeof a.labels2?a.labels2:a.labels;for(var d=0;d<i.length;d++)showLabels(c,a,b,d)&&(c.save(),s.rotateTLabels>0?(c.translate(o+Math.ceil(c.chartSpaceScale*b.barValueSpacing)+d*m+D+q/2-s.highestTXLabel/2,s.xTLabelPos),c.rotate(-((s.rotateTLabels+180*(s.rotateTLabels>90))*(Math.PI/180))),c.fillTextMultiLine(fmtChartJS(b,i[d],b.fmtXLabel),0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",-(s.rotateLabels*(Math.PI/180)),o+Math.ceil(c.chartSpaceScale*b.barValueSpacing)+d*m+D+q/2-s.highestXLabel/2,s.xLabelPos,d,-1)):c.fillTextMultiLine(fmtChartJS(b,i[d],b.fmtXLabel),o+Math.ceil(c.chartSpaceScale*b.barValueSpacing)+d*m+D+q/2,s.xTLabelPos,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",0,0,0,d,-1),c.restore())}}c.textAlign="right",c.textBaseline="middle";for(var j=b.showYAxisMin?-1:0;j<g.steps;j++)b.scaleShowLabels&&showYLabels(c,a,b,j+1,g.labels[j+1])&&(b.yAxisLeft&&(c.textAlign="right",c.fillTextMultiLine(g.labels[j+1],o-(Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),p-(j+1)*e,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,j)),!b.yAxisRight||k.dbAxis||b.forceSecondScale||(c.textAlign="left",c.fillTextMultiLine(g.labels[j+1],o+s.availableWidth+(Math.ceil(c.chartLineScale*b.scaleTickSizeRight)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),p-(j+1)*e,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,j)));if(b.yAxisRight&&(k.dbAxis||b.forceSecondScale))for(j=b.showYAxisMin?-1:0;j<h.steps;j++)b.scaleShowLabels&&(c.textAlign="left",c.fillTextMultiLine(h.labels[j+1],o+s.availableWidth+(Math.ceil(c.chartLineScale*b.scaleTickSizeRight)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),p-(j+1)*f,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,j))}function J(){for(var d=-Number.MAX_VALUE,e=Number.MAX_VALUE,f=-Number.MAX_VALUE,g=Number.MAX_VALUE,h=-Number.MAX_VALUE,k=Number.MAX_VALUE,l=-Number.MAX_VALUE,m=Number.MAX_VALUE,n=!1,o=!1,p=[],q=[],r=[],u=[],v=0,w=0,x=0,y=0,z=0;z<a.datasets.length;z++)for(var A=0;A<a.datasets[z].data.length;A++)2==a.datasets[z].axis&&"Line"==t[z][0].tpchart?(n=!0,1*a.datasets[z].data[A]>0?("Bar"==t[z][0].tpchart?("undefined"==typeof p[A]&&(r[A]=0),r[A]+=1*a.datasets[z].data[A],h=Math.max(h,r[A])):h=Math.max(h,1*a.datasets[z].data[A]),k=Math.min(k,1*a.datasets[z].data[A]),x=1):"number"==typeof(1*a.datasets[z].data[A])&&"undefined"!=typeof a.datasets[z].data[A]&&("Bar"==t[z][0].tpchart?("undefined"==typeof u[A]&&(u[A]=0),u[A]+=1*a.datasets[z].data[A],m=Math.min(m,u[A])):m=Math.min(m,1*a.datasets[z].data[A]),l=Math.max(l,1*a.datasets[z].data[A]),y=1)):(o=!0,1*a.datasets[z].data[A]>0?("Bar"==t[z][0].tpchart?("undefined"==typeof p[A]&&(p[A]=0),p[A]+=1*a.datasets[z].data[A],d=Math.max(d,p[A])):d=Math.max(d,1*a.datasets[z].data[A]),e=Math.min(e,1*a.datasets[z].data[A]),v=1):"number"==typeof(1*a.datasets[z].data[A])&&"undefined"!=typeof a.datasets[z].data[A]&&("Bar"==t[z][0].tpchart?("undefined"==typeof q[A]&&(q[A]=0),q[A]+=1*a.datasets[z].data[A],g=Math.min(g,q[A])):g=Math.min(g,1*a.datasets[z].data[A]),f=Math.max(f,1*a.datasets[z].data[A]),w=1));!o&&n&&(B=D,C=E);var B,C;0==v?(B=f,C=g):0==w?(B=d,C=e):(B=d,C=g),"function"==typeof b.graphMin?C=setOptionValue(!0,!0,1,"GRAPHMIN",c,a,t,void 0,b.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(b.graphMin)||(C=b.graphMin),"function"==typeof b.graphMax?B=setOptionValue(!0,!0,1,"GRAPHMAX",c,a,t,void 0,b.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(b.graphMax)||(B=b.graphMax),B<C&&(B=0,C=0),Math.abs(B-C)<b.zeroValue&&(Math.abs(B)<b.zeroValue&&(B=.9),B>0?(B=1.1*B,C=.9*C):(B=.9*B,C=1.1*C));var D,E;n&&(0==x?(D=l,E=m):0==y?(D=h,E=k):(D=h,E=m),"function"==typeof b.graphMin2?E=setOptionValue(!0,!0,1,"GRAPHMIN2",c,a,t,void 0,b.graphMin2,"graphMin2",-1,-1,{nullValue:!0}):isNaN(b.graphMin2)||(E=b.graphMin2),"function"==typeof b.graphMax2?D=setOptionValue(!0,!0,1,"GRAPHMAX2",c,a,t,void 0,b.graphMax2,"graphMax2",-1,-1,{nullValue:!0}):isNaN(b.graphMax2)||(D=b.graphMax2),D<E&&(D=0,E=0),Math.abs(D-E)<b.zeroValue&&(Math.abs(D)<b.zeroValue&&(D=.9),D>0?(D=1.1*D,E=.9*E):(D=.9*D,E=1.1*E))),i=Math.ceil(c.chartTextScale*b.scaleFontSize),j=s.availableHeight;var F=Math.floor(j/(.66*i)),G=Math.floor(j/i*.5);return B<C&&(C=B-1),D<E&&(E=D-1),{maxValue:B,minValue:C,maxValue2:D,minValue2:E,dbAxis:n,maxSteps:F,minSteps:G}}var e,f,g,h,i,j,k,l,m,o,p,q,s;if(c.tpchart="StackedBar",c.tpdata=0,init_and_start(c,a,b)){for(var t=initPassVariableData_part1(a,b,c),u=a.datasets.length,v=0;v<a.datasets.length;v++)"Line"==a.datasets[v].type?(t[v][0].tpchart="Line",u--):t[v][0].tpchart="Bar";if(b.logarithmic=!1,s=setMeasures(a,b,c,c.canvas.height,c.canvas.width,"nihil","nihil",!0,!1,!0,!0,"StackedBar"),k=J(),k.maxSteps>0&&k.minSteps>0){if(l=b.scaleShowLabels?b.scaleLabel:"",labelTemplateString2=b.scaleShowLabels2?b.scaleLabel2:"",b.scaleOverride){var w=setOptionValue(!0,!0,1,"SCALESTARTVALUE",c,a,t,void 0,b.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),x=setOptionValue(!0,!0,1,"SCALESTEPS",c,a,t,void 0,b.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),y=setOptionValue(!0,!0,1,"SCALESTEPWIDTH",c,a,t,void 0,b.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});g={steps:x,stepValue:y,graphMin:w,labels:[]};for(var v=0;v<=g.steps;v++)l&&g.labels.push(tmpl(l,{value:fmtChartJS(b,1*(w+y*v).toFixed(getDecimalPlaces(y)),b.fmtYLabel)},b))}else g=calculateScale(1,b,k.maxSteps,k.minSteps,k.maxValue,k.minValue,l);if(k.dbAxis||b.forceSecondScale)if(b.scaleOverride2){var z=setOptionValue(!0,!0,1,"SCALESTARTVALUE2",c,a,t,void 0,b.scaleStartValue2,"scaleStartValue2",-1,-1,{nullValue:!0}),A=setOptionValue(!0,!0,1,"SCALESTEPS2",c,a,t,void 0,b.scaleSteps2,"scaleSteps2",-1,-1,{nullValue:!0}),B=setOptionValue(!0,!0,1,"SCALESTEPWIDTH2",c,a,t,void 0,b.scaleStepWidth2,"scaleStepWidth2",-1,-1,{nullValue:!0});h={steps:A,stepValue:B,graphMin:z,labels:[]};for(var v=0;v<=h.steps;v++)labelTemplateString2&&h.labels.push(tmpl(labelTemplateString2,{value:fmtChartJS(b,1*(z+B*v).toFixed(getDecimalPlaces(B)),b.fmtYLabel)},b))}else h=calculateScale(1,b,k.maxSteps,k.minSteps,k.maxValue2,k.minValue2,labelTemplateString2);else h={steps:0,stepValue:0,graphMin:0,graphMax:0,labels:null};s=setMeasures(a,b,c,c.canvas.height,c.canvas.width,g.labels,h.labels,!0,!1,!0,!0,"StackedBar");s.availableHeight;s.availableHeight=s.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)-Math.ceil(c.chartLineScale*b.scaleTickSizeTop),s.availableWidth=s.availableWidth-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)-Math.ceil(c.chartLineScale*b.scaleTickSizeRight),e=Math.floor(s.availableHeight/g.steps),f=Math.floor(s.availableHeight/h.steps),m=Math.floor(s.availableWidth/a.labels.length),(0==m||b.fullWidthGraph)&&(m=s.availableWidth/a.labels.length),s.topNotUsableHeight+=s.availableHeight-g.steps*e,s.rightNotUsableWidth+=s.availableWidth-a.labels.length*m,s.clrwidth=s.clrwidth-(s.availableWidth-a.labels.length*m),s.availableWidth=a.labels.length*m,s.availableHeight=g.steps*e,o=s.leftNotUsableWidth+Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),p=s.topNotUsableHeight+s.availableHeight+Math.ceil(c.chartLineScale*b.scaleTickSizeTop),q=m-2*Math.ceil(c.chartLineScale*b.scaleGridLineWidth)-2*Math.ceil(c.chartSpaceScale*b.barValueSpacing)-(1*Math.ceil(c.chartSpaceScale*b.barDatasetSpacing)-1)-Math.ceil(c.chartLineScale*b.barStrokeWidth)/2-1,q>=0&&q<=1&&(q=1),q<0&&q>=-1&&(q=-1);var D;1*b.maxBarWidth>0&&q>1*b.maxBarWidth?(D=(q-1*b.maxBarWidth)/2,q=1*b.maxBarWidth):D=0;var E=0,F=0;E=calculateOffset(!1,0,g,e),"object"==typeof h&&(F=calculateOffset(b.logarithmic2,0,h,f)),I(),initPassVariableData_part2(t,a,b,c,{msr:s,zeroY:E,zeroY2:F,logarithmic:!1,logarithmic2:!1,calculatedScale:g,calculatedScale2:h,additionalSpaceBetweenBars:D,scaleHop:e,scaleHop2:f,valueHop:m,yAxisPosX:o,xAxisPosY:p,barWidth:q}),animationLoop(b,s.legendMsr,H,G,c,s.clrx,s.clry,s.clrwidth,s.clrheight,o+s.availableWidth/2,p-s.availableHeight/2,o,p,a,t)}else testRedraw(c,a,b),c.firstPass=9;return{data:a,config:b,ctx:c}}},HorizontalStackedBar=function(a,b,c){function y(a,b,c){var d=b.steps*b.stepValue,e=a-b.graphMin,f=CapValue(e/d,1,0);return c*b.steps*f}function z(d){for(var e=new Array,f=new Array,g=0;g<a.datasets.length;g++)for(var h=0;h<a.datasets[g].data.length;h++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,r,a.displayData,b.displayData,"displayData",h,-1,{nullvalue:null})){c.lineWidth=Math.ceil(c.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",c,a,r,a.datasets[g].barStrokeWidth,b.barStrokeWidth,"barStrokeWidth",g,h,{animationValue:i,xPosLeft:j,yPosBottom:r[g][h].yPosBottom,xPosRight:k,yPosTop:r[g][h].yPosBottom}));var i=animationCorrection(d,a,b,g,h,!1).animVal;if(i>1&&(i-=1),"undefined"!=typeof a.datasets[g].data[h]&&1*a.datasets[g].data[h]!=0&&!(Math.abs(a.datasets[g].data[h])<b.zeroValue&&0==b.showZeroValue)){"undefined"==typeof e[h]&&(e[h]=r[r[g][h].firstNotMissing][h].xPosLeft,f[h]=r[r[g][h].firstNotMissing][h].xPosLeft);var j,k;j=1*a.datasets[g].data[h]>0?e[h]:f[h],k=j+i*(r[g][h].xPosRight-r[g][h].xPosLeft),1*a.datasets[g].data[h]>0?e[h]=k:f[h]=k,0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,r,a.datasets[g].displayData,b.displayData,"displayData",g,h,{nullvalue:null})&&(c.fillStyle=setOptionValue(!0,!0,1,"COLOR",c,a,r,a.datasets[g].fillColor,b.defaultFillColor,"fillColor",g,h,{animationValue:i,xPosLeft:j,yPosBottom:r[g][h].yPosBottom,xPosRight:k,yPosTop:r[g][h].yPosBottom}),c.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",c,a,r,a.datasets[g].strokeColor,b.defaultStrokeColor,"strokeColor",g,h,{nullvalue:null}),0!=i&&r[g][h].xPosLeft!=r[g][h].xPosRight&&(c.beginPath(),c.moveTo(j+(k-j)/2,r[g][h].yPosTop),c.lineTo(k,r[g][h].yPosTop),c.lineTo(k,r[g][h].yPosBottom),c.lineTo(j,r[g][h].yPosBottom),c.lineTo(j,r[g][h].yPosTop),c.lineTo(j+(k-j)/2,r[g][h].yPosTop),b.barShowStroke&&(c.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"STROKESTYLE",c,a,r,a.datasets[g].datasetStrokeStyle,b.datasetStrokeStyle,"datasetStrokeStyle",g,h,{nullvalue:null}))),c.stroke(),c.setLineDash([])),c.closePath(),c.fill()))}}if(d>=b.animationStopValue){var l=0,m=0;for(g=0;g<a.datasets.length;g++)for(h=0;h<a.datasets[g].data.length;h++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,r,a.datasets[g].displayData,b.displayData,"displayData",g,h,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,r,a.displayData,b.displayData,"displayData",h,-1,{nullvalue:null})&&"undefined"!=typeof a.datasets[g].data[h]&&(jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["RECT",g,h,r,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",c,a,r,a.datasets[g].annotateDisplay,b.annotateDisplay,"annotateDisplay",g,h,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",c,a,r,a.datasets[g].inGraphDataShow,b.inGraphDataShow,"inGraphDataShow",g,h,{nullValue:!0}))){c.save(),c.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",c,a,r,void 0,b.inGraphDataAlign,"inGraphDataAlign",g,h,{nullValue:!0}),c.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",c,a,r,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",g,h,{nullValue:!0}),c.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",c,a,r,void 0,b.inGraphDataFontStyle,"inGraphDataFontStyle",g,h,{nullValue:!0})+" "+setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,r,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",g,h,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",c,a,r,void 0,b.inGraphDataFontFamily,"inGraphDataFontFamily",g,h,{nullValue:!0}),c.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",c,a,r,void 0,b.inGraphDataFontColor,"inGraphDataFontColor",g,h,{nullValue:!0});var n=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",c,a,r,void 0,b.inGraphDataTmpl,"inGraphDataTmpl",g,h,{nullValue:!0}),r[g][h],b);c.beginPath(),l=0,m=0,1==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",c,a,r,void 0,b.inGraphDataXPosition,"inGraphDataXPosition",g,h,{nullValue:!0})?m=r[g][h].xPosLeft+setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,r,void 0,b.inGraphDataPaddingX,"inGraphDataPaddingX",g,h,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",c,a,r,void 0,b.inGraphDataXPosition,"inGraphDataXPosition",g,h,{nullValue:!0})?m=r[g][h].xPosLeft+(r[g][h].xPosRight-r[g][h].xPosLeft)/2+setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,r,void 0,b.inGraphDataPaddingX,"inGraphDataPaddingX",g,h,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",c,a,r,void 0,b.inGraphDataXPosition,"inGraphDataXPosition",g,h,{nullValue:!0})&&(m=r[g][h].xPosRight+setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,r,void 0,b.inGraphDataPaddingX,"inGraphDataPaddingX",g,h,{nullValue:!0})),1==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",c,a,r,void 0,b.inGraphDataYPosition,"inGraphDataYPosition",g,h,{nullValue:!0})?l=r[g][h].yPosBottom-setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,r,void 0,b.inGraphDataPaddingY,"inGraphDataPaddingY",g,h,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",c,a,r,void 0,b.inGraphDataYPosition,"inGraphDataYPosition",g,h,{nullValue:!0})?l=r[g][h].yPosBottom-o/2-setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,r,void 0,b.inGraphDataPaddingY,"inGraphDataPaddingY",g,h,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",c,a,r,void 0,b.inGraphDataYPosition,"inGraphDataYPosition",g,h,{nullValue:!0})&&(l=r[g][h].yPosTop-setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,r,void 0,b.inGraphDataPaddingY,"inGraphDataPaddingY",g,h,{nullValue:!0})),c.translate(m,l),rotateVal=setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,r,void 0,b.inGraphDataRotate,"inGraphDataRotate",g,h,{nullValue:!0})*(Math.PI/180),c.rotate(rotateVal),setTextBordersAndBackground(c,n,setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,r,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",g,h,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",c,a,r,void 0,b.inGraphDataBorders,"inGraphDataBorders",g,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",c,a,r,void 0,b.inGraphDataBordersSelection,"inGraphDataBordersSelection",g,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",c,a,r,void 0,b.inGraphDataBordersColor,"inGraphDataBordersColor",g,h,{nullValue:!0}),setOptionValue(!0,!0,c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,r,void 0,b.inGraphDataBordersWidth,"inGraphDataBordersWidth",g,h,{nullValue:!0}),setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,r,void 0,b.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",g,h,{nullValue:!0}),setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,r,void 0,b.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",g,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",c,a,r,void 0,b.inGraphDataBordersStyle,"inGraphDataBordersStyle",g,h,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",c,a,r,void 0,b.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",g,h,{nullValue:!0}),"INGRAPHDATA",b.inGraphDataBordersRadius),c.fillTextMultiLine(n,0,0,c.textBaseline,setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,r,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",g,h,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",rotateVal,m,l,g,h),c.restore()}}}function A(){drawGridScale(c,a,b,q,m,n,x,k,e,a.labels.length+0,f.steps+1)}function B(){if(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,b.scaleShowLabels&&(b.xAxisTop||b.xAxisBottom)){if(c.textBaseline="top",c.fillStyle=b.scaleFontColor,b.xAxisBottom){q.rotateLabels>90?(c.save(),c.textAlign="left"):q.rotateLabels>0?(c.save(),c.textAlign="right"):c.textAlign="center";for(var d=b.showYAxisMin?-1:0;d<f.steps;d++)showYLabels(c,a,b,d+1,f.labels[d+1])&&(c.save(),q.rotateLabels>0?(c.translate(m+(d+1)*k-q.highestXLabel/2,q.xLabelPos),c.rotate(-((q.rotateLabels+180*(q.rotateLabels>90))*(Math.PI/180))),c.fillTextMultiLine(f.labels[d+1],0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",-(q.rotateLabels*(Math.PI/180)),m+(d+1)*k-q.highestXLabel/2,q.xLabelPos,d,-1)):c.fillTextMultiLine(f.labels[d+1],m+(d+1)*k,q.xLabelPos,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",0,0,0,d,-1),c.restore())}if(b.xAxisTop){q.rotateTLabels>90?(c.save(),c.textAlign="left"):q.rotateTLabels>0?(c.save(),c.textAlign="right"):c.textAlign="center";for(var d=b.showYAxisMin?-1:0;d<f.steps;d++)showYLabels(c,a,b,d+1,f.labels[d+1])&&(c.save(),q.rotateTLabels>0?(c.translate(m+(d+1)*k-q.highestTXLabel/2,q.xTLabelPos),c.rotate(-((q.rotateTLabels+180*(q.rotateTLabels>90))*(Math.PI/180))),c.fillTextMultiLine(f.labels[d+1],0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",-(q.rotateLabels*(Math.PI/180)),m+(d+1)*k-q.highestXLabel/2,q.xLabelPos,d,-1)):c.fillTextMultiLine(f.labels[d+1],m+(d+1)*k,q.xTLabelPos,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",0,0,0,d,-1),
c.restore())}}c.textAlign="right",c.textBaseline="middle";for(var g=0;g<a.labels.length;g++)showLabels(c,a,b,g)&&(b.yAxisLeft&&(c.textAlign="right",c.fillTextMultiLine(fmtChartJS(b,a.labels[g],b.fmtXLabel),m-(Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),n-(g+1)*e+Math.ceil(c.chartSpaceScale*b.barValueSpacing)+w+o/2,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,g)),b.yAxisRight&&(c.textAlign="left",c.fillTextMultiLine(fmtChartJS(b,a.labels[g],b.fmtXLabel),m+q.availableWidth+(Math.ceil(c.chartLineScale*b.scaleTickSizeRight)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),n-(g+1)*e+w+o/2,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,g)))}function C(){for(var d=-Number.MAX_VALUE,e=Number.MAX_VALUE,j=(new Array(a.datasets.length),new Array(a.datasets.length),0);j<a.datasets.length;j++)for(var k=0;k<a.datasets[j].data.length;k++){var l=j,m=0,n=0;for("undefined"!=typeof a.datasets[0].data[k]&&(1*a.datasets[0].data[k]>0?(m+=1*a.datasets[0].data[k],m>d&&(d=m),m<e&&(e=m)):(n+=1*a.datasets[0].data[k],n>d&&(d=n),n<e&&(e=n)));l>0;)"undefined"!=typeof a.datasets[l].data[k]&&(1*a.datasets[l].data[k]>0?(m+=1*a.datasets[l].data[k],m>d&&(d=m),m<e&&(e=m)):(n+=1*a.datasets[l].data[k],n>d&&(d=n),n<e&&(e=n))),l--}"function"==typeof b.graphMin?e=setOptionValue(!0,!0,1,"GRAPHMIN",c,a,r,void 0,b.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(b.graphMin)||(e=b.graphMin),"function"==typeof b.graphMax?d=setOptionValue(!0,!0,1,"GRAPHMAX",c,a,r,void 0,b.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(b.graphMax)||(d=b.graphMax),d<e&&(d=0,e=0),Math.abs(d-e)<b.zeroValue&&(Math.abs(d)<b.zeroValue&&(d=.9),d>0?(d=1.1*d,e=.9*e):(d=.9*d,e=1.1*e)),g=Math.ceil(c.chartTextScale*b.scaleFontSize),h=q.availableHeight;var o=Math.floor(h/(.66*g)),p=Math.floor(h/g*.5);return d<e&&(e=d-1),{maxValue:d,minValue:e,maxSteps:o,minSteps:p}}var e,f,g,h,i,j,k,m,n,o,q;if(b.reverseOrder&&"undefined"==typeof c.reversed&&(c.reversed=!0,a=reverseData(a)),c.tpchart="HorizontalStackedBar",c.tpdata=0,init_and_start(c,a,b)){var r=initPassVariableData_part1(a,b,c);if(b.logarithmic=!1,q=setMeasures(a,b,c,c.canvas.height,c.canvas.width,"nihil","nihil",!0,!0,!0,!0,"HorizontalStackedBar"),i=C(),i.maxSteps>0&&i.minSteps>0){if(j=b.scaleShowLabels?b.scaleLabel:"",b.scaleOverride){var s=setOptionValue(!0,!0,1,"SCALESTARTVALUE",c,a,r,void 0,b.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),t=setOptionValue(!0,!0,1,"SCALESTEPS",c,a,r,void 0,b.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),u=setOptionValue(!0,!0,1,"SCALESTEPWIDTH",c,a,r,void 0,b.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});f={steps:t,stepValue:u,graphMin:s,labels:[]};for(var v=0;v<=f.steps;v++)j&&f.labels.push(tmpl(j,{value:fmtChartJS(b,1*(s+u*v).toFixed(getDecimalPlaces(u)),b.fmtYLabel)},b));q=setMeasures(a,b,c,c.canvas.height,c.canvas.width,f.labels,null,!0,!0,!0,!0,"HorizontalStackedBar")}else f=calculateScale(1,b,i.maxSteps,i.minSteps,i.maxValue,i.minValue,j),q=setMeasures(a,b,c,c.canvas.height,c.canvas.width,f.labels,f.labels,!0,!0,!0,!0,"HorizontalStackedBar");q.availableHeight=q.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)-Math.ceil(c.chartLineScale*b.scaleTickSizeTop),q.availableWidth=q.availableWidth-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)-Math.ceil(c.chartLineScale*b.scaleTickSizeRight),e=Math.floor(q.availableHeight/a.labels.length),k=Math.floor(q.availableWidth/f.steps),(0==k||b.fullWidthGraph)&&(k=q.availableWidth/f.steps),q.clrwidth=q.clrwidth-(q.availableWidth-f.steps*k),q.topNotUsableHeight+=q.availableHeight-a.labels.length*e,q.rightNotUsableWidth+=q.availableWidth-f.steps*k,q.availableWidth=f.steps*k,q.availableHeight=a.labels.length*e,m=q.leftNotUsableWidth+Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),n=q.topNotUsableHeight+q.availableHeight+Math.ceil(c.chartLineScale*b.scaleTickSizeTop),o=e-2*Math.ceil(c.chartLineScale*b.scaleGridLineWidth)-2*Math.ceil(c.chartSpaceScale*b.barValueSpacing)-(1*Math.ceil(c.chartSpaceScale*b.barDatasetSpacing)-1)-Math.ceil(c.chartLineScale*b.barStrokeWidth)/2-1,o>=0&&o<=1&&(o=1),o<0&&o>=-1&&(o=-1);var w;1*b.maxBarWidth>0&&o>1*b.maxBarWidth?(w=(o-1*b.maxBarWidth)/2,o=1*b.maxBarWidth):w=0,B();var x=y(0,f,e);initPassVariableData_part2(r,a,b,c,{yAxisPosX:m,additionalSpaceBetweenBars:w,xAxisPosY:n,barWidth:o,zeroY:x,scaleHop:e,valueHop:k,calculatedScale:f}),animationLoop(b,q.legendMsr,A,z,c,q.clrx,q.clry,q.clrwidth,q.clrheight,m+q.availableWidth/2,n-q.availableHeight/2,m,n,a,r)}else testRedraw(c,a,b),c.firstPass=9;return{data:a,config:b,ctx:c}}},Bar=function(data,config,ctx){function drawBars(a){var b,c,e,f,g,h,i,j,k,l,m,n;for(h=0;h<data.datasets.length;h++)if("Line"!=data.datasets[h].type)for(i=0;i<data.datasets[h].data.length;i++)0!=setOptionValue(!0,!0,1,"DISPLAYDATA",ctx,data,statData,data.datasets[h].displayData,config.displayData,"displayData",h,i,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",i,-1,{nullvalue:null})&&(ctx.save(),ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",ctx,data,statData,data.datasets[h].barStrokeWidth,config.barStrokeWidth,"barStrokeWidth",h,i,{animationValue:j,xPosLeft:statData[h][i].xPosLeft,yPosBottom:statData[h][i].yPosBottom,xPosRight:statData[h][i].xPosLeft+barWidth,yPosTop:statData[h][i].yPosBottom-g})),"undefined"!=typeof data.datasets[h].data[i]&&(Math.abs(data.datasets[h].data[i])>=config.zeroValue||1==config.showZeroValue)&&(j=animationCorrection(a,data,config,h,i,!1).animVal,j>1&&(j-=1),g=1*data.datasets[h].data[i]>=0?j*statData[h][i].barHeight-Math.ceil(ctx.chartLineScale*ctx.lineWidth)/2:j*statData[h][i].barHeight+Math.ceil(ctx.chartLineScale*ctx.lineWidth)/2,ctx.fillStyle=setOptionValue(!0,!0,1,"COLOR",ctx,data,statData,data.datasets[h].fillColor,config.defaultFillColor,"fillColor",h,i,{animationValue:j,xPosLeft:statData[h][i].xPosLeft,yPosBottom:statData[h][i].yPosBottom,xPosRight:statData[h][i].xPosLeft+barWidth,yPosTop:statData[h][i].yPosBottom-g}),ctx.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",ctx,data,statData,data.datasets[h].strokeColor,config.defaultStrokeColor,"strokeColor",h,i,{nullvalue:null}),roundRect(ctx,statData[h][i].xPosLeft,statData[h][i].yPosBottom,barWidth,g,config.barShowStroke,config.barBorderRadius,h,i,data.datasets[h].data[i]<0?-1:1)),ctx.restore());for(h=0;h<data.datasets.length;h++)if("Line"!=data.datasets[h].type)for(i=0;i<data.datasets[h].data.length;i++)0!=setOptionValue(!0,!0,1,"DISPLAYDATA",ctx,data,statData,data.datasets[h].displayData,config.displayData,"displayData",h,i,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",i,-1,{nullvalue:null})&&(e=setOptionValue(!0,!0,1,"COMPLEMENTARYBAR",ctx,data,statData,data.datasets[h].complementaryBar,config.complementaryBar,"complementaryBar",h,i,{nullvalue:null}),0!=e&&(ctx.save(),ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",ctx,data,statData,data.datasets[h].barStrokeWidth,config.barStrokeWidth,"barStrokeWidth",h,i,{animationValue:j,xPosLeft:statData[h][i].xPosLeft,yPosBottom:statData[h][i].yPosBottom,xPosRight:statData[h][i].xPosLeft+barWidth,yPosTop:statData[h][i].yPosBottom-g})),j=animationCorrection(a,data,config,h,i,!1).animVal,j>1&&(j-=1),g="undefined"!=typeof data.datasets[h].data[i]?1*data.datasets[h].data[i]>=0?j*statData[h][i].barHeight-Math.ceil(ctx.chartLineScale*ctx.lineWidth)/2:j*statData[h][i].barHeight+Math.ceil(ctx.chartLineScale*ctx.lineWidth)/2:0,k=msr.clrheight-Math.ceil(ctx.chartLineScale*(config.scaleTickSizeTop+config.scaleTickSizeBottom)),l=statData[h][i].yPosBottom-msr.clry-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop),m=k-l,1*data.datasets[h].data[i]<0?(f=-(m+g)+3*(ctx.lineWidth/2),otherBarHeight2=l-3*(ctx.lineWidth/2),n=-(ctx.lineWidth/2)):(f=l-g-3*(ctx.lineWidth/2),otherBarHeight2=-(m-3*(ctx.lineWidth/2)),n=+(ctx.lineWidth/2)),ctx.fillStyle=setOptionValue(!0,!0,1,"COMPLEMENTARYCOLOR",ctx,data,statData,data.datasets[h].complementaryColor,config.complementaryColor,"complementaryColor",h,i,{animationValue:j,xPosLeft:statData[h][i].xPosLeft,yPosBottom:statData[h][i].yPosBottom-g,xPosRight:statData[h][i].xPosLeft+barWidth,yPosTop:statData[h][i].yPosBottom-g-f}),ctx.strokeStyle=setOptionValue(!0,!0,1,"COMPLEMENTARYSTROKECOLOR",ctx,data,statData,data.datasets[h].complementaryStrokeColor,config.complementaryStrokeColor,"strokeColor",h,i,{nullvalue:null}),roundRect(ctx,statData[h][i].xPosLeft,statData[h][i].yPosBottom-g-2*n,barWidth,f,config.barShowStroke,config.barBorderRadius,h,i,data.datasets[h].data[i]<0?-1:1),config.complementaryBarFullHeight&&roundRect(ctx,statData[h][i].xPosLeft,statData[h][i].yPosBottom+2*n,barWidth,otherBarHeight2,config.barShowStroke,config.barBorderRadius,h,i,data.datasets[h].data[i]<0?-1:1),ctx.restore()));if(drawLinesDataset(a,data,config,ctx,statData,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length}),a>=config.animationStopValue)for(h=0;h<data.datasets.length;h++)for(i=0;i<data.datasets[h].data.length;i++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",ctx,data,statData,data.datasets[h].displayData,config.displayData,"displayData",h,i,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",i,-1,{nullvalue:null})&&"undefined"!=typeof data.datasets[h].data[i]&&"Line"!=data.datasets[h].type&&(jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["RECT",h,i,statData,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",ctx,data,statData,data.datasets[h].annotateDisplay,config.annotateDisplay,"annotateDisplay",h,i,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",ctx,data,statData,data.datasets[h].inGraphDataShow,config.inGraphDataShow,"inGraphDataShow",h,i,{nullValue:!0}))){ctx.save(),ctx.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",ctx,data,statData,void 0,config.inGraphDataAlign,"inGraphDataAlign",h,i,{nullValue:!0}),ctx.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",ctx,data,statData,void 0,config.inGraphDataVAlign,"inGraphDataVAlign",h,i,{nullValue:!0}),ctx.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,void 0,config.inGraphDataFontStyle,"inGraphDataFontStyle",h,i,{nullValue:!0})+" "+setOptionValue(!0,!0,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,void 0,config.inGraphDataFontSize,"inGraphDataFontSize",h,i,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,void 0,config.inGraphDataFontFamily,"inGraphDataFontFamily",h,i,{nullValue:!0}),ctx.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,void 0,config.inGraphDataFontColor,"inGraphDataFontColor",h,i,{nullValue:!0}),b=statData[h][i].yPosBottom,c=statData[h][i].yPosTop,ctx.beginPath();var o=0,p=0;1==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,"inGraphDataXPosition",h,i,{nullValue:!0})?p=statData[h][i].xPosLeft+setOptionValue(!0,!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,"inGraphDataPaddingX",h,i,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,"inGraphDataXPosition",h,i,{nullValue:!0})?p=statData[h][i].xPosLeft+barWidth/2+setOptionValue(!0,!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,"inGraphDataPaddingX",h,i,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",ctx,data,statData,void 0,config.inGraphDataXPosition,"inGraphDataXPosition",h,i,{nullValue:!0})&&(p=statData[h][i].xPosLeft+barWidth+setOptionValue(!0,!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,void 0,config.inGraphDataPaddingX,"inGraphDataPaddingX",h,i,{nullValue:!0})),1==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,"inGraphDataYPosition",h,i,{nullValue:!0})?o=statData[h][i].yPosBottom-setOptionValue(!0,!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,"inGraphDataPaddingY",h,i,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,"inGraphDataYPosition",h,i,{nullValue:!0})?o=(statData[h][i].yPosBottom+statData[h][i].yPosTop)/2-setOptionValue(!0,!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,"inGraphDataPaddingY",h,i,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",ctx,data,statData,void 0,config.inGraphDataYPosition,"inGraphDataYPosition",h,i,{nullValue:!0})&&(o=statData[h][i].yPosTop-setOptionValue(!0,!0,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,void 0,config.inGraphDataPaddingY,"inGraphDataPaddingY",h,i,{nullValue:!0})),ctx.translate(p,o);var q=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",ctx,data,statData,void 0,config.inGraphDataTmpl,"inGraphDataTmpl",h,i,{nullValue:!0}),statData[h][i],config);rotateVal=setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",ctx,data,statData,void 0,config.inGraphDataRotate,"inGraphDataRotate",h,i,{nullValue:!0})*(Math.PI/180),ctx.rotate(rotateVal),setTextBordersAndBackground(ctx,q,setOptionValue(!0,!0,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,void 0,config.inGraphDataFontSize,"inGraphDataFontSize",h,i,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",ctx,data,statData,void 0,config.inGraphDataBorders,"inGraphDataBorders",h,i,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",ctx,data,statData,void 0,config.inGraphDataBordersSelection,"inGraphDataBordersSelection",h,i,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,void 0,config.inGraphDataBordersColor,"inGraphDataBordersColor",h,i,{nullValue:!0}),setOptionValue(!0,!0,ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,void 0,config.inGraphDataBordersWidth,"inGraphDataBordersWidth",h,i,{nullValue:!0}),setOptionValue(!0,!0,ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,void 0,config.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",h,i,{nullValue:!0}),setOptionValue(!0,!0,ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,void 0,config.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",h,i,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,void 0,config.inGraphDataBordersStyle,"inGraphDataBordersStyle",h,i,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,void 0,config.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",h,i,{nullValue:!0}),"INGRAPHDATA",config.inGraphDataBordersRadius),ctx.fillTextMultiLine(q,0,0,ctx.textBaseline,setOptionValue(!0,!0,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,void 0,config.inGraphDataFontSize,"inGraphDataFontSize",h,i,{nullValue:!0}),!0,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,p,o,h,i),ctx.restore()}a>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset,additionalSpaceBetweenBars:additionalSpaceBetweenBars,barWidth:barWidth})}function roundRect(a,b,c,d,e,f,g,h,i,j){a.beginPath(),a.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"STROKESTYLE",a,data,statData,data.datasets[h].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",h,i,{nullvalue:null}))),a.moveTo(b+d/2,c),a.lineTo(b+d,c),a.lineTo(b+d,c-e+j*g),a.quadraticCurveTo(b+d,c-e,b+d-g,c-e),a.lineTo(b+g,c-e),a.quadraticCurveTo(b,c-e,b,c-e+j*g),a.lineTo(b,c),a.lineTo(b+d/2,c),f&&a.stroke(),a.closePath(),a.fill(),a.setLineDash([])}function drawScale(){drawGridScale(ctx,data,config,msr,yAxisPosX,xAxisPosY,zeroY,valueHop,scaleHop,calculatedScale.steps,data.labels.length+1)}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+Math.ceil(ctx.chartTextScale*config.scaleFontSize).toString()+"px "+config.scaleFontFamily,config.xAxisTop||config.xAxisBottom){if(ctx.textBaseline="top",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom){msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center";for(var a=0;a<data.labels.length;a++)showLabels(ctx,data,config,a)&&(ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+a*valueHop+valueHop/2-msr.highestXLabel/2,msr.xLabelPos),ctx.rotate(-((msr.rotateLabels+180*(msr.rotateLabels>90))*(Math.PI/180))),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[a],config.fmtXLabel),0,0,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+a*valueHop+valueHop/2-msr.highestXLabel/2,msr.xLabelPos,a,-1)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[a],config.fmtXLabel),yAxisPosX+a*valueHop+valueHop/2,msr.xLabelPos,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,a,-1),ctx.restore())}if(config.xAxisTop){msr.rotateTLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateTLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center";var b;b="object"==typeof data.labels2?data.labels2:data.labels;for(var a=0;a<b.length;a++)showLabels(ctx,data,config,a)&&(ctx.save(),msr.rotateTLabels>0?(ctx.translate(yAxisPosX+a*valueHop+valueHop/2-msr.highestTXLabel/2,msr.xTLabelPos),ctx.rotate(-((msr.rotateTLabels+180*(msr.rotateTLabels>90))*(Math.PI/180))),ctx.fillTextMultiLine(fmtChartJS(config,b[a],config.fmtXLabel),0,0,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+a*valueHop+valueHop/2-msr.highestXLabel/2,msr.xLabelPos,a,-1)):ctx.fillTextMultiLine(fmtChartJS(config,b[a],config.fmtXLabel),yAxisPosX+a*valueHop+valueHop/2,msr.xTLabelPos,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,a,-1),ctx.restore())}}ctx.textAlign="right",ctx.textBaseline="middle";for(var c=config.showYAxisMin?-1:0;c<calculatedScale.steps;c++)config.scaleShowLabels&&showYLabels(ctx,data,config,c+1,calculatedScale.labels[c+1])&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[c+1],yAxisPosX-(Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(c+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,c)),!config.yAxisRight||valueBounds.dbAxis||config.forceSecondScale||(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[c+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(c+1)*scaleHop,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,c)));if(config.yAxisRight&&(valueBounds.dbAxis||config.forceSecondScale))for(c=config.showYAxisMin?-1:0;c<calculatedScale2.steps;c++)config.scaleShowLabels&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale2.labels[c+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(c+1)*scaleHop2,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.scaleFontSize),!0,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,c))}function getValueBounds(){for(var upperValue=-Number.MAX_VALUE,lowerValue=Number.MAX_VALUE,upperValue2=-Number.MAX_VALUE,lowerValue2=Number.MAX_VALUE,secondAxis=!1,firstAxis=!1,mathValueHeight,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeightVal=window[mathFctName](parameter)}else mathValueHeightVal=0;for(var j=0;j<data.datasets[i].data.length;j++)mathValueHeight="object"==typeof mathValueHeightVal?mathValueHeightVal[Math.min(mathValueHeightVal.length,j)]:mathValueHeightVal,"undefined"!=typeof data.datasets[i].data[j]&&(2==data.datasets[i].axis?(secondAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue2&&(upperValue2=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue2&&(lowerValue2=1*data.datasets[i].data[j]-mathValueHeight)):(firstAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight)))}upperValue<lowerValue&&(upperValue=0,lowerValue=0),Math.abs(upperValue-lowerValue)<config.zeroValue&&(Math.abs(upperValue)<config.zeroValue&&(upperValue=.9),upperValue>0?(upperValue=1.1*upperValue,lowerValue=.9*lowerValue):(upperValue=.9*upperValue,lowerValue=1.1*lowerValue)),"function"==typeof config.graphMin?lowerValue=setOptionValue(!0,!0,1,"GRAPHMIN",ctx,data,statData,void 0,config.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(config.graphMin)||(lowerValue=config.graphMin),"function"==typeof config.graphMax?upperValue=setOptionValue(!0,!0,1,"GRAPHMAX",ctx,data,statData,void 0,config.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(config.graphMax)||(upperValue=config.graphMax),secondAxis&&(upperValue2<lowerValue2&&(upperValue2=0,lowerValue2=0),Math.abs(upperValue2-lowerValue2)<config.zeroValue&&(Math.abs(upperValue2)<config.zeroValue&&(upperValue2=.9),upperValue2>0?(upperValue2=1.1*upperValue2,lowerValue2=.9*lowerValue2):(upperValue2=.9*upperValue2,lowerValue2=1.1*lowerValue2)),"function"==typeof config.graphMin2?lowerValue2=setOptionValue(!0,!0,1,"GRAPHMIN2",ctx,data,statData,void 0,config.graphMin2,"graphMin2",-1,-1,{nullValue:!0}):isNaN(config.graphMin2)||(lowerValue2=config.graphMin2),"function"==typeof config.graphMax2?upperValue2=setOptionValue(!0,!0,1,"GRAPHMAX2",ctx,data,statData,void 0,config.graphMax2,"graphMax2",-1,-1,{nullValue:!0}):isNaN(config.graphMax2)||(upperValue2=config.graphMax2)),!firstAxis&&secondAxis&&(upperValue=upperValue2,lowerValue=lowerValue2),labelHeight=Math.ceil(ctx.chartTextScale*config.scaleFontSize),scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return upperValue<lowerValue&&(lowerValue=upperValue-1),upperValue2<lowerValue2&&(lowerValue2=upperValue2-1),{maxValue:upperValue,minValue:lowerValue,maxValue2:upperValue2,minValue2:lowerValue2,dbAxis:secondAxis,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,scaleHop2,calculatedScale,calculatedScale2,labelHeight,scaleHeight,valueBounds,labelTemplateString,labelTemplateString2,valueHop,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0,msr;if(ctx.tpchart="Bar",ctx.tpdata=0,init_and_start(ctx,data,config)){for(var statData=initPassVariableData_part1(data,config,ctx),nrOfBars=data.datasets.length,i=0;i<data.datasets.length;i++)"Line"==data.datasets[i].type?(statData[i][0].tpchart="Line",nrOfBars--):statData[i][0].tpchart="Bar";var bufferDataset,l=0;if(msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,"nihil","nihil",!0,!1,!0,!0,"Bar"),valueBounds=getValueBounds(),valueBounds.minValue<=0&&(config.logarithmic=!1),valueBounds.maxSteps>0&&valueBounds.minSteps>0){config.logarithmic!==!1&&valueBounds.minValue<=0&&(config.logarithmic=!1),config.logarithmic2!==!1&&valueBounds.minValue2<=0&&(config.logarithmic2=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&OrderOfMagnitude<4||config.scaleOverride)&&(config.logarithmic=!1);var OrderOfMagnitude2=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue2)));if(("fuzzy"==config.logarithmic2&&OrderOfMagnitude2<4||config.scaleOverride2)&&(config.logarithmic2=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",labelTemplateString2=config.scaleShowLabels2?config.scaleLabel2:"",config.scaleOverride){var scaleStartValue=setOptionValue(!0,!0,1,"SCALESTARTVALUE",ctx,data,statData,void 0,config.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),scaleSteps=setOptionValue(!0,!0,1,"SCALESTEPS",ctx,data,statData,void 0,config.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),scaleStepWidth=setOptionValue(!0,!0,1,"SCALESTEPWIDTH",ctx,data,statData,void 0,config.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});calculatedScale={steps:scaleSteps,stepValue:scaleStepWidth,graphMin:scaleStartValue,graphMax:scaleStartValue+scaleSteps*scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,scaleStartValue,calculatedScale.graphMax,scaleStepWidth)}else calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString);if(valueBounds.dbAxis||config.forceSecondScale)if(config.scaleOverride2){var scaleStartValue2=setOptionValue(!0,!0,1,"SCALESTARTVALUE2",ctx,data,statData,void 0,config.scaleStartValue2,"scaleStartValue2",-1,-1,{nullValue:!0}),scaleSteps2=setOptionValue(!0,!0,1,"SCALESTEPS2",ctx,data,statData,void 0,config.scaleSteps2,"scaleSteps2",-1,-1,{nullValue:!0}),scaleStepWidth2=setOptionValue(!0,!0,1,"SCALESTEPWIDTH2",ctx,data,statData,void 0,config.scaleStepWidth2,"scaleStepWidth2",-1,-1,{nullValue:!0});calculatedScale2={steps:scaleSteps2,stepValue:scaleStepWidth2,graphMin:scaleStartValue2,graphMax:scaleStartValue2+scaleSteps2*scaleStepWidth2,labels:[]},populateLabels(2,config,labelTemplateString2,calculatedScale2.labels,calculatedScale2.steps,scaleStartValue2,calculatedScale2.graphMax,scaleStepWidth2)}else calculatedScale2=calculateScale(2,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue2,valueBounds.minValue2,labelTemplateString2);else calculatedScale2={steps:0,stepValue:0,graphMin:0,graphMax:0,labels:null};msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,calculatedScale.labels,calculatedScale2.labels,!0,!1,!0,!0,"Bar");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop),msr.availableWidth=msr.availableWidth-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight),scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),scaleHop2=Math.floor(msr.availableHeight/calculatedScale2.steps),valueHop=Math.floor(msr.availableWidth/data.labels.length),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/data.labels.length),msr.topNotUsableHeight+=msr.availableHeight-calculatedScale.steps*scaleHop,msr.rightNotUsableWidth+=msr.availableWidth-data.labels.length*valueHop,msr.clrwidth=msr.clrwidth-(msr.availableWidth-data.labels.length*valueHop),msr.availableWidth=data.labels.length*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,yAxisPosX=msr.leftNotUsableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft),xAxisPosY=msr.topNotUsableHeight+msr.availableHeight+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop),barWidth=(valueHop-2*Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth)-2*Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)-(Math.ceil(ctx.chartSpaceScale*config.barDatasetSpacing)*nrOfBars-1)-(Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2*nrOfBars-1))/nrOfBars,barWidth>=0&&barWidth<=1&&(barWidth=1),barWidth<0&&barWidth>=-1&&(barWidth=-1);var additionalSpaceBetweenBars;1*config.maxBarWidth>0&&barWidth>1*config.maxBarWidth?(additionalSpaceBetweenBars=nrOfBars*(barWidth-1*config.maxBarWidth)/2,barWidth=1*config.maxBarWidth):additionalSpaceBetweenBars=0;var zeroY2=0,zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop);"object"==typeof calculatedScale2&&(zeroY2=calculateOffset(config.logarithmic2,0,calculatedScale2,scaleHop2)),initPassVariableData_part2(statData,data,config,ctx,{msr:msr,yAxisPosX:yAxisPosX,xAxisPosY:xAxisPosY,valueHop:valueHop,nbValueHop:data.labels.length-1,barWidth:barWidth,additionalSpaceBetweenBars:additionalSpaceBetweenBars,zeroY:zeroY,zeroY2:zeroY2,calculatedScale:calculatedScale,calculatedScale2:calculatedScale2,scaleHop:scaleHop,scaleHop2:scaleHop2}),drawLabels(),animationLoop(config,msr.legendMsr,drawScale,drawBars,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data,statData)}else testRedraw(ctx,data,config),ctx.firstPass=9;return{data:data,config:config,ctx:ctx}}},HorizontalBar=function(a,b,c){function x(d){var e,f,g,h,i,j,k,l,m,n;for(e=0;e<a.datasets.length;e++)for(f=0;f<a.datasets[e].data.length;f++)0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,r,a.datasets[e].displayData,b.displayData,"displayData",e,f,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,r,a.displayData,b.displayData,"displayData",f,-1,{nullvalue:null})&&(c.save(),c.lineWidth=Math.ceil(c.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",c,a,r,a.datasets[e].barStrokeWidth,b.barStrokeWidth,"barStrokeWidth",e,f,{animationValue:g,xPosLeft:r[e][f].xPosLeft,yPosBottom:r[e][f].yPosBottom,xPosRight:r[e][f].xPosLeft+o,yPosTop:r[e][f].yPosBottom})),g=animationCorrection(d,a,b,e,f,!1).animVal,g>1&&(g-=1),h=1*a.datasets[e].data[f]>=0?g*r[e][f].barWidth-Math.ceil(c.chartLineScale*b.barStrokeWidth)/2:g*r[e][f].barWidth+Math.ceil(c.chartLineScale*b.barStrokeWidth)/2,c.fillStyle=setOptionValue(!0,!0,1,"COLOR",c,a,r,a.datasets[e].fillColor,b.defaultFillColor,"fillColor",e,f,{animationValue:g,xPosLeft:r[e][f].xPosLeft,yPosBottom:r[e][f].yPosBottom,xPosRight:r[e][f].xPosLeft+h,yPosTop:r[e][f].yPosBottom}),c.strokeStyle=setOptionValue(!0,!0,1,"STROKECOLOR",c,a,r,a.datasets[e].strokeColor,b.defaultStrokeColor,"strokeColor",e,f,{nullvalue:null}),"undefined"!=typeof a.datasets[e].data[f]&&(Math.abs(a.datasets[e].data[f])>=b.zeroValue||1==b.showZeroValue)&&y(c,r[e][f].yPosTop,r[e][f].xPosLeft,o,h,b.barShowStroke,b.barBorderRadius,0,e,f,a.datasets[e].data[f]<0?-1:1),c.restore());for(e=0;e<a.datasets.length;e++)for(f=0;f<a.datasets[e].data.length;f++)0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,r,a.datasets[e].displayData,b.displayData,"displayData",e,f,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,r,a.displayData,b.displayData,"displayData",f,-1,{nullvalue:null})&&(complementaryBar=setOptionValue(!0,!0,1,"COMPLEMENTARYBAR",c,a,r,a.datasets[e].complementaryBar,b.complementaryBar,"complementaryBar",e,f,{nullvalue:null}),0!=complementaryBar&&(c.save(),c.lineWidth=Math.ceil(c.chartLineScale*setOptionValue(!0,!0,1,"BARSTROKEWIDTH",c,a,r,a.datasets[e].barStrokeWidth,b.barStrokeWidth,"barStrokeWidth",e,f,{animationValue:g,xPosLeft:r[e][f].xPosLeft,yPosBottom:r[e][f].yPosBottom,xPosRight:r[e][f].xPosLeft+o,yPosTop:r[e][f].yPosBottom-h})),g=animationCorrection(d,a,b,e,f,!1).animVal,g>1&&(g-=1),h=1*a.datasets[e].data[f]>=0?g*r[e][f].barWidth-Math.ceil(c.chartLineScale*b.barStrokeWidth)/2:g*r[e][f].barWidth+Math.ceil(c.chartLineScale*b.barStrokeWidth)/2,i=q.clrwidth-Math.ceil(c.chartLineScale*(b.scaleTickSizeLeft+b.scaleTickSizeRight)),j=r[e][f].xPosLeft-q.clrx-Math.ceil(c.chartLineScale*b.scaleTickSizeRight),k=i-j,1*a.datasets[e].data[f]<0?(l=-(q.clrwidth-(r[e][f].xPosLeft-q.clrx-h))+Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),
l=-(k+h)+3*(c.lineWidth/2),m=j-3*(c.lineWidth/2),n=-(c.lineWidth/2)):(l=q.clrwidth-(r[e][f].xPosLeft-q.clrx+h+c.lineWidth),l=j-h-3*(c.lineWidth/2),m=-(k-3*(c.lineWidth/2)),n=+(c.lineWidth/2)),c.fillStyle=setOptionValue(!0,!0,1,"COMPLEMENTARYCOLOR",c,a,r,a.datasets[e].complementaryColor,b.complementaryColor,"complementaryColor",e,f,{animationValue:g,xPosLeft:r[e][f].xPosLeft+h,yPosBottom:r[e][f].yPosBottom,xPosRight:r[e][f].xPosLeft+h+l,yPosTop:r[e][f].yPosBottom}),c.strokeStyle=setOptionValue(!0,!0,1,"COMPLEMENTARYSTROKECOLOR",c,a,r,a.datasets[e].complementaryStrokeColor,b.complementaryStrokeColor,"strokeColor",e,f,{nullvalue:null}),y(c,r[e][f].yPosTop,r[e][f].xPosLeft+h+2*n,o,l,b.barShowStroke,b.barBorderRadius,0,e,f,a.datasets[e].data[f]<0?-1:1),b.complementaryBarFullHeight&&y(c,r[e][f].yPosTop,r[e][f].xPosLeft-2*n,o,m,b.barShowStroke,b.barBorderRadius,0,e,f,a.datasets[e].data[f]<0?-1:1),c.restore()));if(d>=b.animationStopValue)for(e=0;e<a.datasets.length;e++)for(f=0;f<a.datasets[e].data.length;f++)if(0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,r,a.datasets[e].displayData,b.displayData,"displayData",e,f,{nullvalue:null})&&0!=setOptionValue(!0,!0,1,"DISPLAYDATA",c,a,r,a.displayData,b.displayData,"displayData",f,-1,{nullvalue:null})&&"undefined"!=typeof a.datasets[e].data[f]&&(jsGraphAnnotate[c.ChartNewId][jsGraphAnnotate[c.ChartNewId].length]=["RECT",e,f,r,setOptionValue(!0,!0,1,"ANNOTATEDISPLAY",c,a,r,a.datasets[e].annotateDisplay,b.annotateDisplay,"annotateDisplay",e,f,{nullValue:!0})],setOptionValue(!0,!0,1,"INGRAPHDATASHOW",c,a,r,a.datasets[e].inGraphDataShow,b.inGraphDataShow,"inGraphDataShow",e,f,{nullValue:!0}))){c.save(),c.textAlign=setOptionValue(!0,!0,1,"INGRAPHDATAALIGN",c,a,r,void 0,b.inGraphDataAlign,"inGraphDataAlign",e,f,{nullValue:!0}),c.textBaseline=setOptionValue(!0,!0,1,"INGRAPHDATAVALIGN",c,a,r,void 0,b.inGraphDataVAlign,"inGraphDataVAlign",e,f,{nullValue:!0}),c.font=setOptionValue(!0,!0,1,"INGRAPHDATAFONTSTYLE",c,a,r,void 0,b.inGraphDataFontStyle,"inGraphDataFontStyle",e,f,{nullValue:!0})+" "+setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,r,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",e,f,{nullValue:!0})+"px "+setOptionValue(!0,!0,1,"INGRAPHDATAFONTFAMILY",c,a,r,void 0,b.inGraphDataFontFamily,"inGraphDataFontFamily",e,f,{nullValue:!0}),c.fillStyle=setOptionValue(!0,!0,1,"INGRAPHDATAFONTCOLOR",c,a,r,void 0,b.inGraphDataFontColor,"inGraphDataFontColor",e,f,{nullValue:!0}),c.beginPath();var p=0,s=0;1==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",c,a,r,void 0,b.inGraphDataYPosition,"inGraphDataYPosition",e,f,{nullValue:!0})?p=r[e][f].yPosTop-setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,r,void 0,b.inGraphDataPaddingY,"inGraphDataPaddingY",e,f,{nullValue:!0})+o:2==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",c,a,r,void 0,b.inGraphDataYPosition,"inGraphDataYPosition",e,f,{nullValue:!0})?p=r[e][f].yPosTop+o/2-setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,r,void 0,b.inGraphDataPaddingY,"inGraphDataPaddingY",e,f,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAYPOSITION",c,a,r,void 0,b.inGraphDataYPosition,"inGraphDataYPosition",e,f,{nullValue:!0})&&(p=r[e][f].yPosTop-setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGY",c,a,r,void 0,b.inGraphDataPaddingY,"inGraphDataPaddingY",e,f,{nullValue:!0})),1==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",c,a,r,void 0,b.inGraphDataXPosition,"inGraphDataXPosition",e,f,{nullValue:!0})?s=r[e][f].xPosLeft+setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,r,void 0,b.inGraphDataPaddingX,"inGraphDataPaddingX",e,f,{nullValue:!0}):2==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",c,a,r,void 0,b.inGraphDataXPosition,"inGraphDataXPosition",e,f,{nullValue:!0})?s=(r[e][f].xPosLeft+r[e][f].xPosRight)/2+setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,r,void 0,b.inGraphDataPaddingX,"inGraphDataPaddingX",e,f,{nullValue:!0}):3==setOptionValue(!0,!0,1,"INGRAPHDATAXPOSITION",c,a,r,void 0,b.inGraphDataXPosition,"inGraphDataXPosition",e,f,{nullValue:!0})&&(s=r[e][f].xPosRight+setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATAPADDINGX",c,a,r,void 0,b.inGraphDataPaddingX,"inGraphDataPaddingX",e,f,{nullValue:!0})),c.translate(s,p);var t=tmplbis(setOptionValue(!0,!0,1,"INGRAPHDATATMPL",c,a,r,void 0,b.inGraphDataTmpl,"inGraphDataTmpl",e,f,{nullValue:!0}),r[e][f],b),u=setOptionValue(!0,!0,1,"INGRAPHDATAROTATE",c,a,r,void 0,b.inGraphDataRotate,"inGraphDataRotate",e,f,{nullValue:!0})*(Math.PI/180);c.rotate(u),setTextBordersAndBackground(c,t,setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,r,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",e,f,{nullValue:!0}),0,0,setOptionValue(!0,!0,1,"INGRAPHDATABORDERS",c,a,r,void 0,b.inGraphDataBorders,"inGraphDataBorders",e,f,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSELECTION",c,a,r,void 0,b.inGraphDataBordersSelection,"inGraphDataBordersSelection",e,f,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSCOLOR",c,a,r,void 0,b.inGraphDataBordersColor,"inGraphDataBordersColor",e,f,{nullValue:!0}),setOptionValue(!0,!0,c.chartLineScale,"INGRAPHDATABORDERSWIDTH",c,a,r,void 0,b.inGraphDataBordersWidth,"inGraphDataBordersWidth",e,f,{nullValue:!0}),setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",c,a,r,void 0,b.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",e,f,{nullValue:!0}),setOptionValue(!0,!0,c.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",c,a,r,void 0,b.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",e,f,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABORDERSSTYLE",c,a,r,void 0,b.inGraphDataBordersStyle,"inGraphDataBordersStyle",e,f,{nullValue:!0}),setOptionValue(!0,!0,1,"INGRAPHDATABACKGROUNDCOLOR",c,a,r,void 0,b.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",e,f,{nullValue:!0}),"INGRAPHDATA",b.inGraphDataBordersRadius),c.fillTextMultiLine(t,0,0,c.textBaseline,setOptionValue(!0,!0,c.chartTextScale,"INGRAPHDATAFONTSIZE",c,a,r,void 0,b.inGraphDataFontSize,"inGraphDataFontSize",e,f,{nullValue:!0}),!0,b.detectMouseOnText,c,"INGRAPHDATA_TEXTMOUSE",u,s,p,e,f),c.restore()}}function y(c,d,e,f,g,h,i,j,k,l,m){c.beginPath(),c.moveTo(e+j,d),c.lineTo(e+j,d+f),c.lineTo(e+g-m*i,d+f),c.quadraticCurveTo(e+g,d+f,e+g,d+f-i),c.lineTo(e+g,d+i),c.quadraticCurveTo(e+g,d,e+g-m*i,d),c.lineTo(e+j,d),c.quadraticCurveTo(e+j,d,e+j,d+f),h&&(c.setLineDash(lineStyleFn(setOptionValue(!0,!0,1,"STROKESTYLE",c,a,r,a.datasets[k].datasetStrokeStyle,b.datasetStrokeStyle,"datasetStrokeStyle",k,l,{nullvalue:null}))),c.stroke(),c.setLineDash([])),c.closePath(),c.fill()}function z(){drawGridScale(c,a,b,q,m,n,w,k,e,a.labels.length+0,f.steps+1)}function A(){if(c.font=b.scaleFontStyle+" "+Math.ceil(c.chartTextScale*b.scaleFontSize).toString()+"px "+b.scaleFontFamily,b.scaleShowLabels&&(b.xAxisTop||b.xAxisBottom)){if(c.textBaseline="top",c.fillStyle=b.scaleFontColor,b.xAxisBottom){q.rotateLabels>90?(c.save(),c.textAlign="left"):q.rotateLabels>0?(c.save(),c.textAlign="right"):c.textAlign="center";for(var d=b.showYAxisMin?-1:0;d<f.steps;d++)showYLabels(c,a,b,d+1,f.labels[d+1])&&(c.save(),q.rotateLabels>0?(c.translate(m+(d+1)*k-q.highestXLabel/2,q.xLabelPos),c.rotate(-((q.rotateLabels+180*(q.rotateLabels>90))*(Math.PI/180))),c.fillTextMultiLine(f.labels[d+1],0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",-(q.rotateLabels*(Math.PI/180)),m+(d+1)*k-q.highestXLabel/2,q.xLabelPos,d,-1)):c.fillTextMultiLine(f.labels[d+1],m+(d+1)*k,q.xLabelPos,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",0,0,0,d,-1),c.restore())}if(b.xAxisTop){q.rotateTLabels>90?(c.save(),c.textAlign="left"):q.rotateTLabels>0?(c.save(),c.textAlign="right"):c.textAlign="center";for(var d=b.showYAxisMin?-1:0;d<f.steps;d++)showYLabels(c,a,b,d+1,f.labels[d+1])&&(c.save(),q.rotateTLabels>0?(c.translate(m+(d+1)*k-q.highestTXLabel/2,q.xTLabelPos),c.rotate(-((q.rotateTLabels+180*(q.rotateTLabels>90))*(Math.PI/180))),c.fillTextMultiLine(f.labels[d+1],0,0,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",-(q.rotateLabels*(Math.PI/180)),m+(d+1)*k-q.highestXLabel/2,q.xLabelPos,d,-1)):c.fillTextMultiLine(f.labels[d+1],m+(d+1)*k,q.xTLabelPos,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"XAXIS_TEXTMOUSE",0,0,0,d,-1),c.restore())}}c.textAlign="right",c.textBaseline="middle";for(var g=0;g<a.labels.length;g++)showLabels(c,a,b,g)&&(b.yAxisLeft&&(c.textAlign="right",c.fillTextMultiLine(fmtChartJS(b,a.labels[g],b.fmtXLabel),m-(Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),n-g*e-e/2,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,g)),b.yAxisRight&&(c.textAlign="left",c.fillTextMultiLine(fmtChartJS(b,a.labels[g],b.fmtXLabel),m+q.availableWidth+(Math.ceil(c.chartLineScale*b.scaleTickSizeRight)+Math.ceil(c.chartSpaceScale*b.yAxisSpaceRight)),n-g*e-e/2,c.textBaseline,Math.ceil(c.chartTextScale*b.scaleFontSize),!0,b.detectMouseOnText,c,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,g)))}function B(){for(var d=-Number.MAX_VALUE,e=Number.MAX_VALUE,f=0;f<a.datasets.length;f++)for(var i=0;i<a.datasets[f].data.length;i++)"undefined"!=typeof a.datasets[f].data[i]&&(1*a.datasets[f].data[i]>d&&(d=1*a.datasets[f].data[i]),1*a.datasets[f].data[i]<e&&(e=1*a.datasets[f].data[i]));d<e&&(d=0,e=0),Math.abs(d-e)<b.zeroValue&&(Math.abs(d)<b.zeroValue&&(d=.9),d>0?(d=1.1*d,e=.9*e):(d=.9*d,e=1.1*e)),"function"==typeof b.graphMin?e=setOptionValue(!0,!0,1,"GRAPHMIN",c,a,r,void 0,b.graphMin,"graphMin",-1,-1,{nullValue:!0}):isNaN(b.graphMin)||(e=b.graphMin),"function"==typeof b.graphMax?d=setOptionValue(!0,!0,1,"GRAPHMAX",c,a,r,void 0,b.graphMax,"graphMax",-1,-1,{nullValue:!0}):isNaN(b.graphMax)||(d=b.graphMax),g=Math.ceil(c.chartTextScale*b.scaleFontSize),h=q.availableHeight;var j=Math.floor(h/(.66*g)),k=Math.floor(h/g*.5);return d<e&&(e=d-1),{maxValue:d,minValue:e,maxSteps:j,minSteps:k}}var e,f,g,h,i,j,k,m,n,o,q;if(c.tpchart="HorizontalBar",c.tpdata=0,init_and_start(c,a,b)){b.reverseOrder&&"undefined"==typeof c.reversed&&(c.reversed=!0,a=reverseData(a));var r=initPassVariableData_part1(a,b,c);if(q=setMeasures(a,b,c,c.canvas.height,c.canvas.width,"nihil","nihil",!0,!0,!0,!0,"StackedBar"),i=B(),i.minValue<=0&&(b.logarithmic=!1),i.maxSteps>0&&i.minSteps>0){if(b.logarithmic!==!1&&i.minValue<=0&&(b.logarithmic=!1),j=b.scaleShowLabels?b.scaleLabel:"",b.scaleOverride){var s=setOptionValue(!0,!0,1,"SCALESTARTVALUE",c,a,r,void 0,b.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:!0}),t=setOptionValue(!0,!0,1,"SCALESTEPS",c,a,r,void 0,b.scaleSteps,"scaleSteps",-1,-1,{nullValue:!0}),u=setOptionValue(!0,!0,1,"SCALESTEPWIDTH",c,a,r,void 0,b.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:!0});f={steps:t,stepValue:u,graphMin:s,graphMax:s+t*u,labels:[]},populateLabels(1,b,j,f.labels,f.steps,s,f.graphMax,u),q=setMeasures(a,b,c,c.canvas.height,c.canvas.width,f.labels,null,!0,!0,!0,!0,"HorizontalBar")}else f=calculateScale(1,b,i.maxSteps,i.minSteps,i.maxValue,i.minValue,j),q=setMeasures(a,b,c,c.canvas.height,c.canvas.width,f.labels,f.labels,!0,!0,!0,!0,"HorizontalBar");q.availableHeight=q.availableHeight-Math.ceil(c.chartLineScale*b.scaleTickSizeBottom)-Math.ceil(c.chartLineScale*b.scaleTickSizeTop),q.availableWidth=q.availableWidth-Math.ceil(c.chartLineScale*b.scaleTickSizeLeft)-Math.ceil(c.chartLineScale*b.scaleTickSizeRight),e=Math.floor(q.availableHeight/a.labels.length),k=Math.floor(q.availableWidth/f.steps),(0==k||b.fullWidthGraph)&&(k=q.availableWidth/f.steps),q.clrwidth=q.clrwidth-(q.availableWidth-f.steps*k),q.topNotUsableHeight+=q.availableHeight-a.labels.length*e,q.rightNotUsableWidth+=q.availableWidth-f.steps*k,q.availableWidth=f.steps*k,q.availableHeight=a.labels.length*e,m=q.leftNotUsableWidth+Math.ceil(c.chartLineScale*b.scaleTickSizeLeft),n=q.topNotUsableHeight+q.availableHeight+Math.ceil(c.chartLineScale*b.scaleTickSizeTop),o=(e-2*Math.ceil(c.chartLineScale*b.scaleGridLineWidth)-2*Math.ceil(c.chartSpaceScale*b.barValueSpacing)-(Math.ceil(c.chartSpaceScale*b.barDatasetSpacing)*a.datasets.length-1)-(Math.ceil(c.chartLineScale*b.barStrokeWidth)/2*a.datasets.length-1))/a.datasets.length,o>=0&&o<=1&&(o=1),o<0&&o>=-1&&(o=-1);var v;1*b.maxBarWidth>0&&o>1*b.maxBarWidth?(v=a.datasets.length*(o-1*b.maxBarWidth)/2,o=1*b.maxBarWidth):v=0;var w=0;w=calculateOffset(b.logarithmic,0,f,k),A(),initPassVariableData_part2(r,a,b,c,{yAxisPosX:m,xAxisPosY:n,barWidth:o,additionalSpaceBetweenBars:v,zeroY:w,scaleHop:e,valueHop:k,calculatedScale:f}),animationLoop(b,q.legendMsr,z,x,c,q.clrx,q.clry,q.clrwidth,q.clrheight,m+q.availableWidth/2,n-q.availableHeight/2,m,n,a,r)}else testRedraw(c,a,b),c.firstPass=9;return{data:a,config:b,ctx:c}}},requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),requestAnimFrameSetTimeOut=function(){return function(a){window.setTimeout(a,1e3/60)}}(),cache={}};